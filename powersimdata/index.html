
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>5. PowerSimData &#8212; documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="icon" href="../_static/favicon.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6. PreREISE" href="../prereise/index.html" />
    <link rel="prev" title="4. Working with Git/GitHub" href="../user/git_guide.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="powersimdata">
<h1><span class="section-number">5. </span>PowerSimData<a class="headerlink" href="#powersimdata" title="Permalink to this heading">¶</a></h1>
<p>This tutorial is designed to help users to use our software to carry power flow study in
the U.S. electrical grid. PowerSimData is an open source package written in Python that
is available on <a class="reference external" href="https://github.com/Breakthrough-Energy/PowerSimData">GitHub</a>.</p>
<section id="grid-object">
<h2><span class="section-number">5.1. </span>Grid Object<a class="headerlink" href="#grid-object" title="Permalink to this heading">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">Grid</span></code> object contains data representing an electric power system. An object has various attributes that are listed below:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data_loc</span></code> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) gives the path to the data used to create a <code class="docutils literal notranslate"><span class="pre">Grid</span></code> object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grid_model</span></code> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) gives the name of the power system</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) gives the version of the grid model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">model_immutables</span></code> (<code class="docutils literal notranslate"><span class="pre">object</span></code>) contains static data specific to the power system</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">zone2id</span></code> and <code class="docutils literal notranslate"><span class="pre">id2zone</span></code> (<code class="docutils literal notranslate"><span class="pre">dict</span></code>) map load zone name (id) to load zone id
(name)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interconnect</span></code> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) indicates the geographical region covered</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bus</span></code> (<code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>) encloses the characteristics of the buses</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sub</span></code> (<code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>) encloses the characteristics of the substations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bus2sub</span></code> (<code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>) maps buses to substations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plant</span></code> (<code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>) encloses the characteristics of the plants</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">branch</span></code> (<code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>) encloses the characteristics of the AC lines,
transformers and transformer windings</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gencost</span></code> (<code class="docutils literal notranslate"><span class="pre">dict</span></code>) encloses the generation cost curves</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dcline</span></code> (<code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>) encloses the characteristics of the HVDC lines</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">storage</span></code> (<code class="docutils literal notranslate"><span class="pre">dict</span></code>) encloses information related to storage units</p></li>
</ul>
<p>Two grid models representing the <a class="reference external" href="https://arxiv.org/pdf/2002.06155.pdf">U.S.</a> and
the <a class="reference external" href="https://arxiv.org/pdf/1806.01613.pdf">European</a> power system at the transmission
network level are available at this time. In addition to the full continental U.S.
or Europe, a <code class="docutils literal notranslate"><span class="pre">Grid</span></code> object can represent one of the interconnection or a
combination of interconnections.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Grid</span></code> object can be created as follows for the U.S. grid model:</p>
<ul>
<li><p>U.S. grid</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata</span> <span class="kn">import</span> <span class="n">Grid</span>
<span class="n">usa</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="s2">&quot;USA&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Western interconnection</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata</span> <span class="kn">import</span> <span class="n">Grid</span>
<span class="n">western</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="s2">&quot;Western&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>combination of two interconnections</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata</span> <span class="kn">import</span> <span class="n">Grid</span>
<span class="n">eastern_western</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">([</span><span class="s2">&quot;Eastern&quot;</span><span class="p">,</span> <span class="s2">&quot;Western&quot;</span><span class="p">])</span>
<span class="n">texas_western</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">([</span><span class="s2">&quot;Texas&quot;</span><span class="p">,</span> <span class="s2">&quot;Western&quot;</span><span class="p">])</span>
</pre></div>
</div>
</li>
</ul>
<p>While the for the European grid model, it can be achieved as follows:</p>
<ul>
<li><p>European grid with 128 load zones</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata</span> <span class="kn">import</span> <span class="n">Grid</span>
<span class="n">europe</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="s2">&quot;Europe&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;europe_tub&quot;</span><span class="p">,</span> <span class="n">reduction</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Nordic interconnection</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata</span> <span class="kn">import</span> <span class="n">Grid</span>
<span class="n">europe</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="s2">&quot;Nordic&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;europe_tub&quot;</span><span class="p">,</span> <span class="n">reduction</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>Any <code class="docutils literal notranslate"><span class="pre">Grid</span></code> object can be transformed, i.e., generators/lines can be scaled or added.
This is achieved in the scenario framework.</p>
</section>
<section id="scenario-framework">
<h2><span class="section-number">5.2. </span>Scenario Framework<a class="headerlink" href="#scenario-framework" title="Permalink to this heading">¶</a></h2>
<p>A scenario is defined by the following objects:</p>
<ul class="simple">
<li><p>a <strong>power grid</strong>, an interconnected network delivering electricity from producers
to load buses and consisting of:</p>
<ul>
<li><p>thermal (coal, natural gas, etc.) and renewable generators (wind turbines, etc.)
that produce electrical power</p></li>
<li><p>substations that change voltage levels (from high to low, or the reverse)</p></li>
<li><p>transmission lines that carry power from one place to the other (between two
substations, between a substation and load bus, between a generator bus and a
substation, etc.) - Both, high voltage AC and DC lines are used in our model</p></li>
<li><p>generator cost curve that specifies the cost as a function of power generated ($/
MWh) - These are determined by fuel cost and generator efficiency</p></li>
</ul>
</li>
<li><p><strong>time series</strong> for renewable generators and demand - These profiles are calculated
in the <a class="reference external" href="https://github.com/Breakthrough-Energy/PreREISE">PreREISE</a> package</p>
<ul>
<li><p>profile for the renewable generators consists of hourly power output</p></li>
<li><p>load profile gives the hourly demand (MW) in various load zones, which are
geographic entities such as a state or a portion of a state</p></li>
</ul>
</li>
<li><p>a <strong>change table</strong> used to alter the grid and profiles. To illustrate:</p>
<ul>
<li><p>generators and transmission lines (AC and DC) capacity can be scaled up and down</p></li>
<li><p>storage units, generators and transmission lines can be added</p></li>
</ul>
</li>
<li><p>some <strong>simulation parameters</strong> such as the start and end date along with the duration
of the intervals</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> class handles the following tasks:</p>
<ul class="simple">
<li><p>Build a scenario (<strong>create</strong> state)</p></li>
<li><p>Launch the scenario and extract the output data (<strong>execute</strong> state)</p></li>
<li><p>Retrieve the output data (<strong>analyze</strong> state)</p></li>
<li><p>Delete a scenario (<strong>delete</strong> state)</p></li>
<li><p>Move a scenario to a backup disk (<strong>move</strong> state)</p></li>
</ul>
<p>When a <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> class is instantiated, its state is set either to <strong>create</strong>,
<strong>execute</strong> or <strong>analyze</strong>. The initial state of the <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> object is set in the
constructor of the class. The <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> class can be instantiated as follows:</p>
<ul class="simple">
<li><p>no parameter will instantiate the <cite>Scenario</cite> class in the <strong>create</strong> state and a new
scenario can then be built</p></li>
<li><p>a valid scenario identification number (<code class="docutils literal notranslate"><span class="pre">str</span></code> or <code class="docutils literal notranslate"><span class="pre">int</span></code>) or name (<code class="docutils literal notranslate"><span class="pre">str</span></code>) - Then:</p>
<ul>
<li><p>if the scenario has been ran and its output data have been extracted, it will be
in the <strong>analyze</strong> state</p></li>
<li><p>If the scenario has only been created or ran but not extracted, it will be in the
<strong>execute</strong> state</p></li>
</ul>
</li>
</ul>
<p>Note that instantiating a <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> object with a string that doesn’t match any
existing scenarios identification number or name will result in a printout of the list
of existing scenarios and their information.</p>
<section id="creating-a-scenario">
<h3><span class="section-number">5.2.1. </span>Creating a Scenario<a class="headerlink" href="#creating-a-scenario" title="Permalink to this heading">¶</a></h3>
<p>A scenario can be created using few lines of code. This is illustrated below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata</span> <span class="kn">import</span> <span class="n">Scenario</span>

<span class="n">scenario</span> <span class="o">=</span> <span class="n">Scenario</span><span class="p">()</span>
<span class="c1"># print name of Scenario object state</span>
<span class="nb">print</span><span class="p">(</span><span class="n">scenario</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="c1"># Start building a scenario</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">set_grid</span><span class="p">(</span><span class="n">grid_model</span><span class="o">=</span><span class="s2">&quot;usa_tamu&quot;</span><span class="p">,</span> <span class="n">interconnect</span><span class="o">=</span><span class="s2">&quot;Western&quot;</span><span class="p">)</span>

<span class="c1"># set plan and scenario names</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;dummy&quot;</span><span class="p">)</span>
<span class="c1"># set start date, end date and interval</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">set_time</span><span class="p">(</span><span class="s2">&quot;2016-08-01 00:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;2016-08-31 23:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;24H&quot;</span><span class="p">)</span>
<span class="c1"># set demand profile version</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">set_base_profile</span><span class="p">(</span><span class="s2">&quot;demand&quot;</span><span class="p">,</span> <span class="s2">&quot;vJan2021&quot;</span><span class="p">)</span>
<span class="c1"># set hydro profile version</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">set_base_profile</span><span class="p">(</span><span class="s2">&quot;hydro&quot;</span><span class="p">,</span> <span class="s2">&quot;vJan2021&quot;</span><span class="p">)</span>
<span class="c1"># set solar profile version</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">set_base_profile</span><span class="p">(</span><span class="s2">&quot;solar&quot;</span><span class="p">,</span> <span class="s2">&quot;vJan2021&quot;</span><span class="p">)</span>
<span class="c1"># set wind profile version</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">set_base_profile</span><span class="p">(</span><span class="s2">&quot;wind&quot;</span><span class="p">,</span> <span class="s2">&quot;vJan2021&quot;</span><span class="p">)</span>

<span class="c1"># scale capacity of solar plants in WA and AZ by 5 and 2.5, respectively</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">change_table</span><span class="o">.</span><span class="n">scale_plant_capacity</span><span class="p">(</span>
  <span class="s2">&quot;solar&quot;</span><span class="p">,</span> <span class="n">zone_name</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Washington&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;Arizona&quot;</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">})</span>
<span class="c1"># scale capacity of wind farms in OR and MT by 1.5 and 2, respectively</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">change_table</span><span class="o">.</span><span class="n">scale_plant_capacity</span><span class="p">(</span>
    <span class="s2">&quot;wind&quot;</span><span class="p">,</span> <span class="n">zone_name</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Oregon&quot;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span> <span class="s2">&quot;Montana Western&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="c1"># scale capacity of branches in NV and WY by 2</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">change_table</span><span class="o">.</span><span class="n">scale_branch_capacity</span><span class="p">(</span>
    <span class="n">zone_name</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Nevada&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Wyoming&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>

<span class="c1"># add AC lines in NM and CO</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">change_table</span><span class="o">.</span><span class="n">add_branch</span><span class="p">(</span>
    <span class="p">[{</span><span class="s2">&quot;capacity&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;from_bus_id&quot;</span><span class="p">:</span> <span class="mi">2053002</span><span class="p">,</span> <span class="s2">&quot;to_bus_id&quot;</span><span class="p">:</span> <span class="mi">2053303</span><span class="p">},</span>
     <span class="p">{</span><span class="s2">&quot;capacity&quot;</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="s2">&quot;from_bus_id&quot;</span><span class="p">:</span> <span class="mi">2060002</span><span class="p">,</span> <span class="s2">&quot;to_bus_id&quot;</span><span class="p">:</span> <span class="mi">2060046</span><span class="p">}])</span>

<span class="c1"># add DC line between CO and CA (Bay Area)</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">change_table</span><span class="o">.</span><span class="n">add_dcline</span><span class="p">(</span>
    <span class="p">[{</span><span class="s2">&quot;capacity&quot;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s2">&quot;from_bus_id&quot;</span><span class="p">:</span> <span class="mi">2060771</span><span class="p">,</span> <span class="s2">&quot;to_bus_id&quot;</span><span class="p">:</span> <span class="mi">2021598</span><span class="p">}])</span>

<span class="c1"># add a solar plant in NV, a coal plant in ID and a natural gas plant in OR</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">change_table</span><span class="o">.</span><span class="n">add_plant</span><span class="p">(</span>
    <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;solar&quot;</span><span class="p">,</span> <span class="s2">&quot;bus_id&quot;</span><span class="p">:</span> <span class="mi">2030454</span><span class="p">,</span> <span class="s2">&quot;Pmax&quot;</span><span class="p">:</span> <span class="mi">75</span><span class="p">},</span>
     <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;coal&quot;</span><span class="p">,</span> <span class="s2">&quot;bus_id&quot;</span><span class="p">:</span> <span class="mi">2074334</span><span class="p">,</span> <span class="s2">&quot;Pmin&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s2">&quot;Pmax&quot;</span><span class="p">:</span> <span class="mi">750</span><span class="p">,</span> <span class="s2">&quot;c0&quot;</span><span class="p">:</span> <span class="mi">1800</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">:</span> <span class="mf">0.0025</span><span class="p">},</span>
     <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ng&quot;</span><span class="p">,</span> <span class="s2">&quot;bus_id&quot;</span><span class="p">:</span> <span class="mi">2090018</span><span class="p">,</span> <span class="s2">&quot;Pmax&quot;</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="s2">&quot;c0&quot;</span><span class="p">:</span> <span class="mi">900</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">:</span> <span class="mf">0.0015</span><span class="p">}])</span>

<span class="c1"># add a new bus, and a new one-way DC line connected to this bus</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">change_table</span><span class="o">.</span><span class="n">add_bus</span><span class="p">(</span>
    <span class="p">[{</span><span class="s2">&quot;lat&quot;</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span> <span class="s2">&quot;lon&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">125</span><span class="p">,</span> <span class="s2">&quot;zone_id&quot;</span><span class="p">:</span> <span class="mi">201</span><span class="p">,</span> <span class="s2">&quot;baseKV&quot;</span><span class="p">:</span> <span class="mi">138</span><span class="p">}])</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">change_table</span><span class="o">.</span><span class="n">add_dcline</span><span class="p">(</span>
    <span class="p">[{</span><span class="s2">&quot;from_bus_id&quot;</span><span class="p">:</span> <span class="mi">2090023</span><span class="p">,</span> <span class="s2">&quot;to_bus_id&quot;</span><span class="p">:</span> <span class="mi">2090024</span><span class="p">,</span> <span class="s2">&quot;Pmin&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Pmax&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">}])</span>

<span class="c1"># get grid used in scenario</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_grid</span><span class="p">()</span>
<span class="c1"># get change table used to alter the base grid.</span>
<span class="n">ct</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_ct</span><span class="p">()</span>
</pre></div>
</div>
<p>It can be convenient to clear the change table when creating a scenario. Let’s say for
instance that a wrong scaling factor has been applied or a generator has been attached
to the wrong bus. To do so, the <code class="docutils literal notranslate"><span class="pre">clear</span></code> method of the <code class="docutils literal notranslate"><span class="pre">ChangeTable</span></code> class can be
used.</p>
<p>There are also a couple of more advanced methods which can selectively scale branches
based on the topology of the existing grid, or based on power flow results from a
previous scenario. These can be called as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">scenario</span><span class="o">.</span><span class="n">change_table</span><span class="o">.</span><span class="n">scale_renewable_stubs</span><span class="p">()</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">scenario</span><span class="o">.</span><span class="n">change_table</span><span class="o">.</span><span class="n">scale_congested_mesh_branches</span><span class="p">(</span><span class="n">ref_scenario</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">ref_scenario</span></code> is a <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> object in <strong>analyze</strong> state.</p>
<p>The final step is to run the <code class="docutils literal notranslate"><span class="pre">create_scenario</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># review information</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">print_scenario_info</span><span class="p">()</span>
<span class="c1"># create scenario</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">create_scenario</span><span class="p">()</span>
<span class="c1"># print name of Scenario object state</span>
<span class="nb">print</span><span class="p">(</span><span class="n">scenario</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="c1"># print status of scenario</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">print_scenario_status</span><span class="p">()</span>
</pre></div>
</div>
<p>Once the scenario is successfully created, a scenario id is printed on screen and the
state of the <cite>Scenario</cite> object is switched to <strong>execute</strong>. printed on screen.</p>
</section>
<section id="running-the-scenario-and-extracting-output-data">
<h3><span class="section-number">5.2.2. </span>Running the Scenario and Extracting Output Data<a class="headerlink" href="#running-the-scenario-and-extracting-output-data" title="Permalink to this heading">¶</a></h3>
<p>It is possible to execute the scenario immediately right after it has been created. One
can also create a new <cite>Scenario</cite> object. This is the option we follow here.</p>
<p>The <strong>execute</strong> state accomplishes the three following tasks:</p>
<ul class="simple">
<li><p>Prepare simulation inputs: the scaled profiles and the MAT-file enclosing all the
information related to the electrical grid</p></li>
<li><p>Launch the simulation</p></li>
<li><p>Extract output data - This operation is performed once the simulation has finished
running.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata</span> <span class="kn">import</span> <span class="n">Scenario</span>

<span class="n">scenario</span> <span class="o">=</span> <span class="n">Scenario</span><span class="p">(</span><span class="s2">&quot;dummy&quot;</span><span class="p">)</span>
<span class="c1"># print scenario information</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">print_scenario_info</span><span class="p">()</span>

<span class="c1"># prepare simulation inputs</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">prepare_simulation_input</span><span class="p">()</span>

<span class="c1"># launch simulation</span>
<span class="n">process_run</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">launch_simulation</span><span class="p">()</span>

<span class="c1"># Get simulation status</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">print_scenario_status</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that the status of the simulation can be accessed using the
<code class="docutils literal notranslate"><span class="pre">print_scenario_status</span></code> method.</p>
<p>As an optional parameter, the number of threads used to run the simulation can be
specified using for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">process_run</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">launch_simulation</span><span class="p">(</span><span class="n">threads</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
<p>Extracting data from the simulation engine outputs can be a memory intensive process. If
there are resource constraints where the engine resides, it is possible to pause the
data from being extracted using an optional parameter and then manually extracting the
data at a suitable time:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">process_run</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">launch_simulation</span><span class="p">(</span><span class="n">extract_data</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># Extract data</span>
<span class="n">process_extract</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">extract_simulation_output</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that you will need to create a new <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> object via the scenario id/name to
access the output data.</p>
</section>
<section id="retrieving-scenario-output-data">
<h3><span class="section-number">5.2.3. </span>Retrieving Scenario Output Data<a class="headerlink" href="#retrieving-scenario-output-data" title="Permalink to this heading">¶</a></h3>
<p>When the <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> object is in the <strong>analyze</strong> state, the user can access various
scenario information and data. The following code snippet lists the methods implemented
to do so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata</span> <span class="kn">import</span> <span class="n">Scenario</span>

<span class="n">scenario</span> <span class="o">=</span> <span class="n">Scenario</span><span class="p">(</span><span class="mi">600</span><span class="p">)</span>
<span class="c1"># print name of Scenario object state</span>
<span class="nb">print</span><span class="p">(</span><span class="n">scenario</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="c1"># print scenario information</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">print_scenario_info</span><span class="p">()</span>

<span class="c1"># get change table</span>
<span class="n">ct</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_ct</span><span class="p">()</span>
<span class="c1"># get grid</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_grid</span><span class="p">()</span>

<span class="c1"># get demand profile</span>
<span class="n">demand</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_demand</span><span class="p">()</span>
<span class="c1"># get hydro profile</span>
<span class="n">hydro</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_hydro</span><span class="p">()</span>
<span class="c1"># get solar profile</span>
<span class="n">solar</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_solar</span><span class="p">()</span>
<span class="c1"># get wind profile</span>
<span class="n">wind</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_wind</span><span class="p">()</span>

<span class="c1"># get generation profile for generators</span>
<span class="n">pg</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_pg</span><span class="p">()</span>
<span class="c1"># get generation profile for storage units (if present in scenario)</span>
<span class="n">pg_storage</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_storage_pg</span><span class="p">()</span>
<span class="c1"># get energy state of charge of storage units (if present in scenario)</span>
<span class="n">e_storage</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_storage_e</span><span class="p">()</span>
<span class="c1"># get power flow profile for AC lines</span>
<span class="n">pf_ac</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_pf</span><span class="p">()</span>
<span class="c1"># get power flow profile for DC lines</span>
<span class="n">pf_dc</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_dcline_pf</span><span class="p">()</span>
<span class="c1"># get locational marginal price profile for each bus</span>
<span class="n">lmp</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_lmp</span><span class="p">()</span>
<span class="c1"># get congestion (upper power flow limit) profile for AC lines</span>
<span class="n">congu</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_congu</span><span class="p">()</span>
<span class="c1"># get congestion (lower power flow limit) profile for AC lines</span>
<span class="n">congl</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_congl</span><span class="p">()</span>
<span class="c1"># get time averaged congestion (lower and power flow limits) for AC lines</span>
<span class="n">avg_cong</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_averaged_cong</span><span class="p">()</span>
<span class="c1"># get load shed profile for each load bus</span>
<span class="n">load_shed</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get_load_shed</span><span class="p">()</span>
</pre></div>
</div>
<p>If generators or AC/DC lines have been scaled or added to the grid, and/or if the demand
in one or multiple load zones has been scaled for this scenario then the change table
will enclose these changes and the retrieved grid and profiles will be modified
accordingly. Note that the analysis of the scenario using the output data is done in the
<a class="reference external" href="https://github.com/Breakthrough-Energy/PostREISE">PostREISE</a> package.</p>
</section>
<section id="deleting-a-scenario">
<h3><span class="section-number">5.2.4. </span>Deleting a Scenario<a class="headerlink" href="#deleting-a-scenario" title="Permalink to this heading">¶</a></h3>
<p>A scenario can be deleted. All the input and output files as well as any entries in
monitoring files will be removed. The <strong>delete</strong> state is only accessible from the
<strong>analyze</strong> state.</p>
</section>
<section id="moving-a-scenario-to-backup-disk">
<h3><span class="section-number">5.2.5. </span>Moving a Scenario to Backup disk<a class="headerlink" href="#moving-a-scenario-to-backup-disk" title="Permalink to this heading">¶</a></h3>
<p>A scenario can be move to a backup disk. The <strong>move</strong> state is only accessible from the <strong>analyze</strong> state. The functionality is illustrated below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata</span> <span class="kn">import</span> <span class="n">Scenario</span>
<span class="kn">from</span> <span class="nn">powersimdata.scenario.move</span> <span class="kn">import</span> <span class="n">Move</span>

<span class="n">scenario</span> <span class="o">=</span> <span class="n">Scenario</span><span class="p">(</span><span class="s2">&quot;dummy&quot;</span><span class="p">)</span>
<span class="c1"># print name of Scenario object state</span>
<span class="nb">print</span><span class="p">(</span><span class="n">scenario</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="c1"># print list of accessible states</span>
<span class="nb">print</span><span class="p">(</span><span class="n">scenario</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">allowed</span><span class="p">)</span>

<span class="c1"># switch state</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">change</span><span class="p">(</span><span class="n">Move</span><span class="p">)</span>
<span class="c1"># print name of Scenario object state</span>
<span class="nb">print</span><span class="p">(</span><span class="n">scenario</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="c1"># move scenario</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">move_scenario</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="capacity-planning-framework">
<h2><span class="section-number">5.3. </span>Capacity Planning Framework<a class="headerlink" href="#capacity-planning-framework" title="Permalink to this heading">¶</a></h2>
<p>The capacity planning framework is intended to estimate the amount of new capacity that
will be required to meet future clean energy goals.</p>
<section id="required-inputs">
<h3><span class="section-number">5.3.1. </span>Required Inputs<a class="headerlink" href="#required-inputs" title="Permalink to this heading">¶</a></h3>
<p>At minimum, this framework requires a <em>reference</em> <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> object–used to specify
the current capacities and capacity factors of resources which <em>count</em> towards
state-level clean energy goals (this <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> object must be in <strong>analyze</strong>
state)–and a list of target areas (comprised of one or more zones) and their target
clean energy penetrations. A strategy must also be specified, either <code class="docutils literal notranslate"><span class="pre">independent</span></code>
(each area meets it own goal) or <code class="docutils literal notranslate"><span class="pre">collaborative</span></code> (all areas with non-zero goals work
together to meet a shared goal, resembling REC trading).</p>
<p>The list of targets may be specified in either a CSV file or a data frame, as long as
the required columns are present: <code class="docutils literal notranslate"><span class="pre">region_name</span></code> and <code class="docutils literal notranslate"><span class="pre">ce_target_fraction</span></code>. Optional
columns are: <code class="docutils literal notranslate"><span class="pre">allowed_resources</span></code> (defaulting to solar &amp; wind),
<code class="docutils literal notranslate"><span class="pre">external_ce_addl_historical_amount</span></code> (clean energy not modeled in our grid, defaulting
to 0), and <code class="docutils literal notranslate"><span class="pre">solar_percentage</span></code> (how much of the new capacity will be solar, defaulting
to the current solar:wind ratio. This input only applies to the <em>independent</em> strategy,
a shared-goal new solar fraction for <em>collaborative</em> planning is specified in the
function call to <code class="docutils literal notranslate"><span class="pre">calculate_clean_capacity_scaling</span></code>.</p>
</section>
<section id="optional-inputs">
<h3><span class="section-number">5.3.2. </span>Optional Inputs<a class="headerlink" href="#optional-inputs" title="Permalink to this heading">¶</a></h3>
<p>Since increasing penetration of renewable capacity is often associated with increased
curtailment, an expectation of this new curtailment can be passed as the
<code class="docutils literal notranslate"><span class="pre">addl_curtailment</span></code> parameter. For the <em>collaborative</em> method, this must be passed as a
dictionary of <code class="docutils literal notranslate"><span class="pre">{resource_name:</span> <span class="pre">value}</span></code> pairs, for the <em>independent</em> method this must
be passed as a data frame or as a two-layer nested dictionary which can be interpreted
as a data frame. For either method, additional curtailment must be a value between 0 and
1, representing a percentage, not percentage points. For example, if the previous
capacity factor was 30%, and additional curtailment of 10% is specified, the expected
new capacity factor will be 27%, not 20%.</p>
<p>Another <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> object can be passed as <code class="docutils literal notranslate"><span class="pre">next_scenario</span></code> to specify the magnitude
of future demand (relevant for energy goals which are expressed as a fraction of total
consumption); this <cite>Scenario</cite> object may be any state, as long as
<code class="docutils literal notranslate"><span class="pre">Scenario.get_demand()</span></code> can be called successfully, i.e., if the <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> object
is in <strong>create</strong> state, an interconnection must be defined. This allows calculation of
new capacity for a scenario which is being designed, using the demand scaling present in
the change table.</p>
<p>Finally, for the <em>collaborative</em> method, a <code class="docutils literal notranslate"><span class="pre">solar_fraction</span></code> may be defined, which
determines scenario-wide how much of the new capacity should be solar (the remainder
will be wind).</p>
</section>
<section id="example-capacity-planning-function-calls">
<h3><span class="section-number">5.3.3. </span>Example Capacity Planning Function Calls<a class="headerlink" href="#example-capacity-planning-function-calls" title="Permalink to this heading">¶</a></h3>
<p>Basic independent call, using the demand from the reference scenario to approximate the
future demand:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata.design.generation.clean_capacity_scaling</span> <span class="kn">import</span> <span class="n">calculate_clean_capacity_scaling</span>
<span class="kn">from</span> <span class="nn">powersimdata.scenario.scenario</span> <span class="kn">import</span> <span class="n">Scenario</span>

<span class="n">ref_scenario</span> <span class="o">=</span> <span class="n">Scenario</span><span class="p">(</span><span class="mi">403</span><span class="p">)</span>
<span class="n">targets_and_new_capacities_df</span> <span class="o">=</span> <span class="n">calculate_clean_capacity_scaling</span><span class="p">(</span>
    <span class="n">ref_scenario</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;independent&quot;</span><span class="p">,</span>
    <span class="n">targets_filename</span><span class="o">=</span><span class="s2">&quot;eastern_2030_clean_energy_targets.csv&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Complex collaborative call, using all optional parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata.design.generation.clean_capacity_scaling</span> <span class="kn">import</span> <span class="n">calculate_clean_capacity_scaling</span>
<span class="kn">from</span> <span class="nn">powersimdata.scenario.scenario</span> <span class="kn">import</span> <span class="n">Scenario</span>

<span class="n">ref_scenario</span> <span class="o">=</span> <span class="n">Scenario</span><span class="p">(</span><span class="mi">403</span><span class="p">)</span>
<span class="c1"># Start building a new scenario, to plan capacity for greater demand</span>
<span class="n">new_scenario</span> <span class="o">=</span> <span class="n">Scenario</span><span class="p">()</span>
<span class="n">new_scenario</span><span class="o">.</span><span class="n">set_grid</span><span class="p">(</span><span class="s2">&quot;Eastern&quot;</span><span class="p">)</span>
<span class="n">zone_demand_scaling</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Massachusetts&quot;</span><span class="p">:</span> <span class="mf">1.1</span><span class="p">,</span> <span class="s2">&quot;New York City&quot;</span><span class="p">:</span> <span class="mf">1.2</span><span class="p">}</span>
<span class="n">new_scenario</span><span class="o">.</span><span class="n">change_table</span><span class="o">.</span><span class="n">scale_demand</span><span class="p">(</span><span class="n">zone_name</span><span class="o">=</span><span class="n">zone_demand_scaling</span><span class="p">)</span>
<span class="c1"># Define additional expected curtailment</span>
<span class="n">addl_curtailment</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;solar&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span> <span class="s2">&quot;wind&quot;</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">}</span>

<span class="n">targets_and_new_capacities_df</span> <span class="o">=</span> <span class="n">calculate_clean_capacity_scaling</span><span class="p">(</span>
  <span class="n">ref_scenario</span><span class="p">,</span>
  <span class="n">method</span><span class="o">=</span><span class="s2">&quot;collaborative&quot;</span><span class="p">,</span>
  <span class="n">targets_filename</span><span class="o">=</span><span class="s2">&quot;eastern_2030_clean_energy_targets.csv&quot;</span><span class="p">,</span>
  <span class="n">addl_curtailment</span><span class="o">=</span><span class="n">addl_curtailment</span><span class="p">,</span>
  <span class="n">next_scenario</span><span class="o">=</span><span class="n">new_scenario</span><span class="p">,</span>
  <span class="n">solar_fraction</span><span class="o">=</span><span class="mf">0.55</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="creating-a-change-table-from-capacity-planning-results">
<h3><span class="section-number">5.3.4. </span>Creating a Change Table from Capacity Planning Results<a class="headerlink" href="#creating-a-change-table-from-capacity-planning-results" title="Permalink to this heading">¶</a></h3>
<p>The capacity planning framework returns a data frame of capacities by resource type and
target area, but the scenario creation process ultimately requires scaling factors by
resource type and zone or plant id. A function <code class="docutils literal notranslate"><span class="pre">create_change_table</span></code> exists to perform
this conversion process. Using a reference scenario, a set of scaling factors by
resource type, zone, and plant id is calculated. When applied to a base <code class="docutils literal notranslate"><span class="pre">Grid</span></code> object,
these scaling factors will result in capacities that are nearly identical to the
reference scenario on a per-plant basis (subject to rounding), with the exception of
solar and wind generators, which will be scaled up to meet clean energy goals.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata.design.generation.clean_capacity_scaling</span> <span class="kn">import</span> <span class="n">create_change_table</span>

<span class="n">change_table</span> <span class="o">=</span> <span class="n">create_change_table</span><span class="p">(</span><span class="n">targets_and_new_capacities_df</span><span class="p">,</span> <span class="n">ref_scenario</span><span class="p">)</span>
<span class="c1"># The change table method only accepts zone names, not zone IDs, so we have to translate</span>
<span class="n">id2zone</span> <span class="o">=</span> <span class="n">new_scenario</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get_grid</span><span class="p">()</span><span class="o">.</span><span class="n">id2zone</span>
<span class="c1"># Plants can only be scaled one resource at a time, so we need to loop through</span>
<span class="k">for</span> <span class="n">resource</span> <span class="ow">in</span> <span class="n">change_table</span><span class="p">:</span>
    <span class="n">new_scenario</span><span class="o">.</span><span class="n">change_table</span><span class="o">.</span><span class="n">scale_plant_capacity</span><span class="p">(</span>
            <span class="n">resource</span><span class="o">=</span><span class="n">resource</span><span class="p">,</span>
            <span class="n">zone_name</span><span class="o">=</span><span class="p">{</span>
                    <span class="n">id2zone</span><span class="p">[</span><span class="nb">id</span><span class="p">]:</span> <span class="n">value</span>
                    <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">change_table</span><span class="p">[</span><span class="n">resource</span><span class="p">][</span><span class="s2">&quot;zone_name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">},</span>
            <span class="n">plant_id</span><span class="o">=</span><span class="n">change_table</span><span class="p">[</span><span class="n">resource</span><span class="p">][</span><span class="s2">&quot;zone_name&quot;</span><span class="p">]</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="analyzing-scenario-designs">
<h2><span class="section-number">5.4. </span>Analyzing Scenario Designs<a class="headerlink" href="#analyzing-scenario-designs" title="Permalink to this heading">¶</a></h2>
<section id="analysis-of-transmission-upgrades">
<h3><span class="section-number">5.4.1. </span>Analysis of Transmission Upgrades<a class="headerlink" href="#analysis-of-transmission-upgrades" title="Permalink to this heading">¶</a></h3>
<section id="cumulative-upgrade-quantity">
<h4><span class="section-number">5.4.1.1. </span>Cumulative Upgrade Quantity<a class="headerlink" href="#cumulative-upgrade-quantity" title="Permalink to this heading">¶</a></h4>
<p>Using the change table of a scenario, the number of upgrades lines/transformers and
their cumulative upgraded capacity (for transformers) and cumulative upgraded
megawatt-miles (for lines) can be calculated with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">powersimdata</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">transmission</span><span class="o">.</span><span class="n">mwmiles</span><span class="o">.</span><span class="n">calculate_mw_miles</span><span class="p">(</span><span class="n">scenario</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">scenario</span></code> is a <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> instance.</p>
</section>
<section id="classify-upgrades">
<h4><span class="section-number">5.4.1.2. </span>Classify Upgrades<a class="headerlink" href="#classify-upgrades" title="Permalink to this heading">¶</a></h4>
<p>The upgraded branches can also be classified into either interstate or intrastate
branches by calling:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">powersimdata</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">transmission</span><span class="o">.</span><span class="n">statelines</span><span class="o">.</span><span class="n">classify_interstate_intrastate</span><span class="p">(</span><span class="n">scenario</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">scenario</span></code> is a <code class="docutils literal notranslate"><span class="pre">Scenario</span></code> instance.</p>
</section>
</section>
<section id="analysis-of-generation-upgrades">
<h3><span class="section-number">5.4.2. </span>Analysis of Generation Upgrades<a class="headerlink" href="#analysis-of-generation-upgrades" title="Permalink to this heading">¶</a></h3>
<section id="accessing-and-saving-relevant-supply-information">
<h4><span class="section-number">5.4.2.1. </span>Accessing and Saving Relevant Supply Information<a class="headerlink" href="#accessing-and-saving-relevant-supply-information" title="Permalink to this heading">¶</a></h4>
<p>Analyzing generator supply and cost curves requires the proper generator cost and plant
information to be accessed from a <code class="docutils literal notranslate"><span class="pre">Grid</span></code> object. This data can be accessed using the
following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">from</span> <span class="nn">powersimdata.design.generation.cost_curves</span> <span class="kn">import</span> <span class="n">get_supply_data</span>

<span class="n">supply_df</span> <span class="o">=</span> <span class="n">get_supply_data</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">num_segments</span><span class="p">,</span> <span class="n">save</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">grid</span></code> is a <code class="docutils literal notranslate"><span class="pre">Grid</span></code> object, <code class="docutils literal notranslate"><span class="pre">num_segments</span></code> is the number of linearized cost
curve segments into which the provided quadratic cost curve should be split, and
<code class="docutils literal notranslate"><span class="pre">save</span></code> is a string representing the desired file path and file name to which the
resulting data will be saved. <code class="docutils literal notranslate"><span class="pre">save</span></code> defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>. <code class="docutils literal notranslate"><span class="pre">get_supply_data()</span></code>
returns a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> that contains information about each generator’s fuel
type, quadratic cost curve, and linearized cost curve, as well as the interconnect and
load zone to which the generator belongs. <code class="docutils literal notranslate"><span class="pre">get_supply_data()</span></code> is used within many of
the following supply and cost curve visualization and analysis functions.</p>
</section>
<section id="visualizing-generator-supply-curves">
<h4><span class="section-number">5.4.2.2. </span>Visualizing Generator Supply Curves<a class="headerlink" href="#visualizing-generator-supply-curves" title="Permalink to this heading">¶</a></h4>
<p>To obtain the supply curve for a particular fuel type and area, the following is used:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata.design.generation.cost_curves</span> <span class="kn">import</span> <span class="n">build_supply_curve</span>

<span class="n">P</span><span class="p">,</span> <span class="n">F</span> <span class="o">=</span> <span class="n">build_supply_curve</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">num_segments</span><span class="p">,</span> <span class="n">area</span><span class="p">,</span> <span class="n">gen_type</span><span class="p">,</span> <span class="n">area_type</span><span class="p">,</span> <span class="n">plot</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">grid</span></code> is a <code class="docutils literal notranslate"><span class="pre">Grid</span></code> object; <code class="docutils literal notranslate"><span class="pre">num_segments</span></code> is the number of linearized cost
curve segments to create; <code class="docutils literal notranslate"><span class="pre">area</span></code> is a string describing an appropriate load zone,
interconnect, or state; <code class="docutils literal notranslate"><span class="pre">gen_type</span></code> is a string describing an appropriate fuel type;
<code class="docutils literal notranslate"><span class="pre">area_type</span></code> is a string describing the type of region that is being considered; and
<code class="docutils literal notranslate"><span class="pre">plot</span></code> is a boolean that indicates whether or not the plot is shown. <code class="docutils literal notranslate"><span class="pre">area_type</span></code>
defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>, which allows the area type to be inferred; there are instances
where specifying the area type can be useful (e.g., Texas can refer to both a state and
an interconnect, though they are not the same thing). <code class="docutils literal notranslate"><span class="pre">plot</span></code> defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
<code class="docutils literal notranslate"><span class="pre">build_supply_curve()</span></code> returns <code class="docutils literal notranslate"><span class="pre">P</span></code> and <code class="docutils literal notranslate"><span class="pre">F</span></code>, the supply curve capacity and price
quantities, respectively.</p>
</section>
<section id="comparing-supply-curves">
<h4><span class="section-number">5.4.2.3. </span>Comparing Supply Curves<a class="headerlink" href="#comparing-supply-curves" title="Permalink to this heading">¶</a></h4>
<p>When updating generator cost curve information, it can be useful to see the
corresponding effect on the supply curve for a particular area and fuel type pair.
Instead of only performing a visual inspection between the original and new supply
curves, the maximum price difference between the two supply curves can be calculated.
This metric, which is similar to the Kolmogorov-Smirnov test, serves as a
goodness-of-fit test between the two supply curves, where a lower score is desired. This
metric can be calculated as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata.design.generation.cost_curves</span> <span class="kn">import</span> <span class="n">ks_test</span>

<span class="n">max_diff</span> <span class="o">=</span> <span class="n">ks_test</span><span class="p">(</span><span class="n">P1</span><span class="p">,</span> <span class="n">F1</span><span class="p">,</span> <span class="n">P2</span><span class="p">,</span> <span class="n">F2</span><span class="p">,</span> <span class="n">area</span><span class="p">,</span> <span class="n">gen_type</span><span class="p">,</span> <span class="n">plot</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">P1</span></code> and <code class="docutils literal notranslate"><span class="pre">P2</span></code> are lists containing supply curve capacity data; <code class="docutils literal notranslate"><span class="pre">F1</span></code> and
<code class="docutils literal notranslate"><span class="pre">F2</span></code> are lists containing corresponding supply curve price data; <code class="docutils literal notranslate"><span class="pre">area</span></code> is a string
describing an appropriate load zone, interconnect, or state; <code class="docutils literal notranslate"><span class="pre">gen_type</span></code> is a string
describing an appropriate fuel type; and <code class="docutils literal notranslate"><span class="pre">plot</span></code> is a boolean that indicates whether or
not the plot is shown. The pairs of supply curve data, (<code class="docutils literal notranslate"><span class="pre">P1</span></code>, <code class="docutils literal notranslate"><span class="pre">F1</span></code>) and (<code class="docutils literal notranslate"><span class="pre">P2</span></code>,
<code class="docutils literal notranslate"><span class="pre">F2</span></code>), can be created using <code class="docutils literal notranslate"><span class="pre">build_supply_curve()</span></code> or can be created manually.  It
should be noted that the two supply curves must offer the same amount of capacity (i.e.,
<code class="docutils literal notranslate"><span class="pre">max(P1)</span> <span class="pre">=</span> <span class="pre">max(P2)</span></code>). <code class="docutils literal notranslate"><span class="pre">area</span></code> and <code class="docutils literal notranslate"><span class="pre">gen_type</span></code> both default to <code class="docutils literal notranslate"><span class="pre">None</span></code>. <code class="docutils literal notranslate"><span class="pre">plot</span></code>
defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>. <code class="docutils literal notranslate"><span class="pre">ks_test()</span></code> returns <code class="docutils literal notranslate"><span class="pre">max_diff</span></code>, which is the maximum price
difference between the two supply curves.</p>
</section>
<section id="comparing-cost-curve-parameters">
<h4><span class="section-number">5.4.2.4. </span>Comparing Cost Curve Parameters<a class="headerlink" href="#comparing-cost-curve-parameters" title="Permalink to this heading">¶</a></h4>
<p>When designing generator cost curves, it can be instructive to visually compare the
quadratic cost curve parameters for generators in a particular area and fuel type pair.
The linear terms (<code class="docutils literal notranslate"><span class="pre">c1</span></code>) and quadratic terms (<code class="docutils literal notranslate"><span class="pre">c2</span></code>) for a given area and fuel type
can be compared in a plot using the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata.design.generation.cost_curves</span> <span class="kn">import</span> <span class="n">plot_linear_vs_quadratic_terms</span>

<span class="n">plot_linear_vs_quadratic_terms</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">area</span><span class="p">,</span> <span class="n">gen_type</span><span class="p">,</span> <span class="n">area_type</span><span class="p">,</span> <span class="n">plot</span><span class="p">,</span> <span class="n">zoom</span><span class="p">,</span> <span class="n">num_sd</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">grid</span></code> is a <code class="docutils literal notranslate"><span class="pre">Grid</span></code> object; <code class="docutils literal notranslate"><span class="pre">area</span></code> is a string describing an appropriate load
zone, interconnect, or state; <code class="docutils literal notranslate"><span class="pre">gen_type</span></code> is a string describing an appropriate fuel
type; <code class="docutils literal notranslate"><span class="pre">area_type</span></code> is a string describing the type of region that is being considered;
<code class="docutils literal notranslate"><span class="pre">plot</span></code> is a boolean that indicates whether or not the plot is shown; <code class="docutils literal notranslate"><span class="pre">zoom</span></code> is a
boolean that indicates whether or not the zoom capability that filters out quadratic
term outliers for better visualization is enabled; <code class="docutils literal notranslate"><span class="pre">num_sd</span></code> is the number of standard
deviations outside of which quadratic terms are filtered; and <code class="docutils literal notranslate"><span class="pre">alpha</span></code> is the alpha
blending parameter for the scatter plot. <code class="docutils literal notranslate"><span class="pre">area_type</span></code> defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>, which
allows the area type to be inferred. <code class="docutils literal notranslate"><span class="pre">plot</span></code> defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>. <code class="docutils literal notranslate"><span class="pre">zoom</span></code> defaults to
<code class="docutils literal notranslate"><span class="pre">False</span></code>. <code class="docutils literal notranslate"><span class="pre">num_sd</span></code> defaults to 3. <code class="docutils literal notranslate"><span class="pre">alpha</span></code>, which can take values between 0 and
1, defaults to 0.1.</p>
</section>
<section id="comparing-generators-by-capacity-and-price">
<h4><span class="section-number">5.4.2.5. </span>Comparing Generators by Capacity and Price<a class="headerlink" href="#comparing-generators-by-capacity-and-price" title="Permalink to this heading">¶</a></h4>
<p>When designing generator cost curves, it can be useful to visually compare the capacity
and price parameters for each generator in a specified area and fuel type pair. The
generator capacity and price parameters for a given area and fuel type can be compared
in a plot using the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">powersimdata.design.generation.cost_curves</span> <span class="kn">import</span> <span class="n">plot_capacity_vs_price</span>

<span class="n">plot_capacity_vs_price</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">num_segments</span><span class="p">,</span> <span class="n">area</span><span class="p">,</span> <span class="n">gen_type</span><span class="p">,</span> <span class="n">area_type</span><span class="p">,</span> <span class="n">plot</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">grid</span></code> is a <code class="docutils literal notranslate"><span class="pre">Grid</span></code> object; <code class="docutils literal notranslate"><span class="pre">num_segments</span></code> is the number of linearized cost
curve segments to create; <code class="docutils literal notranslate"><span class="pre">area</span></code> is a string describing an appropriate load zone,
interconnect, or state; <code class="docutils literal notranslate"><span class="pre">gen_type</span></code> is a string describing an appropriate fuel type;
<code class="docutils literal notranslate"><span class="pre">area_type</span></code> is a string describing the type of region that is being considered; and
<code class="docutils literal notranslate"><span class="pre">plot</span></code> is a boolean that indicates whether or not the plot is shown. <code class="docutils literal notranslate"><span class="pre">area_type</span></code>
defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>, which allows the area type to be inferred. <code class="docutils literal notranslate"><span class="pre">plot</span></code> defaults to
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</section>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/img/BE_Sciences_RGB_Horizontal_Color.svg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Modeling a clean energy future for the United States</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Breakthrough-Energy&repo=docs&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user/installation_guide.html">1. Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../communication/code_of_conduct.html">2. Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/contribution_guide.html">3. Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/git_guide.html">4. Working with Git/GitHub</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">5. PowerSimData</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#grid-object">5.1. Grid Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scenario-framework">5.2. Scenario Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-scenario">5.2.1. Creating a Scenario</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-scenario-and-extracting-output-data">5.2.2. Running the Scenario and Extracting Output Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieving-scenario-output-data">5.2.3. Retrieving Scenario Output Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deleting-a-scenario">5.2.4. Deleting a Scenario</a></li>
<li class="toctree-l3"><a class="reference internal" href="#moving-a-scenario-to-backup-disk">5.2.5. Moving a Scenario to Backup disk</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#capacity-planning-framework">5.3. Capacity Planning Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#required-inputs">5.3.1. Required Inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optional-inputs">5.3.2. Optional Inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-capacity-planning-function-calls">5.3.3. Example Capacity Planning Function Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-change-table-from-capacity-planning-results">5.3.4. Creating a Change Table from Capacity Planning Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#analyzing-scenario-designs">5.4. Analyzing Scenario Designs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#analysis-of-transmission-upgrades">5.4.1. Analysis of Transmission Upgrades</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analysis-of-generation-upgrades">5.4.2. Analysis of Generation Upgrades</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../prereise/index.html">6. PreREISE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postreise/index.html">7. PostREISE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reisejl/index.html">8. REISE.jl</a></li>
</ul>

<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../user/git_guide.html" title="previous chapter"><span class="section-number">4. </span>Working with Git/GitHub</a></li>
      <li>Next: <a href="../prereise/index.html" title="next chapter"><span class="section-number">6. </span>PreREISE</a></li>
  </ul></li>
</ul><h3>Useful Links</h3>
<ul>
  <li><a href="https://www.breakthroughenergy.org/">Breakthrough Energy</a></li>
  <li><a href="https://science.breakthroughenergy.org/">Breakthrough Energy Sciences</a></li>
  <li><a href="https://arxiv.org/abs/2002.06155">publication</a></li>
  <li><a href="https://zenodo.org/record/3530898">data @ zenodo</a></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><ul>
<h3>Code</h3>
<a href="../py-modindex.html">Module Index</a>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Breakthrough Energy Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/powersimdata/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>