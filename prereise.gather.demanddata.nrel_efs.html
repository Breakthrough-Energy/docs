
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>prereise.gather.demanddata.nrel_efs package &#8212; documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.svg"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="prereise-gather-demanddata-nrel-efs-package">
<h1>prereise.gather.demanddata.nrel_efs package<a class="headerlink" href="#prereise-gather-demanddata-nrel-efs-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="prereise.gather.demanddata.nrel_efs.tests.html">prereise.gather.demanddata.nrel_efs.tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="prereise.gather.demanddata.nrel_efs.tests.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="prereise.gather.demanddata.nrel_efs.tests.html#module-prereise.gather.demanddata.nrel_efs.tests.test_aggregate_demand">prereise.gather.demanddata.nrel_efs.tests.test_aggregate_demand module</a></li>
<li class="toctree-l2"><a class="reference internal" href="prereise.gather.demanddata.nrel_efs.tests.html#module-prereise.gather.demanddata.nrel_efs.tests.test_get_efs_data">prereise.gather.demanddata.nrel_efs.tests.test_get_efs_data module</a></li>
<li class="toctree-l2"><a class="reference internal" href="prereise.gather.demanddata.nrel_efs.tests.html#module-prereise.gather.demanddata.nrel_efs.tests.test_map_states">prereise.gather.demanddata.nrel_efs.tests.test_map_states module</a></li>
<li class="toctree-l2"><a class="reference internal" href="prereise.gather.demanddata.nrel_efs.tests.html#module-prereise.gather.demanddata.nrel_efs.tests">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-prereise.gather.demanddata.nrel_efs.aggregate_demand">
<span id="prereise-gather-demanddata-nrel-efs-aggregate-demand-module"></span><h2>prereise.gather.demanddata.nrel_efs.aggregate_demand module<a class="headerlink" href="#module-prereise.gather.demanddata.nrel_efs.aggregate_demand" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="prereise.gather.demanddata.nrel_efs.aggregate_demand.access_non_efs_demand">
<code class="sig-prename descclassname">prereise.gather.demanddata.nrel_efs.aggregate_demand.</code><code class="sig-name descname">access_non_efs_demand</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dem_paths</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prereise/gather/demanddata/nrel_efs/aggregate_demand.html#access_non_efs_demand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prereise.gather.demanddata.nrel_efs.aggregate_demand.access_non_efs_demand" title="Permalink to this definition">¶</a></dt>
<dd><p>Access any of the sectoral demand that the user intends to use that is external
to NREL’s EFS studies. This function also ensures that each data set is formatted
appropriately, so as to allow easy aggregation with the NREL EFS sectoral demand.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dem_paths</strong> (<em>set/list</em>) – The paths that point to the .csv files of sectoral demand
data that is not associated with NREL’s EFS. Ordering within the set/list does
not need to match that in local_sects.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(<em>list</em>) – A list of pandas.DataFrame objects that contain sectoral demand
data for each state and time step. This sectoral demand is not a part of NREL’s
EFS.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>TypeError</strong> – if dem_paths are not input as a set or list or if the components
of dem_paths are not input as str.</p></li>
<li><p><strong>ValueError</strong> – if the data located in each path in dem_path does not have the
proper time stamps or the correct number of states.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="prereise.gather.demanddata.nrel_efs.aggregate_demand.combine_efs_demand">
<code class="sig-prename descclassname">prereise.gather.demanddata.nrel_efs.aggregate_demand.</code><code class="sig-name descname">combine_efs_demand</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">efs_dem</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">non_efs_dem</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">save</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prereise/gather/demanddata/nrel_efs/aggregate_demand.html#combine_efs_demand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prereise.gather.demanddata.nrel_efs.aggregate_demand.combine_efs_demand" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate the sectoral demand data so that a single demand point is observed for
each state and time stamp. This function can either access local copies of the
sectoral demand data or can access the demand data from online.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>efs_dem</strong> (<em>dict</em>) – A dict of pandas.DataFrame objects that contain sectoral demand
data for each state and time step. This input is intended to be the output of
<code class="xref py py-func docutils literal notranslate"><span class="pre">partition_by_sector()</span></code>, which is associated with NREL’s EFS. Defaults to
None.</p></li>
<li><p><strong>non_efs_dem</strong> (<em>list</em>) – A list of pandas.DataFrame objects that contain sectoral
demand data for each state and time step. This input is intended to be the
output of <a class="reference internal" href="#prereise.gather.demanddata.nrel_efs.aggregate_demand.access_non_efs_demand" title="prereise.gather.demanddata.nrel_efs.aggregate_demand.access_non_efs_demand"><code class="xref py py-func docutils literal notranslate"><span class="pre">access_non_efs_demand()</span></code></a>, which is not associated with NREL’s
EFS. Defaults to None.</p></li>
<li><p><strong>save</strong> (<em>str</em>) – Saves a .csv if a str representing a valid file path and file
name is provided. Defaults to None, indicating that a .csv file should not be
saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(<em>pandas.DataFrame</em>) – Aggregate demand data for all sectors (both EFS and
non-EFS).</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>TypeError</strong> – if efs_dem is not input as a dict, if non_efs_dem is not input as
a list, if the components of efs_dem and non_efs_dem are not pandas.DataFrames,
or if save is not input as a str.</p></li>
<li><p><strong>ValueError</strong> – if both efs_dem and non_efs_dem are entered as None or if the
components of efs_dem and non_efs_dem do not have the proper time stamps or the
correct number of states.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-prereise.gather.demanddata.nrel_efs.get_efs_data">
<span id="prereise-gather-demanddata-nrel-efs-get-efs-data-module"></span><h2>prereise.gather.demanddata.nrel_efs.get_efs_data module<a class="headerlink" href="#module-prereise.gather.demanddata.nrel_efs.get_efs_data" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="prereise.gather.demanddata.nrel_efs.get_efs_data.account_for_leap_year">
<code class="sig-prename descclassname">prereise.gather.demanddata.nrel_efs.get_efs_data.</code><code class="sig-name descname">account_for_leap_year</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prereise/gather/demanddata/nrel_efs/get_efs_data.html#account_for_leap_year"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prereise.gather.demanddata.nrel_efs.get_efs_data.account_for_leap_year" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an additional day’s worth of demand data to account for the additional
day that occurs during leap years. This function takes an 8760-hour DataFrame as
input and returns an 8784-hour DataFrame. To prevent the weekly structure of the
input DataFrame from being disrupted, the additional 24 hours of demand are merely
added to the end of the input 8760-hour DataFrame for each state. The additional 24
hours of demand are set equal to the demand profile for January 2nd because January
2nd and December 31st occur on the same day of the week during a leap year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>) – DataFrame of sectoral demand data. Rows are each hour
of the 8760 hours and Columns are the abbreviations of each state of the
contiguous U.S.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(<em>pandas.DataFrame</em>) – Sectoral demand data with 8784 hours and of a
similar form to the input DataFrame.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if the dimensions of the input DataFrame do not reflect 8760
hours or 48 states.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="prereise.gather.demanddata.nrel_efs.get_efs_data.download_data">
<code class="sig-prename descclassname">prereise.gather.demanddata.nrel_efs.get_efs_data.</code><code class="sig-name descname">download_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">es</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ta</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fpath</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prereise/gather/demanddata/nrel_efs/get_efs_data.html#download_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prereise.gather.demanddata.nrel_efs.get_efs_data.download_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads the NREL EFS data for the specified electrification scenarios and
technology advancements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>es</strong> (<em>set/list</em>) – The electrification scenarios that will be downloaded. Can
choose any of: <em>‘Reference’</em>, <em>‘Medium’</em>, <em>‘High’</em>, or <em>‘All’</em>. Defaults to
None.</p></li>
<li><p><strong>ta</strong> (<em>set/list</em>) – The technology advancements that will be downloaded. Can
choose any of: <em>‘Slow’</em>, <em>‘Moderate’</em>, <em>‘Rapid’</em>, or <em>‘All’</em>. Defaults to
None.</p></li>
<li><p><strong>fpath</strong> (<em>str</em>) – The file path to which the NREL EFS data will be downloaded.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – if es and ta are not input as a set or list, if fpath is not
input as a str, or if the components of es and ta are not input as str.</p></li>
<li><p><strong>ValueError</strong> – if the components of es and ta are not valid.</p></li>
<li><p><strong>NotImplementedError</strong> – if the method for uncompressing a file that has been
compressed a certain way is not implemented.</p></li>
<li><p><strong>OSError</strong> – if the specified 7zip directory cannot be found (on Windows
machines) or if compression outside of Python’s zipfile module is attempted on
non-Windows machines.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="prereise.gather.demanddata.nrel_efs.get_efs_data.partition_by_sector">
<code class="sig-prename descclassname">prereise.gather.demanddata.nrel_efs.get_efs_data.</code><code class="sig-name descname">partition_by_sector</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">es</span></em>, <em class="sig-param"><span class="n">ta</span></em>, <em class="sig-param"><span class="n">year</span></em>, <em class="sig-param"><span class="n">sect</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fpath</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">save</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prereise/gather/demanddata/nrel_efs/get_efs_data.html#partition_by_sector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prereise.gather.demanddata.nrel_efs.get_efs_data.partition_by_sector" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates .csv files for each of the specified sectors given a specified
electrification scenario and technology advancement.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>es</strong> (<em>str</em>) – An electrification scenario. Can choose one of: <em>‘Reference’</em>,
<em>‘Medium’</em>, or <em>‘High’</em>.</p></li>
<li><p><strong>ta</strong> (<em>str</em>) – A technology advancement. Can choose one of: <em>‘Slow’</em>, <em>‘Moderate’</em>,
or <em>‘Rapid’</em>.</p></li>
<li><p><strong>year</strong> (<em>int</em>) – The selected year’s worth of demand data. Can choose one of: 2018,
2020, 2024, 2030, 2040, or 2050.</p></li>
<li><p><strong>sect</strong> (<em>set/list</em>) – The sectors for which .csv files are to be created. Can
choose any of: <em>‘Transportation’</em>, <em>‘Residential’</em>, <em>‘Commercial’</em>,
<em>‘Industrial’</em>, or <em>‘All’</em>. Defaults to None.</p></li>
<li><p><strong>fpath</strong> (<em>str</em>) – The file path where the demand data might be saved and to where
the sectoral data will be saved.</p></li>
<li><p><strong>save</strong> (<em>bool</em>) – Determines whether or not the .csv file is saved. Defaults to
False. If the file is saved, it is saved to the same location as fpath.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(<em>dict</em>) – A dict of pandas.DataFrame objects that contain demand data
for each state and time step in the specified sectors.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>TypeError</strong> – if es and ta are not input as str, if year is not input as an
int, if sect is not input as a set or list, if fpath is not input as a str, or
if the components of sect are not input as str.</p></li>
<li><p><strong>ValueError</strong> – if es, ta, year, or the components of sect are not valid.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-prereise.gather.demanddata.nrel_efs.map_states">
<span id="prereise-gather-demanddata-nrel-efs-map-states-module"></span><h2>prereise.gather.demanddata.nrel_efs.map_states module<a class="headerlink" href="#module-prereise.gather.demanddata.nrel_efs.map_states" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="prereise.gather.demanddata.nrel_efs.map_states.decompose_demand_profile_by_state_to_loadzone">
<code class="sig-prename descclassname">prereise.gather.demanddata.nrel_efs.map_states.</code><code class="sig-name descname">decompose_demand_profile_by_state_to_loadzone</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">agg_dem</span></em>, <em class="sig-param"><span class="n">save</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prereise/gather/demanddata/nrel_efs/map_states.html#decompose_demand_profile_by_state_to_loadzone"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prereise.gather.demanddata.nrel_efs.map_states.decompose_demand_profile_by_state_to_loadzone" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms the aggregated sectoral demand data so that it is separated by load
zone rather than by state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agg_dem</strong> (<em>pandas.DataFrame</em>) – DataFrame of the aggregated sectoral demand data,
where the rows are time steps (in local time) and the columns are the states.
This input is intended to be the output of <code class="xref py py-func docutils literal notranslate"><span class="pre">combine_efs_demand()</span></code>.</p></li>
<li><p><strong>save</strong> (<em>str</em>) – Saves a .csv if a str representing a valid file path and file
name is provided. Defaults to None, indicating that a .csv file should not be
saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(<em>pandas.DataFrame</em>) – Aggregate sectoral demand, split by load zone ID.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>TypeError</strong> – if agg_dem is not a pandas.DataFrame or if save is not input as
a str.</p></li>
<li><p><strong>ValueError</strong> – if agg_dem does not have the proper time stamps or the correct
number of states.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="prereise.gather.demanddata.nrel_efs.map_states.shift_local_time_by_loadzone_to_utc">
<code class="sig-prename descclassname">prereise.gather.demanddata.nrel_efs.map_states.</code><code class="sig-name descname">shift_local_time_by_loadzone_to_utc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">agg_dem</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prereise/gather/demanddata/nrel_efs/map_states.html#shift_local_time_by_loadzone_to_utc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prereise.gather.demanddata.nrel_efs.map_states.shift_local_time_by_loadzone_to_utc" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps the local time for each load zone to the corresponding UTC time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agg_dem</strong> (<em>pandas.DataFrame</em>) – DataFrame of the aggregated demand data, where the
rows are time steps (in local time) and the columns are load zone IDs.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(<em>pandas.DataFrame</em>) – Aggregate demand, shifted to account for UTC time.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>TypeError</strong> – if agg_dem is not a pandas.DataFrame.</p></li>
<li><p><strong>ValueError</strong> – if agg_dem does not have the proper time stamps or the correct
number of states.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-prereise.gather.demanddata.nrel_efs">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-prereise.gather.demanddata.nrel_efs" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/img/BE_Sciences_RGB_Horizontal_Color.svg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Modeling a clean energy future for the United States</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Breakthrough-Energy&repo=docs&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user/installation_guide.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_of_conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/contribution_guide.html">Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/git_guide.html">Working with Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="powersimdata_package.html">PowerSimData</a></li>
<li class="toctree-l1"><a class="reference internal" href="prereise_package.html">PreREISE</a></li>
<li class="toctree-l1"><a class="reference internal" href="postreise_package.html">PostREISE</a></li>
</ul>

<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul><h3>Useful Links</h3>
<ul>
  <li><a href="https://www.breakthroughenergy.org/">Breakthrough Energy</a></li>
  <li><a href="https://science.breakthroughenergy.org/">Breakthrough Energy Sciences</a></li>
  <li><a href="https://arxiv.org/abs/2002.06155">publication</a></li>
  <li><a href="https://zenodo.org/record/3530898">data @ zenodo</a></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script><ul>
<h3>Code</h3>
<a href="py-modindex.html">Module Index</a>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Breakthrough Energy Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.4.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/prereise.gather.demanddata.nrel_efs.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>