
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>6. PreREISE &#8212; documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="icon" href="../_static/favicon.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="7. PostREISE" href="../postreise/index.html" />
    <link rel="prev" title="5. PowerSimData" href="../powersimdata/index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="prereise">
<h1><span class="section-number">6. </span>PreREISE<a class="headerlink" href="#prereise" title="Permalink to this heading">¶</a></h1>
<p>This page is dedicated to the collection, processing and formatting of data that are
fed to the simulation engine. PreREISE is an open source package written in Python that
is available on <a class="reference external" href="https://github.com/Breakthrough-Energy/PreREISE">GitHub</a>.</p>
<p>The generation of input data rely on the grid model. For this reason, you must have
<a class="reference external" href="https://github.com/Breakthrough-Energy/PowerSimData">PowerSimData</a> cloned in a
folder adjacent to your clone of PreREISE.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Input data are publicly available for the Breakthrough Energy Sciences (BES) grid
model (see <a class="reference external" href="https://arxiv.org/abs/2002.06155">publication</a>). You don’t need to
generate any input data if you use the scenario framework to carry out power flow
study.</p>
</div>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#general-comments" id="id62">General Comments</a></p></li>
<li><p><a class="reference internal" href="#demand" id="id63">Demand</a></p>
<ul>
<li><p><a class="reference internal" href="#historical" id="id64">Historical</a></p>
<ul>
<li><p><a class="reference internal" href="#texas" id="id65">Texas</a></p></li>
<li><p><a class="reference internal" href="#western" id="id66">Western</a></p></li>
<li><p><a class="reference internal" href="#eastern" id="id67">Eastern</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#transportation-electrification" id="id68">Transportation Electrification</a></p>
<ul>
<li><p><a class="reference internal" href="#summary" id="id69">Summary</a></p></li>
<li><p><a class="reference internal" href="#capabilities-and-data" id="id70">Capabilities and Data</a></p></li>
<li><p><a class="reference internal" href="#user-manual" id="id71">User Manual</a></p>
<ul>
<li><p><a class="reference internal" href="#pre-processed-input-data" id="id72">Pre-processed input data</a></p></li>
<li><p><a class="reference internal" href="#calling-the-main-transportation-electrification-method" id="id73">Calling the main Transportation Electrification method</a></p></li>
<li><p><a class="reference internal" href="#spatial-translation-mechanism-between-any-two-different-spatial-resolutions" id="id74">Spatial translation mechanism – between any two different spatial resolutions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#methodology" id="id75">Methodology</a></p>
<ul>
<li><p><a class="reference internal" href="#ev-charging-model-process-and-flowchart" id="id76">EV Charging Model Process and Flowchart</a></p>
<ul>
<li><p><a class="reference internal" href="#immediate-and-smart-charging-example-outputs" id="id77">Immediate and Smart Charging Example Outputs</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#vehicle-travel-patterns" id="id78">Vehicle Travel Patterns</a></p>
<ul>
<li><p><a class="reference internal" href="#light-duty-travel-patterns" id="id79">Light-duty Travel patterns</a></p></li>
<li><p><a class="reference internal" href="#medium-and-heavy-duty-vehicles" id="id80">Medium- and Heavy-duty Vehicles</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#annual-vehicle-miles-traveled" id="id81">Annual Vehicle Miles Traveled</a></p>
<ul>
<li><p><a class="reference internal" href="#electric-vehicle-miles-traveled-projections-by-urban-and-rural-area" id="id82">Electric Vehicle Miles Traveled Projections by Urban and Rural Area</a></p></li>
<li><p><a class="reference internal" href="#monthly-and-daily-weight-factors" id="id83">Monthly and Daily Weight Factors</a></p></li>
<li><p><a class="reference internal" href="#bev-vmt-projections" id="id84">BEV VMT Projections</a></p></li>
<li><p><a class="reference internal" href="#fuel-efficiency-projections" id="id85">Fuel Efficiency Projections</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#smart-charging-optimization-algorithm" id="id86">Smart Charging Optimization Algorithm</a></p></li>
<li><p><a class="reference internal" href="#adoption-rate" id="id87">Adoption Rate</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#data-sources" id="id88">Data Sources</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#nrel-electrification-futures-study-demand-and-flexibility-data" id="id89">NREL Electrification Futures Study Demand and Flexibility Data</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#hydro" id="id90">Hydro</a></p>
<ul>
<li><p><a class="reference internal" href="#id24" id="id91">Texas</a></p></li>
<li><p><a class="reference internal" href="#id25" id="id92">Western</a></p></li>
<li><p><a class="reference internal" href="#id26" id="id93">Eastern</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#renewables" id="id94">Renewables</a></p>
<ul>
<li><p><a class="reference internal" href="#solar" id="id95">Solar</a></p>
<ul>
<li><p><a class="reference internal" href="#the-national-solar-radiation-database" id="id96">The National Solar Radiation Database</a></p></li>
<li><p><a class="reference internal" href="#from-solar-irradiance-to-power-output" id="id97">From Solar Irradiance to Power Output</a></p>
<ul>
<li><p><a class="reference internal" href="#naive" id="id98">Naive</a></p></li>
<li><p><a class="reference internal" href="#system-adviser-model" id="id99">System Adviser Model</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#wind" id="id100">Wind</a></p>
<ul>
<li><p><a class="reference internal" href="#rapid-refresh" id="id101">Rapid Refresh</a></p></li>
<li><p><a class="reference internal" href="#high-resolution-rapid-refresh" id="id102">High-Resolution Rapid Refresh</a></p></li>
<li><p><a class="reference internal" href="#from-wind-speed-to-power-output" id="id103">From Wind Speed to Power Output</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#resources" id="id104">Resources</a></p></li>
<li><p><a class="reference internal" href="#command-line-interface" id="id105">Command Line Interface</a></p></li>
<li><p><a class="reference internal" href="#notebooks" id="id106">Notebooks</a></p></li>
<li><p><a class="reference internal" href="#bibliography" id="id107">Bibliography</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="general-comments">
<h2><a class="toc-backref" href="#id62" role="doc-backlink"><span class="section-number">6.1. </span>General Comments</a><a class="headerlink" href="#general-comments" title="Permalink to this heading">¶</a></h2>
<p>Profiles are CSV (Comma Separated Values) files enclosing a series of data points
indexed in time orders. The simulation engine expects a demand, hydro, solar and wind
profile. All the profiles have UTC timestamp as indices. Columns are the zone IDs and
plant IDs for the demand and hydro/solar/wind profiles, respectively. Values are load in
MWh in each zone for the demand and energy generated by a 1MW generator for hydro,
solar and wind profiles.</p>
<p>The <strong>[type]_v[D]</strong> naming convention is used, where:</p>
<ul class="simple">
<li><p><strong>type</strong> specifies the profile type (demand, hydro, solar or wind) and</p></li>
<li><p><strong>D</strong> refers to the date the file has been created using the 3 letters Month (e.g.,
Jan) and 4 digits Year (e.g., 2021) format.</p></li>
</ul>
<p>If two or more profiles of the same type are created the same month of the same year,
the different versions will be differentiated using a lowercase letter added right
after the year, e.g, <code class="docutils literal notranslate"><span class="pre">demand_vJan2021.csv</span></code> (first), <code class="docutils literal notranslate"><span class="pre">demand_vJan2021b.csv</span></code> (second),
<code class="docutils literal notranslate"><span class="pre">demand_vJan2021c.csv</span></code> (third) and so forth.</p>
</section>
<section id="demand">
<h2><a class="toc-backref" href="#id63" role="doc-backlink"><span class="section-number">6.2. </span>Demand</a><a class="headerlink" href="#demand" title="Permalink to this heading">¶</a></h2>
<section id="historical">
<h3><a class="toc-backref" href="#id64" role="doc-backlink"><span class="section-number">6.2.1. </span>Historical</a><a class="headerlink" href="#historical" title="Permalink to this heading">¶</a></h3>
<section id="texas">
<h4><a class="toc-backref" href="#id65" role="doc-backlink"><span class="section-number">6.2.1.1. </span>Texas</a><a class="headerlink" href="#texas" title="Permalink to this heading">¶</a></h4>
<p>ERCOT publishes historical hourly load data for its eight weather zones. The data
downloaded <a class="reference external" href="http://www.ercot.com/gridinfo/load/load_hist/">here</a> are used as is to
build the profile for the Texas Interconnection.</p>
</section>
<section id="western">
<h4><a class="toc-backref" href="#id66" role="doc-backlink"><span class="section-number">6.2.1.2. </span>Western</a><a class="headerlink" href="#western" title="Permalink to this heading">¶</a></h4>
<p>Balancing authorities (BAs) submit their demand data to EIA and can be downloaded
using an <a class="reference external" href="https://www.eia.gov/opendata/">API</a>. The list of BAs in the Western
Interconnection can be found on the website of the Western Electricity Coordinating
Council (WECC) along with the area they approximately cover (see <a class="reference external" href="https://www.wecc.org/Administrative/Balancing_Authorities_JAN17.pdf">map</a>).</p>
<p>Some data processing/cleaning is then carried out to derive the profile for the Western
Interconnection:</p>
<ul class="simple">
<li><p>adjacent data are used to fill out missing values</p></li>
<li><p>BAs are aggregated into the load zones of the grid model</p></li>
<li><p>outliers are detected and fixed.</p></li>
</ul>
<p>These steps are illustrated in the <a class="reference external" href="https://github.com/Breakthrough-Energy/PreREISE/blob/develop/prereise/gather/demanddata/eia/demo/western_demand_v4_demo/western_demand_v4_demo.ipynb">western demand notebook</a>.</p>
</section>
<section id="eastern">
<h4><a class="toc-backref" href="#id67" role="doc-backlink"><span class="section-number">6.2.1.3. </span>Eastern</a><a class="headerlink" href="#eastern" title="Permalink to this heading">¶</a></h4>
<p>The construction of the Eastern Interconnection demand profile is slightly different
from the Western counterpart. We still download historical demand data from EIA
and perform the 3-step data processing/cleaning as for the Western Interconnection
for all Balancing Authorities (BAs) but MISO (Midcontinent Independent System Operator)
and SPP (Southwest Power Pool).</p>
<p>MISO and SPP operate across multiple U.S. states (e.g. 15 for MISO) and cover several
load zones in our grid model. Instead of considering a single hourly profile shape for
each entity and having load zones sharing the exact same profile in different part of
the country, we further split MISO and SPP into subareas. The hourly subarea demand
profiles for MISO and SPP can be downloaded on their respective website (check <a class="reference external" href="https://marketplace.spp.org/pages/hourly-load">SPP
hourly load</a> and <a class="reference external" href="https://www.misoenergy.org/markets-and-operations/real-time--market-data/market-reports#nt=%2FMarketReportType%3ASummary%2FMarketReportName%3AHistorical%20Daily%20Forecast%20and%20Actual%20Load%20by%20Local%20Resource%20Zone%20(xls)&amp;t=10&amp;p=0&amp;s=MarketReportPublished&amp;sd=desc">MISO hourly load</a>). The geographical definitions of these subareas
are obtained directly from contact at the BAs via either customer service or internal
request management system (see the <a class="reference external" href="https://spprms.issuetrak.com/Login.asp">RMS</a> for SPP). Given the geographical definitions,
i.e., list of counties for each subarea, each bus within MISO and SPP is mapped to the
subarea it belongs to.</p>
<p>The overall procedure is is demonstrated in the <a class="reference external" href="https://github.com/Breakthrough-Energy/PreREISE/blob/develop/prereise/gather/demanddata/eia/demo/eastern_demand_v6_demo/eastern_demand_v6_demo.ipynb">eastern demand notebook</a>.</p>
</section>
</section>
<section id="transportation-electrification">
<h3><a class="toc-backref" href="#id68" role="doc-backlink"><span class="section-number">6.2.2. </span>Transportation Electrification</a><a class="headerlink" href="#transportation-electrification" title="Permalink to this heading">¶</a></h3>
<section id="summary">
<h4><a class="toc-backref" href="#id69" role="doc-backlink"><span class="section-number">6.2.2.1. </span>Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h4>
<p>Decarbonizing the transportation sector is one of the five grand challenges of
decarbonizing the economy. In order to accurately capture the future trend of
transportation electrification and its interactions with the electricity sector and
other sectors such as building and manufacturing, a high resolution and accurate
transportation electrification model integrated into the simulation framework with other
sectors is necessary. A few key questions arise when determining the additional load
from charging electric vehicles on the electric grid – how many electric vehicles of
which types are expected to be on the roads by a given year and what are their typical
trip patterns, which in turn determines when charging is most likely to happen.  As is
frequently discussed, charging could have significant flexibility as to its precise
timing, which ties this project into the Demand Flexibility project. In future, highly
integrated whole-economy energy systems, the optimal operation of the transportation
sector is affected by other sectors, such as the building sector. When electric vehicles
are charged through chargers located in buildings, the distributed energy resources and
space heating/cooling load in buildings could be optimized together with electric
vehicle charging to achieve more emissions reduction and cost savings. This
transportation model is one of the key components of the
multi-sector integrated energy systems model.</p>
<p>The overall objective of the Transportation Electrification Project is to develop a
module that can capture the magnitude and spatiotemporal variation of the additional
electricity demand from electrification of most of the on-road transportation sector,
including electric light-duty vehicles (LDVs), light-duty trucks (LDTs), medium-duty
vehicles (MDVs), and heavy-duty vehicles (HDVs), including fleet vehicles (e.g., buses).
The core activities include (1) development of detailed data sets that represent the
electricity demand patterns due to vehicle mobility, growth in electric vehicle
penetration, and flexibility parameters for electrified LDVs, LDTs, MDVs, and HDVs
consisting of private and publicly-owned fleets; (2) development of code that can
generate electricity demand profiles for each vehicle type under different levels of
charging intelligence; and (3) integration of the modeling capability for determining
electrified vehicle load profiles into the open-access, large-scale grid model developed
by the Breakthrough Energy Grid Modeling team.</p>
</section>
<section id="capabilities-and-data">
<h4><a class="toc-backref" href="#id70" role="doc-backlink"><span class="section-number">6.2.2.2. </span>Capabilities and Data</a><a class="headerlink" href="#capabilities-and-data" title="Permalink to this heading">¶</a></h4>
<p>The transportation electrification module calculates an estimate of the additional
hourly electricity demand from the electrification of transportation vehicles for all
U.S. urban and rural areas for years ranging from 2017-2050.  The hourly estimation
builds upon data collected representing over half a million driving events.</p>
<p>Additional data sets allow for profiles to be generated across the following dimensions:</p>
<ul class="simple">
<li><p>4 vehicle types (LDV, LDT, MDV, and HDV)</p></li>
<li><p>34 simulation years (2017-2050)</p></li>
<li><p>481 Urban Areas (as defined by the U.S. Census Bureau) and 48 Rural Areas (one for
each continental U.S. State).</p></li>
</ul>
<p>The charging of each vehicle is currently simulated via one of two methods: Immediate
Charging and Smart Charging.Immediate Charging simulates charging occurring from the
time the vehicle plugs in until either the battery is full or until the vehicle departs
on the next trip. An example profile is in orange below, added on top of an example
of non-transportation base demand (<a class="reference internal" href="#example-ldv-immediate-load"><span class="std std-numref">Fig. 6.1</span></a>).</p>
<figure class="align-center" id="id41">
<span id="example-ldv-immediate-load"></span><img alt="../_images/ldv_immediate_load.png" src="../_images/ldv_immediate_load.png" />
<figcaption>
<p><span class="caption-number">Fig. 6.1 </span><span class="caption-text">Example of BEV Immediate Charging stacked on top of non-transportation base demand</span><a class="headerlink" href="#id41" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Smart Charging refers to coordinated charging between drivers (either in aggregate or
individually) and utilities or balancing authorities in response to a user-adjustable
objective function. The example profile below (<a class="reference internal" href="#example-ldv-smart-load"><span class="std std-numref">Fig. 6.2</span></a>)
provides the same amount of charging energy to the same set of vehicles in the Immediate
Charging figure above (<a class="reference internal" href="#example-ldv-immediate-load"><span class="std std-numref">Fig. 6.1</span></a>). This instance of Smart
Charging manages the peak demand of the non-transportation base demand plus the
additional transportation electrification load to be substantially lower.</p>
<figure class="align-center" id="id42">
<span id="example-ldv-smart-load"></span><img alt="../_images/ldv_smart_load.png" src="../_images/ldv_smart_load.png" />
<figcaption>
<p><span class="caption-number">Fig. 6.2 </span><span class="caption-text">Example of BEV Smart Charging “filling in the Valleys” of non-transportation base demand</span><a class="headerlink" href="#id42" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="user-manual">
<h4><a class="toc-backref" href="#id71" role="doc-backlink"><span class="section-number">6.2.2.3. </span>User Manual</a><a class="headerlink" href="#user-manual" title="Permalink to this heading">¶</a></h4>
<section id="pre-processed-input-data">
<h5><a class="toc-backref" href="#id72" role="doc-backlink"><span class="section-number">6.2.2.3.1. </span>Pre-processed input data</a><a class="headerlink" href="#pre-processed-input-data" title="Permalink to this heading">¶</a></h5>
<p>The following data is provided for the user or could be overridden via an input from the
user with a different preferred data set.</p>
<ul class="simple">
<li><p>Annual projections of vehicle miles traveled (VMT) are calculated in advance and are
provided for the user for all Urban Areas in the U.S. Each state also has a VMT
projection for the Rural Area in that state. See Section
<a class="reference internal" href="#electric-vehicle-miles-traveled-projections"><span class="std std-numref">Section 6.2.2.4.3.1</span></a> below for calculation process
details using data from the National Renewable Energy Laboratory (NREL)’s
Electrification Futures Study (EFS) and the Department of Transportation’s
Transportation and Health Indicators.</p></li>
<li><p>Projections of the fuel efficiency of battery electric vehicles are provided from
NREL’s EFS, with more detail in Section <a class="reference internal" href="#fuel-efficiency-projections"><span class="std std-numref">Section 6.2.2.4.3.4</span></a> below.</p></li>
<li><p>Each vehicle type (LDV, LDT, MDV, and HDV) has a dataset with vehicle trip patterns
that is used by the algorithm to represent a typical day of driving.  See Sections
<a class="reference internal" href="#ev-charging-model"><span class="std std-numref">Section 6.2.2.4.1</span></a> and <a class="reference internal" href="#vehicle-travel-patterns"><span class="std std-numref">Section 6.2.2.4.2</span></a> for more details on
the input data from the National Household Travel Survey (NHTS) and the Texas
Commercial Vehicle Survey.</p></li>
<li><p>Each typical day of driving is scaled by data from the MOVES model from the U.S.
Environmental Protection Agency (EPA) that captures the variation in typical driving
behavior across (i) urban/rural areas, (ii) weekend/weekday patterns, and (iii)
monthly driving behavior (e.g. more driving in the summer than the winter).</p></li>
</ul>
</section>
<section id="calling-the-main-transportation-electrification-method">
<h5><a class="toc-backref" href="#id73" role="doc-backlink"><span class="section-number">6.2.2.3.2. </span>Calling the main Transportation Electrification method</a><a class="headerlink" href="#calling-the-main-transportation-electrification-method" title="Permalink to this heading">¶</a></h5>
<p>With the above input data, the main function call for the transportation module is
<a class="reference internal" href="../prereise.gather.demanddata.transportation_electrification.html#module-prereise.gather.demanddata.transportation_electrification.generate_BEV_vehicle_profiles" title="prereise.gather.demanddata.transportation_electrification.generate_BEV_vehicle_profiles"><code class="xref py py-mod docutils literal notranslate"><span class="pre">prereise.gather.demanddata.transportation_electrification.generate_BEV_vehicle_profiles</span></code></a>
and is called using a few user-specified inputs:</p>
<ol class="arabic simple">
<li><p>Charging Strategy (e.g. Immediate charging or Smart charging)</p></li>
<li><p>Vehicle type (LDV, LDT, MDV, HDV)</p></li>
<li><p>Vehicle range (whether 100, 200, or 300 miles on a single charge)</p></li>
<li><p>Model Year</p></li>
<li><p>U.S. State and the underlying Urban Area(s) / Rural Area that are being modelled</p></li>
</ol>
<p>Depending on the spatial region included in the broader simulation, the user can run a
script across multiple U.S. States to calculate the projected electricity demand from
electrified transportation for the full spatial region. From there, a spatial
translation mechanism (described next) converts this demand to the accompanying demand
nodes in the base simulation grid.</p>
</section>
<section id="spatial-translation-mechanism-between-any-two-different-spatial-resolutions">
<h5><a class="toc-backref" href="#id74" role="doc-backlink"><span class="section-number">6.2.2.3.3. </span>Spatial translation mechanism – between any two different spatial resolutions</a><a class="headerlink" href="#spatial-translation-mechanism-between-any-two-different-spatial-resolutions" title="Permalink to this heading">¶</a></h5>
<p>We have developed a module called <code class="xref py py-mod docutils literal notranslate"><span class="pre">prereise.utility.translate_zones</span></code>. It takes
in the shape files of the two spatial resolutions that the user would like to transform
from one into the other. Then a transformation matrix that gives the fractions of every
region in one resolution onto each region in the other resolution will be generated
based on the overlay of the two shape files. Finally, the user can simply multiply
profiles in its original resolution, such as Urban Areas (UA) and Rural Areas (RA), by
the transformation matrix to obtain profiles in the resultant resolution, such as load
zones in the base simulation grid. This allows each module to be built in whatever
spatial resolution is best for that module and to then transform each module into a
common spatial resolution that is then used by the multi-sector integrated energy
systems model.</p>
</section>
</section>
<section id="methodology">
<h4><a class="toc-backref" href="#id75" role="doc-backlink"><span class="section-number">6.2.2.4. </span>Methodology</a><a class="headerlink" href="#methodology" title="Permalink to this heading">¶</a></h4>
<section id="ev-charging-model-process-and-flowchart">
<span id="ev-charging-model"></span><h5><a class="toc-backref" href="#id76" role="doc-backlink"><span class="section-number">6.2.2.4.1. </span>EV Charging Model Process and Flowchart</a><a class="headerlink" href="#ev-charging-model-process-and-flowchart" title="Permalink to this heading">¶</a></h5>
<p>This EV charging model simulates the charging behavior of the following on-road vehicle
categories: LDV, LDT, MDV, and HDV. The default LDV and LDT trip data come from the 2017
NHTS, with an example of the data included in <a class="reference internal" href="#example-daily-trips"><span class="std std-numref">Fig. 6.3</span></a>.</p>
<figure class="align-center" id="id43">
<span id="example-daily-trips"></span><img alt="../_images/daily_trips.png" src="../_images/daily_trips.png" />
<figcaption>
<p><span class="caption-number">Fig. 6.3 </span><span class="caption-text">Example daily trips of vehicle data from NHTS</span><a class="headerlink" href="#id43" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>These are also divided into Census Divisions, which are then mapped to the corresponding
regions within the grid model. The MDV and HDV trip data are anonymized from the Texas
Commercial Vehicle Survey and calibrated to align with medium- and heavy-duty vehicle
trip statistics. More details about each data set are included in
<a class="reference internal" href="#vehicle-travel-patterns"><span class="std std-numref">Section 6.2.2.4.2</span></a> and can be updated to reflect different vehicle
scenarios or incorporate more recent data. In all cases, an average weekday and average
weekend daily pattern of vehicle trips is calculated from the vehicle trip data. Then,
these trips are filtered by vehicle type (e.g. LDV, LDT, MDV, and HDV) and by range for
LDVs and LDTs (e.g. less than 100 miles, less than 200 miles, less than 300 miles) to
capture what is capable for typical battery capacities.  This creates a weekday and
weekend daily pattern of BEV-capable trips that will be used in the subsequent steps.
The LDV and LDT vehicle miles traveled (VMT) by hour is presented in
<a class="reference internal" href="#vmt-by-hour"><span class="std std-numref">Fig. 6.4</span></a>.</p>
<figure class="align-center" id="id44">
<span id="vmt-by-hour"></span><img alt="../_images/vmt_by_hour.png" src="../_images/vmt_by_hour.png" />
<figcaption>
<p><span class="caption-number">Fig. 6.4 </span><span class="caption-text">Light-duty vehicle/truck miles traveled by hour of the day for weekends and weekdays</span><a class="headerlink" href="#id44" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Similarly, Figure <a class="reference internal" href="#dwelling-over-24h"><span class="std std-numref">Fig. 6.5</span></a> illustrates the percentage of vehicles
parked and able to charge at each hour over a 24-hour period.</p>
<figure class="align-center" id="id45">
<span id="dwelling-over-24h"></span><img alt="../_images/dwelling_over_24h.png" src="../_images/dwelling_over_24h.png" />
<figcaption>
<p><span class="caption-number">Fig. 6.5 </span><span class="caption-text">Status of dwelling vehicles over 24-hour period</span><a class="headerlink" href="#id45" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>The flowchart in <a class="reference internal" href="#trip-patterns-flowchart"><span class="std std-numref">Fig. 6.6</span></a> illustrates the entire procedure.</p>
<figure class="align-default" id="id46">
<span id="trip-patterns-flowchart"></span><div class="mermaid">
            flowchart TD
   subgraph main[ ]
     subgraph input[ ]
       A(Input: NHTS trip data for LDV/LDT)
       B(Input: Anonymized trip data for MDV/HDV)
     end
     A==&gt;C(Divide into census region)
     C==&gt;D(Create weekday and weekend pattern of typical vehicle trips)
     B==&gt;D
     D==&gt;E(&quot;Filter trips by range [0,100, 0,200, 0,300] miles&quot;)
     E==&gt;F(Create weekday and weekend pattern of BEV-capable trips)
   end

   class input white_no_border
   class main,A,B,C,D,E,F white
   classDef white fill:#ffffff,stroke:#333,stroke-width:3px
   classDef white_no_border fill:#ffffff,stroke:#333,stroke-width:0px
        </div><figcaption>
<p><span class="caption-number">Fig. 6.6 </span><span class="caption-text">Workflow from input trip data to weekday and weekend trip patterns</span><a class="headerlink" href="#id46" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>These daily BEV-capable trip patterns are then further distributed temporally and
spatially, as discussed in more detail in <a class="reference internal" href="#annual-vehicle-miles-traveled"><span class="std std-numref">Section 6.2.2.4.3</span></a>.
State-level and UA VMT per capita were taken from the Department of Transportation’s
transportation health tool and create the distribution across rural and urban areas, as
defined by the U.S. Census Bureau <span id="id1">[<a class="reference internal" href="#id36" title="US Department of Transportation. Transportation and health indicators. https://www7.transportation.gov/transportation-health-tool/indicators. Accessed Jun. 21, 2022.">1</a>]</span>,
<span id="id2">[<a class="reference internal" href="#id37" title="US Census Bureau. 2010 census urban and rural classification and urban area criteria. https://www.census.gov/programs-surveys/geography/guidance/geo-areas/urban-rural/2010-urban-rural.html. Accessed Jun. 21, 2022.">2</a>]</span>. Weight factors from the U.S. EPA model, MOVES,
create the time-of-year scaling of weekday versus weekend and month of the year
<span id="id3">[<a class="reference internal" href="#id40" title="US Environmental Protection Agency. Moves and other mobile source emissions models. https://www.epa.gov/moves. Accessed Jun. 21, 2022.">3</a>]</span>.</p>
<p>Projections from NREL’s EFS provide the adoption rate scaling of BEV demand to create
the base-year and simulation-year profiles of BEV-capable trip patterns
<span id="id4">[<a class="reference internal" href="#id38" title="US Census Bureau. Electric technology adoption and energy consumption | nrel data catalog. https://data.nrel.gov/submissions/92. Accessed Jun. 21, 2022.">4</a>]</span>. Total charging demand by area (urban and
rural) is scaled based on state-level BEV VMT projections from NREL’s EFS.  As more
granular BEV projections become available, scaling projections could be targeted to
specific urban and rural areas given the model’s structure. The procedure is shown in
<a class="reference internal" href="#dynamics-flowchart"><span class="std std-numref">Fig. 6.7</span></a>.</p>
<figure class="align-default" id="id47">
<span id="dynamics-flowchart"></span><div class="mermaid">
            flowchart LR
   subgraph main[ ]
     direction TB
     subgraph start[ ]
       A(Weekday and weekend pattern &lt;br&gt; of BEV-capable trips)
     end
     subgraph input[ ]
       direction LR
       B(Input: census population data &lt;br&gt; for urban area and states)
       C(Input: DoT Transportation and Health Tool's &lt;br&gt; VMT per capita for urban areas and states)
       B------C
     end
     A====input
     D(Convert state-level VMT per capita into one &lt;br&gt; year's total of urban and rural driving for each state)
     input==&gt;D
     subgraph middle[ ]
       direction LR
       E(Annual amount of VMT is distributed &lt;br&gt; across weeks and months based on &lt;br&gt; driving data from EPA's MOVES)
       F(Input: EPA's MOVES for weekday/weekend &lt;br&gt; and monthly VMT distributions)
       F----E
     end
       D==&gt;middle
     subgraph last[ ]
       direction LR
       G(Create a base-year and simulation-year profile &lt;br&gt; of BEV-capable trips by scaling annual VMT &lt;br&gt; to match NREL's EFS projections)
       H(Input: NREL's EFS projections of &lt;br&gt; future BEV adoption rates)
       H----G
     end
     middle==&gt;last
   end

   class main,A,input,B,C,D,middle,E,F,last,G,H white
   class start white_no_border
   classDef white fill:#ffffff,stroke:#333,stroke-width:3px
   classDef white_no_border fill:#ffffff,stroke:#333,stroke-width:0px
        </div><figcaption>
<p><span class="caption-number">Fig. 6.7 </span><span class="caption-text">Workflow from weekday and weekend trip patterns to annual VMT pattern</span><a class="headerlink" href="#id47" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Algorithmically, these projections are modeled by making multiple copies of individual
trips, as illustrated in <a class="reference internal" href="#scaling-process-vehicle-trip"><span class="std std-numref">Fig. 6.8</span></a>, which are used in the
smart charging algorithm.</p>
<figure class="align-center" id="id48">
<span id="scaling-process-vehicle-trip"></span><img alt="../_images/scaling_process_vehicle_trip.png" src="../_images/scaling_process_vehicle_trip.png" />
<figcaption>
<p><span class="caption-number">Fig. 6.8 </span><span class="caption-text">Scaling process of vehicle trip</span><a class="headerlink" href="#id48" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>With the projected BEV vehicle trips in place, NREL’s EFS is again used to set the fuel
efficiency for the simulated year to determine the amount of electricity needed to
charge after each BEV trip.  Then, the charging model uses one of two charging algorithm
strategies: immediate (uncoordinated) charging and smart (optimal) charging, with
example illustrations shown in <a class="reference internal" href="#immediate-charging-result"><span class="std std-numref">Fig. 6.10</span></a> and
<a class="reference internal" href="#smart-charging-result"><span class="std std-numref">Fig. 6.11</span></a>. Both algorithms are deterministic and directly utilize
the input vehicle trip data to calculate the charging demand based on vehicle travel
distances, dwell locations, and user defined infrastructure parameters. The Smart
Charging algorithm currently uses an optimization function to minimize wholesale prices
via flattening the net load curve. Incorporating additional optimization goals that will
change the cost function, such as minimizing individual vehicle costs in response to
time-varying utility rate structures, could be explored in future work. For the Smart
Charging algorithm, each representative vehicle sequentially sets its charging pattern
in response to the optimization function as well as an aggregate load profile. That
vehicle’s additional charging load is then added to the aggregate load profile, which is
then sent to the next vehicle as an input to its smart charging decision. The aggregate
profile of electricity demand from all smart-charging BEVs is then simply the sum across
all vehicles (see <a class="reference internal" href="#demand-calculation-flowchart"><span class="std std-numref">Fig. 6.9</span></a>).</p>
<figure class="align-default" id="id49">
<span id="demand-calculation-flowchart"></span><div class="mermaid">
            flowchart TB
   subgraph main[ ]
     direction TB
     subgraph input[ ]
       direction RL
       A(Base-year and simulation-year &lt;br&gt; profile of BEV trips)
       B(Input: NREL's EFS for fuel efficiency &lt;br&gt; projections by vehicle type)
       B----&gt;A
      end
      C(Fuel efficiency projections determine &lt;br&gt; charging needed after each vehicle trip)
     input==&gt;C
     D(Charging algorithm: immediate and smart)
     C==&gt;D
     E(Create a simulation-year profile &lt;br&gt; of electricity demand from &lt;br&gt; transportation electrification)
     D==&gt;E
   end

   class main,input,A,B,C,D,E white
   classDef white fill:#ffffff,stroke:#333,stroke-width:3px
   classDef white_no_border fill:#ffffff,stroke:#333,stroke-width:0px
        </div><figcaption>
<p><span class="caption-number">Fig. 6.9 </span><span class="caption-text">Workflow from the annual VMT pattern to the additional electricity demand from the BEV charging profiles</span><a class="headerlink" href="#id49" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<section id="immediate-and-smart-charging-example-outputs">
<h6><a class="toc-backref" href="#id77" role="doc-backlink"><span class="section-number">6.2.2.4.1.1. </span>Immediate and Smart Charging Example Outputs</a><a class="headerlink" href="#immediate-and-smart-charging-example-outputs" title="Permalink to this heading">¶</a></h6>
<p>Immediate Charging refers to full power charging at time of plug-in until full capacity
reached or car unplugged, whichever comes first.</p>
<figure class="align-center" id="id50">
<span id="immediate-charging-result"></span><img alt="../_images/immediate_charging_result.png" src="../_images/immediate_charging_result.png" />
<figcaption>
<p><span class="caption-number">Fig. 6.10 </span><span class="caption-text">Notional results for immediate charging algorithm, with charging hours within the
bracket</span><a class="headerlink" href="#id50" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Smart charging refers to coordinated charging, where drivers provide information on
their travel schedule and charging demand to the electric grid operator.</p>
<figure class="align-center" id="id51">
<span id="smart-charging-result"></span><img alt="../_images/smart_charging_result.png" src="../_images/smart_charging_result.png" />
<figcaption>
<p><span class="caption-number">Fig. 6.11 </span><span class="caption-text">Notional results for smart charging algorithm, with charging hours within the
bracket</span><a class="headerlink" href="#id51" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Example Output – Immediate Charging</strong>. Immediate Charging refers to full power
charging at time of plug-in until the battery is full or until the vehicle departs on
the next driving trip. <a class="reference internal" href="#ldv-immediate-charging-output"><span class="std std-numref">Fig. 6.12</span></a> presents a normalized,
unscaled LDV charging demand alongside a normalization of the underlying
non-transportation base demand (note: the normalization of the charging profile uses the
sum of a full year of charging from the sample vehicles as the denominator).  Notice how
the uncoordinated charging pattern aligns with the underlying non-transportation base
demand.</p>
<p>From there, this normalized profile is then scaled based on the parameters for the
desired simulation year, with an example output shown in
<a class="reference internal" href="#example-ldv-immediate-load"><span class="std std-numref">Fig. 6.1</span></a>. These parameters include the projected VMT for the
simulated year, the fuel efficiency projection (e.g. number of kWh consumed per mile
traveled), and the efficiency of the charging process. Notice that the peak demand
increases due to the uncoordinated charging pattern.</p>
<figure class="align-center" id="id52">
<span id="ldv-immediate-charging-output"></span><img alt="../_images/ldv_immediate_charging_output.png" src="../_images/ldv_immediate_charging_output.png" />
<figcaption>
<p><span class="caption-number">Fig. 6.12 </span><span class="caption-text">Normalized LDV Immediate Charging output for 1 example week</span><a class="headerlink" href="#id52" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Example Output – Smart Charging</strong>. Smart charging refers to coordinated charging,
where drivers provide information on their travel schedule and charging demand to the
electric grid operator. Vehicle charging is optimized based on cost (e.g., time-of-use
rates), grid support needs, travel considerations, and vehicle constraints.
<a class="reference internal" href="#ldv-smart-charging-output"><span class="std std-numref">Fig. 6.13</span></a> presents a normalized, unscaled LDV smart charging
demand alongside a normalization of the underlying non-transportation base demand.
Notice how in this case the smart charging pattern no longer aligns with the underlying
non-transportation base demand. <a class="reference internal" href="#example-ldv-smart-load"><span class="std std-numref">Fig. 6.2</span></a> shows an example of the
results from LDV smart charging at scale that was optimized for grid support needs by
flattening net demand (e.g. “filling in the valleys”).</p>
<figure class="align-center" id="id53">
<span id="ldv-smart-charging-output"></span><img alt="../_images/ldv_smart_charging_output.png" src="../_images/ldv_smart_charging_output.png" />
<figcaption>
<p><span class="caption-number">Fig. 6.13 </span><span class="caption-text">Normalized LDV Smart Charging output for 1 example week</span><a class="headerlink" href="#id53" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="vehicle-travel-patterns">
<span id="id5"></span><h5><a class="toc-backref" href="#id78" role="doc-backlink"><span class="section-number">6.2.2.4.2. </span>Vehicle Travel Patterns</a><a class="headerlink" href="#vehicle-travel-patterns" title="Permalink to this heading">¶</a></h5>
<section id="light-duty-travel-patterns">
<h6><a class="toc-backref" href="#id79" role="doc-backlink"><span class="section-number">6.2.2.4.2.1. </span>Light-duty Travel patterns</a><a class="headerlink" href="#light-duty-travel-patterns" title="Permalink to this heading">¶</a></h6>
<p>The 2017 National Household Travel Survey (NHTS) documents the light-duty vehicle and
light-duty truck travel patterns (<a class="reference external" href="https://nhts.ornl.gov/">https://nhts.ornl.gov/</a>). Data from the NHTS 2017
<code class="docutils literal notranslate"><span class="pre">trippub.csv</span></code> dataset were filtered to identify all vehicle trips. Relevant data were
then divided into nine datasets, one for each Census Division, as defined within the
dataset, see <a class="reference internal" href="#census-divisions-table"><span class="std std-numref">Table 6.1</span></a>.</p>
<span id="census-divisions-table"></span><table class="docutils align-default" id="id54">
<caption><span class="caption-number">Table 6.1 </span><span class="caption-text">Census divisions</span><a class="headerlink" href="#id54" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Division Number</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>States Included</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>01</p></td>
<td><p>New England</p></td>
<td><p>CT, MA, ME, NH, RI, VT</p></td>
</tr>
<tr class="row-odd"><td><p>02</p></td>
<td><p>Middle Atlantic</p></td>
<td><p>PA, NJ, NY</p></td>
</tr>
<tr class="row-even"><td><p>03</p></td>
<td><p>East North Central</p></td>
<td><p>IL, IN, MI, OH, WI</p></td>
</tr>
<tr class="row-odd"><td><p>04</p></td>
<td><p>West North Central</p></td>
<td><p>IA, KS, MN, MO, ND, NE, SD</p></td>
</tr>
<tr class="row-even"><td><p>05</p></td>
<td><p>South Atlantic</p></td>
<td><p>DE, FL, GA, MD, NC, SC, VA, WV, (DC)</p></td>
</tr>
<tr class="row-odd"><td><p>06</p></td>
<td><p>East South Central</p></td>
<td><p>AL, KY, MS, TN</p></td>
</tr>
<tr class="row-even"><td><p>07</p></td>
<td><p>West South Central</p></td>
<td><p>AR, LA, OK, TX</p></td>
</tr>
<tr class="row-odd"><td><p>08</p></td>
<td><p>Mountain</p></td>
<td><p>AZ, CO, ID, MT, NM, NV, UT, WY</p></td>
</tr>
<tr class="row-even"><td><p>09</p></td>
<td><p>Pacific</p></td>
<td><p>AK, CA, HI, OR, WA</p></td>
</tr>
</tbody>
</table>
<p>The definition for each column in the final datasets is in
<a class="reference internal" href="#nhts-trip-dataset-table"><span class="std std-numref">Table 6.2</span></a>. Columns 1-20 are taken directly from the NHTS
dataset, and columns 21-28 are calculated values based on the preceding columns.</p>
<span id="nhts-trip-dataset-table"></span><table class="docutils align-default" id="id55">
<caption><span class="caption-number">Table 6.2 </span><span class="caption-text">Columns in modified NHTS trip Dataset</span><a class="headerlink" href="#id55" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Variable</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Household</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Vehicle ID</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Person ID</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Scaling Factor Applied</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Trip Number</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Date (YYYYMM)</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>Day of Week (1 - 7)</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>If Weekend</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>Trip Start Time (HHMM)</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>Trip End Time (HHMM)</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>Travel Minutes</p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>Dwell Time</p></td>
</tr>
<tr class="row-even"><td><p>13</p></td>
<td><p>Miles Traveled</p></td>
</tr>
<tr class="row-odd"><td><p>14</p></td>
<td><p>Vehicle Miles Traveled</p></td>
</tr>
<tr class="row-even"><td><p>15</p></td>
<td><p>Why From</p></td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td><p>Why To</p></td>
</tr>
<tr class="row-even"><td><p>17</p></td>
<td><p>Vehicle Type (1-4 LDV, 5+ LDT)</p></td>
</tr>
<tr class="row-odd"><td><p>18</p></td>
<td><p>Household Vehicle Count</p></td>
</tr>
<tr class="row-even"><td><p>19</p></td>
<td><p>Household Size</p></td>
</tr>
<tr class="row-odd"><td><p>20</p></td>
<td><p>Trip Type</p></td>
</tr>
<tr class="row-even"><td><p>21</p></td>
<td><p>Start Time (hour decimal)</p></td>
</tr>
<tr class="row-odd"><td><p>22</p></td>
<td><p>End Time (hour decimal)</p></td>
</tr>
<tr class="row-even"><td><p>23</p></td>
<td><p>Dwell Time (hour decimal)</p></td>
</tr>
<tr class="row-odd"><td><p>24</p></td>
<td><p>Travel Time (hour decimal)</p></td>
</tr>
<tr class="row-even"><td><p>25</p></td>
<td><p>Vehicle Speed (mi/hour)</p></td>
</tr>
<tr class="row-odd"><td><p>26</p></td>
<td><p>Sample Vehicle Number</p></td>
</tr>
<tr class="row-even"><td><p>27</p></td>
<td><p>Total Vehicle Trips</p></td>
</tr>
<tr class="row-odd"><td><p>28</p></td>
<td><p>Total Vehicle Miles Traveled</p></td>
</tr>
</tbody>
</table>
<p>Total vehicle trips variable refers to the total number of trips a single vehicle takes
in the sample window (24 hours). Trips are divided into weekday and weekend trips. The
resulting charging profile for each day type is replicated across the year, i.e., each
weekday and each weekend are the same set of trips across the year.
<a class="reference internal" href="#trip-count-table"><span class="std std-numref">Table 6.3</span></a> presents the total number of trips in the trip datasets for
each vehicle category. The weekday and weekend trips are weighted based on the MOVES
weight factors. The charging demand is scaled up and down further based on the MOVES
monthly weight factors depending on the month of the year.</p>
<span id="trip-count-table"></span><table class="docutils align-default" id="id56">
<caption><span class="caption-number">Table 6.3 </span><span class="caption-text">Trip count by vehicle category, census division, and day of week</span><a class="headerlink" href="#id56" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Vehicle Category</p></th>
<th class="head" rowspan="2"><p>Census Division</p></th>
<th class="head" colspan="2"><p>Trip Count</p></th>
</tr>
<tr class="row-even"><th class="head"><p>Weekday</p></th>
<th class="head"><p>Weekend</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td rowspan="9"><p>LDV</p></td>
<td><p>01</p></td>
<td><p>3979</p></td>
<td><p>1235</p></td>
</tr>
<tr class="row-even"><td><p>02</p></td>
<td><p>32831</p></td>
<td><p>10664</p></td>
</tr>
<tr class="row-odd"><td><p>03</p></td>
<td><p>30815</p></td>
<td><p>5116</p></td>
</tr>
<tr class="row-even"><td><p>04</p></td>
<td><p>8962</p></td>
<td><p>2885</p></td>
</tr>
<tr class="row-odd"><td><p>05</p></td>
<td><p>58173</p></td>
<td><p>9620</p></td>
</tr>
<tr class="row-even"><td><p>06</p></td>
<td><p>2294</p></td>
<td><p>611</p></td>
</tr>
<tr class="row-odd"><td><p>07</p></td>
<td><p>52982</p></td>
<td><p>7818</p></td>
</tr>
<tr class="row-even"><td><p>08</p></td>
<td><p>9127</p></td>
<td><p>2033</p></td>
</tr>
<tr class="row-odd"><td><p>09</p></td>
<td><p>53554</p></td>
<td><p>16386</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="9"><p>LDT</p></td>
<td><p>01</p></td>
<td><p>2881</p></td>
<td><p>935</p></td>
</tr>
<tr class="row-even"><td><p>02</p></td>
<td><p>29513</p></td>
<td><p>9347</p></td>
</tr>
<tr class="row-odd"><td><p>03</p></td>
<td><p>31788</p></td>
<td><p>5478</p></td>
</tr>
<tr class="row-even"><td><p>04</p></td>
<td><p>10157</p></td>
<td><p>2960</p></td>
</tr>
<tr class="row-odd"><td><p>05</p></td>
<td><p>58900</p></td>
<td><p>9465</p></td>
</tr>
<tr class="row-even"><td><p>06</p></td>
<td><p>2416</p></td>
<td><p>678</p></td>
</tr>
<tr class="row-odd"><td><p>07</p></td>
<td><p>60929</p></td>
<td><p>8530</p></td>
</tr>
<tr class="row-even"><td><p>08</p></td>
<td><p>10006</p></td>
<td><p>2084</p></td>
</tr>
<tr class="row-odd"><td><p>09</p></td>
<td><p>40161</p></td>
<td><p>12116</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MDV</p></td>
<td><p>All</p></td>
<td><p>8302</p></td>
<td><p>same</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>HDV</p></td>
<td><p>All</p></td>
<td><p>8407</p></td>
<td><p>same</p></td>
</tr>
</tbody>
</table>
</section>
<section id="medium-and-heavy-duty-vehicles">
<h6><a class="toc-backref" href="#id80" role="doc-backlink"><span class="section-number">6.2.2.4.2.2. </span>Medium- and Heavy-duty Vehicles</a><a class="headerlink" href="#medium-and-heavy-duty-vehicles" title="Permalink to this heading">¶</a></h6>
<p>The construction of the original representative datasets is described in
<span id="id6">[<a class="reference internal" href="#id35" title="B. Tarroja K. Forest, M. Mac Kinnon and S. Samuelsen. Estimating the technical feasibility of fuel cell and battery electric vehicles for the medium and heavy duty sectors in california. Applied Energy, 276:115439, 2020. URL: https://www.sciencedirect.com/science/article/pii/S030626192030951X, doi:https://doi.org/10.1016/j.apenergy.2020.115439.">5</a>]</span>.</p>
<p>The following is a description of the data that are rendered from the initial,
representative HDV dataset.</p>
<ol class="arabic simple">
<li><p>Trip times, trip count, and miles traveled – data on trips was taken from the
original trip datasets and scaled to align with known statistics for the target
region.  Only trip count, times, and miles traveled were included. Information on
locations, vehicle identity, vehicle class, and vocation are excluded.</p></li>
<li><p>Dwell location – dwell locations are simplified to being either a “home base
location” or not. Home base locations are defined as depots that are owned, managed,
and/or under contract with the same entity as the fleet vehicle.</p></li>
<li><p>Trip start and stop times – travel and dwell times by time of day.</p></li>
</ol>
<p>The final data table structure is presented in <a class="reference internal" href="#mdv-and-hdv-trip-dataset"><span class="std std-numref">Table 6.4</span></a>. Each
row of the data table is a unique trip taken by the specified vehicle.</p>
<span id="mdv-and-hdv-trip-dataset"></span><table class="docutils align-default" id="id57">
<caption><span class="caption-number">Table 6.4 </span><span class="caption-text">Columns in modified MDV and HDV trip datasets</span><a class="headerlink" href="#id57" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Variable</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Vehicle Number</p></td>
<td><p>Unique vehicle number</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Trip Number</p></td>
<td><p>Current trip number of vehicle</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Destination (home base or not)</p></td>
<td><p>Where the trip ends, 1 = home base,
2 = not home base</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Trip Distance</p></td>
<td><p>Miles traveled in the trip</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Trip Start</p></td>
<td><p>Time of trip start</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Trip End</p></td>
<td><p>Time of trip end</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>Dwell Time</p></td>
<td><p>Length of time vehicle parked between
trips</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>Trip Time</p></td>
<td><p>Length of travel time</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>Total Vehicle Trips</p></td>
<td><p>Total count of trips taken by the
identified vehicle in the time window</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>Total Vehicle Miles</p></td>
<td><p>Total vehicle miles traveled by
vehicle in time window</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="annual-vehicle-miles-traveled">
<span id="id7"></span><h5><a class="toc-backref" href="#id81" role="doc-backlink"><span class="section-number">6.2.2.4.3. </span>Annual Vehicle Miles Traveled</a><a class="headerlink" href="#annual-vehicle-miles-traveled" title="Permalink to this heading">¶</a></h5>
<p>The model is structured for a single base year (2017) and 33 future years (2018-2050).
Each year is unique based on vehicle miles traveled (VMT) and fuel economy (miles per
gallon of gasoline equivalent, mi/GGE), which together determine annual vehicle
electricity demand. The base year and future projections of battery electric vehicle
miles traveled are taken from NREL’s EFS <span id="id8">[<a class="reference internal" href="#id38" title="US Census Bureau. Electric technology adoption and energy consumption | nrel data catalog. https://data.nrel.gov/submissions/92. Accessed Jun. 21, 2022.">4</a>]</span>. BEV
VMT is divided into VMT occurring in UAs and RAs. UA is a term assigned by the U.S.
Census Bureau and is described as areas with a population of 50,000 people or more
<span id="id9">[<a class="reference internal" href="#id37" title="US Census Bureau. 2010 census urban and rural classification and urban area criteria. https://www.census.gov/programs-surveys/geography/guidance/geo-areas/urban-rural/2010-urban-rural.html. Accessed Jun. 21, 2022.">2</a>]</span>. Other years are available from NREL, if
desired.</p>
<section id="electric-vehicle-miles-traveled-projections-by-urban-and-rural-area">
<span id="electric-vehicle-miles-traveled-projections"></span><h6><a class="toc-backref" href="#id82" role="doc-backlink"><span class="section-number">6.2.2.4.3.1. </span>Electric Vehicle Miles Traveled Projections by Urban and Rural Area</a><a class="headerlink" href="#electric-vehicle-miles-traveled-projections-by-urban-and-rural-area" title="Permalink to this heading">¶</a></h6>
<p>VMT per capita for each state and UA was taken from the Department of Transportation’s
transportation health tool <span id="id10">[<a class="reference internal" href="#id36" title="US Department of Transportation. Transportation and health indicators. https://www7.transportation.gov/transportation-health-tool/indicators. Accessed Jun. 21, 2022.">1</a>]</span>. To determine total
state VMT, state population was taken from Census data and was multiplied by the above
state VMT per capita data <span id="id11">[<a class="reference internal" href="#id36" title="US Department of Transportation. Transportation and health indicators. https://www7.transportation.gov/transportation-health-tool/indicators. Accessed Jun. 21, 2022.">1</a>]</span>
<span id="id12">[<a class="reference internal" href="#id37" title="US Census Bureau. 2010 census urban and rural classification and urban area criteria. https://www.census.gov/programs-surveys/geography/guidance/geo-areas/urban-rural/2010-urban-rural.html. Accessed Jun. 21, 2022.">2</a>]</span>. Then, to calculate the fraction of total state
VMT that is allocated to each UA and RA, the UA population was also pulled from Census
data <span id="id13">[<a class="reference internal" href="#id37" title="US Census Bureau. 2010 census urban and rural classification and urban area criteria. https://www.census.gov/programs-surveys/geography/guidance/geo-areas/urban-rural/2010-urban-rural.html. Accessed Jun. 21, 2022.">2</a>]</span>. From there, the UA population was
multiplied by UA VMT per capita to get total UA VMT. Lastly, UA VMT is subtracted from
state VMT to determine the RA VMT for the state. These calculations are summarized
below:</p>
<div class="math notranslate nohighlight">
\[V_{\rm state} = A_{\rm state} \times P_{\rm state}\]</div>
<div class="line-block">
<div class="line">where:</div>
<div class="line"><span class="math notranslate nohighlight">\(V_{\rm state}\)</span> is the state VMT,</div>
<div class="line"><span class="math notranslate nohighlight">\(A_{\rm state}\)</span> is the VMT per capita,</div>
<div class="line"><span class="math notranslate nohighlight">\(P_{\rm state}\)</span> is the state population.</div>
</div>
<div class="math notranslate nohighlight">
\[V_{\rm UA} = A_{\rm UA} \times P_{\rm UA}\]</div>
<div class="line-block">
<div class="line">where:</div>
<div class="line"><span class="math notranslate nohighlight">\(V_{\rm UA}\)</span> is the urban area VMT,</div>
<div class="line"><span class="math notranslate nohighlight">\(A_{\rm UA}\)</span> is the VMT per capita,</div>
<div class="line"><span class="math notranslate nohighlight">\(P_{\rm UA}\)</span> is the urban area population.</div>
</div>
<div class="math notranslate nohighlight">
\[V_{\rm RA} = A_{\rm state} - \sum V_{\rm UA}\]</div>
<div class="line-block">
<div class="line">where:</div>
<div class="line"><span class="math notranslate nohighlight">\(V_{\rm RA}\)</span> is the rural area VMT.</div>
</div>
</section>
<section id="monthly-and-daily-weight-factors">
<h6><a class="toc-backref" href="#id83" role="doc-backlink"><span class="section-number">6.2.2.4.3.2. </span>Monthly and Daily Weight Factors</a><a class="headerlink" href="#monthly-and-daily-weight-factors" title="Permalink to this heading">¶</a></h6>
<p>Along with the rural/urban distribution, the default scenarios also use weekday/weekend
and monthly weight factors to distribute annual VMT. These weight factors come directly
from the U.S. EPA’s MOVES model <span id="id14">[<a class="reference internal" href="#id40" title="US Environmental Protection Agency. Moves and other mobile source emissions models. https://www.epa.gov/moves. Accessed Jun. 21, 2022.">3</a>]</span>. The weight factor values are listed
in <a class="reference internal" href="#weekday-vs-weekend-weight-table"><span class="std std-numref">Table 6.5</span></a> and <a class="reference internal" href="#month-weight-table"><span class="std std-numref">Table 6.6</span></a>.</p>
<span id="weekday-vs-weekend-weight-table"></span><table class="docutils align-default" id="id58">
<caption><span class="caption-number">Table 6.5 </span><span class="caption-text">Weekday versus weekend weight factors</span><a class="headerlink" href="#id58" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Day Type</p></th>
<th class="head"><p>Rural</p></th>
<th class="head"><p>Urban</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Weekday (divided over 5 days)</p></td>
<td><p>0.72118</p></td>
<td><p>0.762365</p></td>
</tr>
<tr class="row-odd"><td><p>Weekend (divided over 2 days)</p></td>
<td><p>0.27882</p></td>
<td><p>0.237635</p></td>
</tr>
</tbody>
</table>
<span id="month-weight-table"></span><table class="docutils align-default" id="id59">
<caption><span class="caption-number">Table 6.6 </span><span class="caption-text">Month weight factors</span><a class="headerlink" href="#id59" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Month</p></th>
<th class="head"><p>Weight Factor</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>January</p></td>
<td><p>0.0731</p></td>
</tr>
<tr class="row-odd"><td><p>February</p></td>
<td><p>0.0697</p></td>
</tr>
<tr class="row-even"><td><p>March</p></td>
<td><p>0.0817</p></td>
</tr>
<tr class="row-odd"><td><p>April</p></td>
<td><p>0.0823</p></td>
</tr>
<tr class="row-even"><td><p>May</p></td>
<td><p>0.0875</p></td>
</tr>
<tr class="row-odd"><td><p>June</p></td>
<td><p>0.0883</p></td>
</tr>
<tr class="row-even"><td><p>July</p></td>
<td><p>0.0923</p></td>
</tr>
<tr class="row-odd"><td><p>August</p></td>
<td><p>0.0934</p></td>
</tr>
<tr class="row-even"><td><p>September</p></td>
<td><p>0.0847</p></td>
</tr>
<tr class="row-odd"><td><p>October</p></td>
<td><p>0.0865</p></td>
</tr>
<tr class="row-even"><td><p>November</p></td>
<td><p>0.0802</p></td>
</tr>
<tr class="row-odd"><td><p>December</p></td>
<td><p>0.0802</p></td>
</tr>
</tbody>
</table>
</section>
<section id="bev-vmt-projections">
<span id="id15"></span><h6><a class="toc-backref" href="#id84" role="doc-backlink"><span class="section-number">6.2.2.4.3.3. </span>BEV VMT Projections</a><a class="headerlink" href="#bev-vmt-projections" title="Permalink to this heading">¶</a></h6>
<p>To calculate the BEV VMT by vehicle class for each UA, state-level BEV VMT projections
were based on NREL’s EFS for 8 vehicle types
<span id="id16">[<a class="reference internal" href="#id38" title="US Census Bureau. Electric technology adoption and energy consumption | nrel data catalog. https://data.nrel.gov/submissions/92. Accessed Jun. 21, 2022.">4</a>]</span>:</p>
<ol class="arabic simple">
<li><p>LDV BEV Cars: 100 mi, 200 mi, 300 mi</p></li>
<li><p>LDV BEV Trucks: 100 mi, 200 mi, 300 mi</p></li>
<li><p>MDV Trucks</p></li>
<li><p>HDV Trucks</p></li>
</ol>
<p>Projections were used for 2018-2050. The 2017 base year assumptions were calibrated
based on historical data. For all years, BEV VMT at the state level was translated to
BEV VMT at the UA level by multiplying the state-level projections by the fraction of
state VMT allocated to each UA. It is assumed that the proportion of VMT occurring in
urban areas relative to total state VMT will be constant moving into the future. There
are some UAs that did not have VMT data. Out of 481 UAs, 56 did not have VMT per capita
data from the DOT, so those entries will use their respective state’s VMT per capita.</p>
<p>Once each UA and the state’s RA have their projected annual VMT for a simulation year,
the annual VMT is distributed to each day of the year based on weight factors from U.S.
EPA MOVES model, see <a class="reference internal" href="#scaling-table"><span class="std std-numref">Table 6.7</span></a>. Each daily weight factor represents the
fraction of annual VMT that is traveled in that specific day. The daily weight factors
vary by month, whether the VMT is in a UA or a RA, and whether the day is a weekday or
a weekend day. For example, within a given urban area all weekdays in January have the
same weight factor and therefore the same allocated VMT.</p>
<span id="scaling-table"></span><table class="docutils align-default" id="id60">
<caption><span class="caption-number">Table 6.7 </span><span class="caption-text">Urban and rural scaling factors by month and weekday vs weekend</span><a class="headerlink" href="#id60" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head" colspan="2"><p>Urban</p></th>
<th class="head" colspan="2"><p>Rural</p></th>
</tr>
<tr class="row-even"><th class="head"><p>Month</p></th>
<th class="head"><p>Weekday</p></th>
<th class="head"><p>Weekend</p></th>
<th class="head"><p>Weekday</p></th>
<th class="head"><p>Weekend</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>January</p></td>
<td><p>0.00252</p></td>
<td><p>0.00196</p></td>
<td><p>0.00238</p></td>
<td><p>0.00230</p></td>
</tr>
<tr class="row-even"><td><p>February</p></td>
<td><p>0.00266</p></td>
<td><p>0.00207</p></td>
<td><p>0.00251</p></td>
<td><p>0.00243</p></td>
</tr>
<tr class="row-odd"><td><p>March</p></td>
<td><p>0.00279</p></td>
<td><p>0.00218</p></td>
<td><p>0.00266</p></td>
<td><p>0.00257</p></td>
</tr>
<tr class="row-even"><td><p>April</p></td>
<td><p>0.00296</p></td>
<td><p>0.00231</p></td>
<td><p>0.00268</p></td>
<td><p>0.00277</p></td>
</tr>
<tr class="row-odd"><td><p>May</p></td>
<td><p>0.00299</p></td>
<td><p>0.00233</p></td>
<td><p>0.00285</p></td>
<td><p>0.00275</p></td>
</tr>
<tr class="row-even"><td><p>June</p></td>
<td><p>0.00313</p></td>
<td><p>0.00244</p></td>
<td><p>0.00297</p></td>
<td><p>0.00287</p></td>
</tr>
<tr class="row-odd"><td><p>July</p></td>
<td><p>0.00321</p></td>
<td><p>0.00250</p></td>
<td><p>0.00301</p></td>
<td><p>0.00291</p></td>
</tr>
<tr class="row-even"><td><p>August</p></td>
<td><p>0.00319</p></td>
<td><p>0.00249</p></td>
<td><p>0.00304</p></td>
<td><p>0.00294</p></td>
</tr>
<tr class="row-odd"><td><p>September</p></td>
<td><p>0.00302</p></td>
<td><p>0.00236</p></td>
<td><p>0.00285</p></td>
<td><p>0.00276</p></td>
</tr>
<tr class="row-even"><td><p>October</p></td>
<td><p>0.00298</p></td>
<td><p>0.00232</p></td>
<td><p>0.00282</p></td>
<td><p>0.00272</p></td>
</tr>
<tr class="row-odd"><td><p>November</p></td>
<td><p>0.00284</p></td>
<td><p>0.00221</p></td>
<td><p>0.00270</p></td>
<td><p>0.00261</p></td>
</tr>
<tr class="row-even"><td><p>December</p></td>
<td><p>0.00279</p></td>
<td><p>0.00217</p></td>
<td><p>0.00262</p></td>
<td><p>0.00253</p></td>
</tr>
</tbody>
</table>
<p>The trip data are scaled based on the allocated daily VMT. The daily patterns are
adjusted by scaling the VMT of each trip within the daily patterns so that the total
across the simulation matches the Annual VMT projection for each state.</p>
</section>
<section id="fuel-efficiency-projections">
<span id="id17"></span><h6><a class="toc-backref" href="#id85" role="doc-backlink"><span class="section-number">6.2.2.4.3.4. </span>Fuel Efficiency Projections</a><a class="headerlink" href="#fuel-efficiency-projections" title="Permalink to this heading">¶</a></h6>
<p>NREL’s Electrification Futures Study also projects average BEV fuel economy over time,
based on assumptions regarding technology improvements and vehicle range
<span id="id18">[<a class="reference internal" href="#id39" title="P. Jadun et al. Electrification Futures Study: End-Use Electric Technology Cost and Performance Projections through 2050. National Renewable Energy Laboratory, Golden, CO: National Renewable Energy Laboratory. NREL/TP-6A20-70485. Accessed April 2, 2018.">6</a>]</span>. NREL provides a range of possible BEV fuel economies (“Slow
Advancement”, “Moderate Advancement”, and “Rapid Advancement”). The charging model uses
the “Moderate Advancement” values as the default fuel economy for each vehicle category
and year, as shown in <a class="reference internal" href="#bev-fuel-economy-table"><span class="std std-numref">Table 6.8</span></a>.</p>
<span id="bev-fuel-economy-table"></span><table class="docutils align-default" id="id61">
<caption><span class="caption-number">Table 6.8 </span><span class="caption-text">Default BEV fuel economy by vehicle category and year</span><a class="headerlink" href="#id61" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Vehicle Type</p></th>
<th class="head" colspan="5"><p>Fuel Economy (mile/GGE)</p></th>
</tr>
<tr class="row-even"><th class="head"><p>2017-2019</p></th>
<th class="head"><p>2020-2024</p></th>
<th class="head"><p>2025-2034</p></th>
<th class="head"><p>2035-2044</p></th>
<th class="head"><p>2045-2050</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>LDV BEV cars, 100 mile range</p></td>
<td><p>103</p></td>
<td><p>117</p></td>
<td><p>137</p></td>
<td><p>153</p></td>
<td><p>159</p></td>
</tr>
<tr class="row-even"><td><p>LDV BEV cars, 200 mile range</p></td>
<td><p>97</p></td>
<td><p>112</p></td>
<td><p>133</p></td>
<td><p>149</p></td>
<td><p>155</p></td>
</tr>
<tr class="row-odd"><td><p>LDV BEV cars, 300 mile range</p></td>
<td><p>85</p></td>
<td><p>102</p></td>
<td><p>124</p></td>
<td><p>138</p></td>
<td><p>144</p></td>
</tr>
<tr class="row-even"><td><p>LDT BEV trucks, 100 mile range</p></td>
<td><p>60</p></td>
<td><p>69</p></td>
<td><p>78</p></td>
<td><p>83</p></td>
<td><p>85</p></td>
</tr>
<tr class="row-odd"><td><p>LDT BEV trucks, 200 mile range</p></td>
<td><p>57</p></td>
<td><p>66</p></td>
<td><p>76</p></td>
<td><p>81</p></td>
<td><p>83</p></td>
</tr>
<tr class="row-even"><td><p>LDT BEV trucks, 300 mile range</p></td>
<td><p>50</p></td>
<td><p>60</p></td>
<td><p>72</p></td>
<td><p>76</p></td>
<td><p>79</p></td>
</tr>
<tr class="row-odd"><td><p>MDV trucks</p></td>
<td><p>16</p></td>
<td><p>17</p></td>
<td><p>19</p></td>
<td><p>21</p></td>
<td><p>22</p></td>
</tr>
<tr class="row-even"><td><p>HDV trucks</p></td>
<td><p>9</p></td>
<td><p>10</p></td>
<td><p>13</p></td>
<td><p>14</p></td>
<td><p>15</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="smart-charging-optimization-algorithm">
<h5><a class="toc-backref" href="#id86" role="doc-backlink"><span class="section-number">6.2.2.4.4. </span>Smart Charging Optimization Algorithm</a><a class="headerlink" href="#smart-charging-optimization-algorithm" title="Permalink to this heading">¶</a></h5>
<p>The smart charging algorithm was developed by <span id="id19">[<a class="reference internal" href="#id34" title="L. Zhang. Charging infrastructure optimization for plug-in electric vehicles. PhD thesis, UC Irvine, 2014. Retrieved from https://escholarship.org/uc/item/0199j451, Accessed June 21, 2017.">7</a>]</span>. The algorithm is a
least cost optimization problem, with the cost function as follows:</p>
<div class="math notranslate nohighlight">
\[min \sum_{i=1}^n \sum_{j=1}^{seg(i)} f_{ij} x_{ij}\]</div>
<div class="line-block">
<div class="line">where:</div>
<div class="line"><span class="math notranslate nohighlight">\(f\)</span> is the cost of electricity in [$/kWh],</div>
<div class="line"><span class="math notranslate nohighlight">\(x\)</span> is the increase in vehicle state of charge in [kWh],</div>
<div class="line"><span class="math notranslate nohighlight">\(i\)</span> is the dwell period per trip count,</div>
<div class="line"><span class="math notranslate nohighlight">\(seg(i)\)</span> is the number of dwell segments for dwell period <span class="math notranslate nohighlight">\(i\)</span>,</div>
<div class="line"><span class="math notranslate nohighlight">\(j\)</span> is the dwell segment in [h],</div>
<div class="line"><span class="math notranslate nohighlight">\(n\)</span> is the total number of dwell per trip periods</div>
</div>
<p>The total number of dwell segments <span class="math notranslate nohighlight">\(seg(i)\)</span> will depend on the how long the
vehicle is parked.</p>
<p><strong>Equality</strong> constraint:</p>
<div class="math notranslate nohighlight">
\[\sum_{i=1}^n \sum_{j=1}^{seg(i)} x_{ij} + \sum_{i=1}^n y_i = 0\]</div>
<div class="line-block">
<div class="line">where:</div>
<div class="line"><span class="math notranslate nohighlight">\(y\)</span> is the discharged energy from driving</div>
</div>
<p><strong>Inequality</strong> constraints:</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}y_1 &amp; &gt; -c\\y_1 &amp; + \sum_{j=1}^{seg(1)} x_{1j} + y_2 &gt; -c\\y_1 &amp; + \sum_{j=1}^{seg(1)} x_{1j} + y_2 + \dotsc + \sum_{j=1}^{seg(n-1)} x_{n-1j} + y_n &gt; -c\end{aligned}\end{align} \]</div>
<div class="line-block">
<div class="line">where:</div>
<div class="line"><span class="math notranslate nohighlight">\(c\)</span> is the battery energy capacity in [kWh]</div>
</div>
<p><strong>Bounds</strong>:</p>
<div class="math notranslate nohighlight">
\[0 \leq x_{ij} \leq p_{ij} \times \Delta t_{ij} \times \eta\]</div>
<div class="line-block">
<div class="line">where:</div>
<div class="line"><span class="math notranslate nohighlight">\(p\)</span> is the rated power of charger in [kW]</div>
<div class="line"><span class="math notranslate nohighlight">\(\Delta t\)</span> is the dwell time in [h]</div>
<div class="line"><span class="math notranslate nohighlight">\(\eta\)</span> is the charging efficiency</div>
</div>
<p>The optimization is structured to minimize the cost to charge each battery electric
vehicle within defined battery constraints. It is conducted at hourly timescale, meaning
that cost and electricity demand are provided in hourly segments. Charging efficiency is
dependent on the type of electric vehicle supply equipment (EVSE). Efficiency tends to
increase with higher charging rates. The model currently distinguishes between the lower
charging efficiency of AC level 2 charging (90%) and DC charging (95%), where AC
charging is assumed for charging rates at or below 19.2 kW, and DC charging is assumed
for charging rates above 19.2 kW. If a dwell time (<span class="math notranslate nohighlight">\(\Delta t\)</span>) falls below one
hour, the charge (<span class="math notranslate nohighlight">\(x\)</span>) available for that segment will be reduced proportional to
the amount of time spent parked (i.e., if a vehicle is parked for 30 minutes, the charge
will be reduced to <span class="math notranslate nohighlight">\(1/2\)</span>). The default minimum dwell time to consider a charging
event is 0.2 hours, or 12 minutes. This value can be modified depending on the user’s
scenario. The minimum dwell time is set in order to avoid impractical charging events
where, in the real world, a vehicle operator would not plug in their vehicle due to the
shortness of the stop. If the charging rate available is high (e.g., DC Fast Charging),
a shorter minimum dwell time may be warranted.</p>
</section>
<section id="adoption-rate">
<h5><a class="toc-backref" href="#id87" role="doc-backlink"><span class="section-number">6.2.2.4.5. </span>Adoption Rate</a><a class="headerlink" href="#adoption-rate" title="Permalink to this heading">¶</a></h5>
<p>As discussed in <a class="reference internal" href="#bev-vmt-projections"><span class="std std-numref">Section 6.2.2.4.3.3</span></a>, the default BEV adoption rates used in
this model are the VMT projections from NREL’s EFS data.  NREL used their Automotive
Deployment Options Projection Tool (ADOPT) in 2017 to generate the 2018-2050
projections.  Once actual adoption rates become available, those values could be used at
the state and/or UA level to update all remaining VMT projections.  As an example, the
California Energy Commission publishes a dashboard of the Light Duty Vehicle Population
by fuel type (including BEVs) in California for past years.</p>
<p>Similarly, other updates of BEV adoption rate projections at both state and UA levels
undoubtedly will arise over time.  As discussed in the User Manual section above, using
the user interface and modifying the accompanying datasets would allow updated adoption
rate projections to create corresponding BEV charging profiles when desired. Links for
these data sources are available in <a class="reference internal" href="#data-sources"><span class="std std-numref">Section 6.2.2.5</span></a>.</p>
</section>
</section>
<section id="data-sources">
<span id="id20"></span><h4><a class="toc-backref" href="#id88" role="doc-backlink"><span class="section-number">6.2.2.5. </span>Data Sources</a><a class="headerlink" href="#data-sources" title="Permalink to this heading">¶</a></h4>
<p>The detailed data sets are developed using data from the following sources:</p>
<ul class="simple">
<li><p>National Household Travel Survey (NHTS) from 2017 documents the light-duty vehicle
and light-duty truck travel patterns: <a class="reference external" href="https://nhts.ornl.gov">https://nhts.ornl.gov</a></p></li>
<li><p>US Department of Transportation, <cite>Transportation and Health Indicators</cite>:
<a class="reference external" href="https://www7.transportation.gov/transportation-health-tool/indicators">https://www7.transportation.gov/transportation-health-tool/indicators</a></p></li>
<li><p>United States Census Bureau, <cite>2010 Census Urban and Rural Classification and Urban
Area Criteria</cite>: <a class="reference external" href="https://www.census.gov/programs-surveys/geography/guidance/geo-areas/urban-rural/2010-urban-rural.html">https://www.census.gov/programs-surveys/geography/guidance/geo-areas/urban-rural/2010-urban-rural.html</a></p></li>
<li><p>National Renewable Energy Laboratory, <cite>Electric Technology Adoption and Energy
Consumption | NREL Data Catalog</cite>: <a class="reference external" href="https://data.nrel.gov/submissions/92">https://data.nrel.gov/submissions/92</a></p></li>
<li><p>P. Jadun, C. McMillan, D. Steinberg, M. Muratori, L. Vimmerstedt, and T. Mai,
<cite>Electrification Futures Study: End-Use Electric Technology Cost and Performance
Projections through 2050</cite>: <a class="reference external" href="https://www.nrel.gov/docs/fy18osti/70485.pdf">https://www.nrel.gov/docs/fy18osti/70485.pdf</a></p></li>
<li><p>U.S. Environmental Protection Agency, <cite>MOVES and Other Mobile Source Emissions
Models</cite>: <a class="reference external" href="https://www.epa.gov/moves">https://www.epa.gov/moves</a></p></li>
<li><p>NREL’s Automotive Deployment Options Projection Tool (ADOPT):
<a class="reference external" href="https://www.nrel.gov/transportation/adopt.html">https://www.nrel.gov/transportation/adopt.html</a></p></li>
<li><p>California Energy Commission’s Light-Duty Vehicle Population in California:
<a class="reference external" href="https://www.energy.ca.gov/data-reports/energy-almanac/zero-emission-vehicle-and-infrastructure-statistics/light-duty-vehicle">https://www.energy.ca.gov/data-reports/energy-almanac/zero-emission-vehicle-and-infrastructure-statistics/light-duty-vehicle</a></p></li>
<li><p>University of California’s Institute of Transportation Studies Report: Driving
California’s Transportation Emissions to Zero. <a class="reference external" href="https://escholarship.org/uc/item/3np3p2t0">https://escholarship.org/uc/item/3np3p2t0</a></p></li>
<li><p>EMFAC’s <a class="reference external" href="https://arb.ca.gov/emfac/emissions-inventory/0e7a83330a66b634f8c81b376ab6696cbd42e113">https://arb.ca.gov/emfac/emissions-inventory/0e7a83330a66b634f8c81b376ab6696cbd42e113</a></p></li>
</ul>
</section>
</section>
<section id="nrel-electrification-futures-study-demand-and-flexibility-data">
<h3><a class="toc-backref" href="#id89" role="doc-backlink"><span class="section-number">6.2.3. </span>NREL Electrification Futures Study Demand and Flexibility Data</a><a class="headerlink" href="#nrel-electrification-futures-study-demand-and-flexibility-data" title="Permalink to this heading">¶</a></h3>
<p>The National Renewable Energy Laboratory (NREL) has developed the Electrification
Futures Study (EFS) to project and study future sectoral demand changes as a result of
impending widespread electrification. As a part of the EFS, NREL has published multiple
reports (dating back to 2017) that describe their process for projecting demand-side
growth and provide analysis of their preliminary results; all of NREL’s published EFS
reports can be found <a class="reference external" href="https://www.nrel.gov/analysis/electrification-futures.html">here</a>. Accompanying their
reports, NREL has published data sets that include hourly load profiles that were
developed using processes described in the EFS reports. These hourly load profiles
represent state-by-state end-use electricity demand across four sectors
(Transportation, Residential Buildings, Commercial Buildings, and Industry) for three
electrification scenarios (Reference, Medium, and High) and three levels of technology
advancements (Slow, Moderate, and Rapid). Load profiles are provided for six separate
years: 2018, 2020, 2024, 2030, 2040, and 2050. The base demand data sets and further
accompanying information can be found <a class="reference external" href="https://data.nrel.gov/submissions/126">here</a>.
In addition to demand growth projections, NREL has also published data sets that
include hourly profiles for flexible load. These data sets indicate the amount of
demand that is considered to be flexible, as determined through the EFS. The
flexibility demand profiles consider two scenarios of flexibility (Base and Enhanced),
in addition to the classifications for each sector, electrification scenario,
technology advancement, and year. The flexible demand data sets and further
accompanying information can be found <a class="reference external" href="https://data.nrel.gov/submissions/127">here</a>.</p>
<p>Widespread electrification can have a large impact on future power system planning
decisions and operation. While increased electricity demand can have obvious
implications for generation and transmission capacity planning, new electrified demand
(e.g., electric vehicles, air source heat pumps, and heat pump water heaters) offers
large amounts of potential operational flexibility to grid operators. This flexibility
by demand-side resources can result in demand shifting from times of peak demand to
times of peak renewable generation, presenting the opportunity to defer generation and
transmission capacity upgrades. To help electrification impacts be considered properly,
this package has the ability to access NREL’s EFS demand data sets. Currently, users can
access the base demand profiles, allowing the impacts of demand growth due to vast
electrification to be explored. Users can also access the EFS flexible demand profiles.</p>
<p>The <a class="reference external" href="https://github.com/Breakthrough-Energy/PreREISE/blob/develop/prereise/gather/demanddata/nrel_efs/demo/efs_demand_reference_slow_2030_demo.ipynb">NREL EFS demand notebook</a> and <a class="reference external" href="https://github.com/Breakthrough-Energy/PreREISE/blob/develop/prereise/gather/demanddata/nrel_efs/demo/efs_base_flexibility_reference_slow_2030_demo.ipynb">NREL EFS flexibility notebook</a>, illustrate the
functionality of the various modules developed for obtaining and cleaning the NREL’s
EFS demand data.</p>
</section>
</section>
<section id="hydro">
<h2><a class="toc-backref" href="#id90" role="doc-backlink"><span class="section-number">6.3. </span>Hydro</a><a class="headerlink" href="#hydro" title="Permalink to this heading">¶</a></h2>
<section id="id24">
<h3><a class="toc-backref" href="#id91" role="doc-backlink"><span class="section-number">6.3.1. </span>Texas</a><a class="headerlink" href="#id24" title="Permalink to this heading">¶</a></h3>
<p>ERCOT publishes actual generation by fuel type for each 15 minute settlement interval
(see the <a class="reference external" href="http://www.ercot.com/gridinfo/generation/">fuel mix report</a> for more details). The profile of each hydro plant in the
Texas Interconnection is then simply the ratio of the total generation provided by ERCOT
divided by the total hydro capacity available in the Texas Interconnection of the grid
model.</p>
<p>The <a class="reference external" href="https://github.com/Breakthrough-Energy/PreREISE/blob/develop/prereise/gather/hydrodata/eia/demo/texas_hydro_v2_demo.ipynb">texas hydro notebook</a> generates the profile.</p>
</section>
<section id="id25">
<h3><a class="toc-backref" href="#id92" role="doc-backlink"><span class="section-number">6.3.2. </span>Western</a><a class="headerlink" href="#id25" title="Permalink to this heading">¶</a></h3>
<p>Unlike Texas, we don’t have access to hourly (or sub-hourly) total generation by state
or even for the whole Western Interconnection. We rely on three different methods to
derive the shape of the hydro profile in California, Wyoming and the rest of the Western Interconnection.</p>
<ul class="simple">
<li><p><strong>California</strong>: we use the net demand profile as a template. This is supported by data
from California ISO (see <a class="reference external" href="http://www.caiso.com/TodaysOutlook/Pages/default.aspx">CAISO outlook</a>) showing that the hydro generation profile
closely follows the net demand profile.</p></li>
<li><p><strong>Wyoming</strong>: we simply apply a constant shape curve to avoid peak-hour violation of
maximum capacity since hydro generators have a small name plate capacities.</p></li>
<li><p><strong>other region in the Western Interconnection</strong>: we use the aggregated generation of
the top 20 US Army Corps managed hydro dams in Northwestern US (primarily located in
the state of Washington) as the shape of the hydro profile since WA has the most hydro
generation in the Western Interconnection. The data is obtained via the US Army Corps
of Engineers Northwestern Division DataQuery Tool 2.0 (see <a class="reference external" href="https://www.nwd-wc.usace.army.mil/dd/common/dataquery/www/">USACE dataquery</a>).</p></li>
</ul>
<p>The above curves are then normalized such that the monthly sum in each of the above
regions is equal to the total monthly hydro generation divided by the total hydro
capacity available in the grid model for the region. Note that <cite>EIA form 923</cite> provides
the historical monthly total hydro generation by state.</p>
<p>The <a class="reference external" href="https://github.com/Breakthrough-Energy/PreREISE/blob/develop/prereise/gather/hydrodata/eia/demo/western_hydro_v2_demo.ipynb">western hydro notebook</a> generates the profile.</p>
</section>
<section id="id26">
<h3><a class="toc-backref" href="#id93" role="doc-backlink"><span class="section-number">6.3.3. </span>Eastern</a><a class="headerlink" href="#id26" title="Permalink to this heading">¶</a></h3>
<p>Profile generation for the Eastern Interconnection is slightly more complex than for
the Western Interconnection. First, we handle pumped storage hydro (HPS) and
conventional hydro (HYC) separately. Then, in addition to using the net demand profile
to derive the profile of conventional hydro plants in some state as we did for
California, we also use historical hourly total hydro generation time series in some
regions.</p>
<ul class="simple">
<li><p><strong>Pumped Storage Hydro</strong>: We identified hydro plants in our grid model that
are closely located to known HPS site in the Eastern Interconnection and created a
template to describe the hourly energy generation. The plant level profile is
generated considering the local time and daylight-saving schedule of the
corresponding bus location.</p></li>
<li><p><strong>Conventional hydro</strong>: profiles provided by <a class="reference external" href="https://www.iso-ne.com/isoexpress/">ISONE</a>, <a class="reference external" href="http://mis.nyiso.com/public/P-63list.htm">NYISO</a>, <a class="reference external" href="http://dataminer2.pjm.com/feed/gen_by_fuel">PJM</a> and <a class="reference external" href="https://marketplace.spp.org/pages/generation-mix-historical">SPP</a>
are used for plants located within the area they cover. For states that are not at
all covered or partially covered by the 4 ISOs the net demand demand is used as a
template to derive the hydro profile using the same method that has been developed
for California, i.e., the monthly net demand is normalized such that its
sum is equal to the historical monthly total hydro generation (reported in <a class="reference external" href="https://www.eia.gov/electricity/data/eia923/">EIA form
923</a>) divided by the available total hydro capacity in the grid model. Note that for
partially covered states, the historical monthly total hydro generation in the state
is split proportionally to the available total hydro capacity in the grid model for
the state and only the portion outside the ISOs is used during the normalization.</p></li>
</ul>
<p>The <a class="reference external" href="https://github.com/Breakthrough-Energy/PreREISE/blob/develop/prereise/gather/hydrodata/eia/demo/eastern_hydro_v3_demo/eastern_hydro_v3_demo.ipynb">eastern hydro notebook</a> generates the profile.</p>
</section>
</section>
<section id="renewables">
<h2><a class="toc-backref" href="#id94" role="doc-backlink"><span class="section-number">6.4. </span>Renewables</a><a class="headerlink" href="#renewables" title="Permalink to this heading">¶</a></h2>
<section id="solar">
<h3><a class="toc-backref" href="#id95" role="doc-backlink"><span class="section-number">6.4.1. </span>Solar</a><a class="headerlink" href="#solar" title="Permalink to this heading">¶</a></h3>
<section id="the-national-solar-radiation-database">
<h4><a class="toc-backref" href="#id96" role="doc-backlink"><span class="section-number">6.4.1.1. </span>The National Solar Radiation Database</a><a class="headerlink" href="#the-national-solar-radiation-database" title="Permalink to this heading">¶</a></h4>
<p>The <a class="reference external" href="https://nsrdb.nrel.gov/">National Solar Radiation Database</a> (NSRDB) provides
1-hour resolution solar radiation data, ranging from 1998 to 2017, for the entire U.S.
and a growing list of international locations on a 4x4 square kilometer grid. The
<a class="reference external" href="https://nsrdb.nrel.gov/about/u-s-data.html">Physical Solar Model</a> (PSM) v3 is the version of the NSRDB used.</p>
<p>An <a class="reference external" href="https://developer.nrel.gov/docs/solar/nsrdb/guide/">API</a> can be used to fetch the
data. A key is required to access and use the above databases. Get your own API key
<a class="reference external" href="https://developer.nrel.gov/signup/">here</a>.</p>
</section>
<section id="from-solar-irradiance-to-power-output">
<h4><a class="toc-backref" href="#id97" role="doc-backlink"><span class="section-number">6.4.1.2. </span>From Solar Irradiance to Power Output</a><a class="headerlink" href="#from-solar-irradiance-to-power-output" title="Permalink to this heading">¶</a></h4>
<section id="naive">
<h5><a class="toc-backref" href="#id98" role="doc-backlink"><span class="section-number">6.4.1.2.1. </span>Naive</a><a class="headerlink" href="#naive" title="Permalink to this heading">¶</a></h5>
<p>Power output is estimated using a simple normalization procedure. For each solar plant
location in the grid model the hourly Global Horizontal Irradiance (GHI) is divided by
the maximum GHI over the period considered. This procedure is referred to as naive since
other factors can possibly affect the conversion from solar radiation at ground to power
such as the temperature at the site as well as many system configuration including
tracking technology.</p>
</section>
<section id="system-adviser-model">
<h5><a class="toc-backref" href="#id99" role="doc-backlink"><span class="section-number">6.4.1.2.2. </span>System Adviser Model</a><a class="headerlink" href="#system-adviser-model" title="Permalink to this heading">¶</a></h5>
<p>The <a class="reference external" href="https://sam.nrel.gov/">System Adviser Model</a> (SAM) developed by NREL is used to
estimate the power output of a solar plant. Irradiance data along with other
meteorological parameters must first be retrieved from NSRDB for each plant site. This
information is then fed to the SAM Simulation Core (SCC) and the power output is
retrieved. The <a class="reference external" href="https://sam.nrel.gov/software-development-kit-sdk/pysam.html">PySAM</a> Python package provides a wrapper around the SAM library. The
<a class="reference external" href="https://nrel-pysam.readthedocs.io/en/master/modules/Pvwattsv7.html">PVWatts v7</a>
model is used for all the solar plants in the grid. The system size (in DC units) and
the array type (fixed open rack, backtracked, 1-axis and 2-axis) is set for each solar
plant whereas a unique value of 1.25 is used for the DC to AC ratio (see <a class="reference external" href="https://www.eia.gov/todayinenergy/detail.php?id=35372">article</a> from EIA on inverter loading
ratios). Otherwise, all other input parameters of the PVWatts model are set to their
default values. <a class="reference external" href="https://www.eia.gov/electricity/data/eia860/">EIA form 860</a> reports the array type used by each solar PV plant. For
each solar plant in our network, the array type is a combination of the three
technology and calculated via the capacity weighted average of the array type of all
the plants in the EIA form that are located in the same state. If no solar plants are
reported in the form for a particular state, we then consider plants belonging to the
same interconnect.</p>
</section>
</section>
</section>
<section id="wind">
<h3><a class="toc-backref" href="#id100" role="doc-backlink"><span class="section-number">6.4.2. </span>Wind</a><a class="headerlink" href="#wind" title="Permalink to this heading">¶</a></h3>
<section id="rapid-refresh">
<h4><a class="toc-backref" href="#id101" role="doc-backlink"><span class="section-number">6.4.2.1. </span>Rapid Refresh</a><a class="headerlink" href="#rapid-refresh" title="Permalink to this heading">¶</a></h4>
<p><a class="reference external" href="https://rapidrefresh.noaa.gov/">RAP</a> (Rapid Refresh) is the continental-scale NOAA hourly-updated
assimilation/modeling system operational at the National Centers for Environmental
Prediction (NCEP). RAP covers North America and is comprised primarily of a numerical
weather model and an analysis system to initialize that model. RAP provides for every
hour ranging from May 2012 to date, the U and V components of the wind speed at 80 meter
above ground on a 13x13 square kilometer resolution grid every hour. Data can be
retrieved using the <a class="reference external" href="https://www.unidata.ucar.edu/software/thredds/current/tds/reference/NetcdfSubsetServiceReference.html">NetCDF</a> Subset Service.</p>
</section>
<section id="high-resolution-rapid-refresh">
<h4><a class="toc-backref" href="#id102" role="doc-backlink"><span class="section-number">6.4.2.2. </span>High-Resolution Rapid Refresh</a><a class="headerlink" href="#high-resolution-rapid-refresh" title="Permalink to this heading">¶</a></h4>
<p>The <a class="reference external" href="https://rapidrefresh.noaa.gov/hrrr/">HRRR</a> (High-Resolution Rapid Refresh) is a NOAA real-time 3-km resolution,
hourly updated, cloud-resolving, convection-allowing atmospheric model, initialized by
3km grids with 3km radar assimilation. Radar data is assimilated in the HRRR every 15 min
over a 1-h period adding further detail to that provided by the hourly data assimilation
from the 13km radar-enhanced Rapid Refresh. Data can be retrieved from a publicly available
AWS S3 <a class="reference external" href="https://noaa-hrrr-bdp-pds.s3.amazonaws.com/index.html">Bucket</a>.</p>
</section>
<section id="from-wind-speed-to-power-output">
<h4><a class="toc-backref" href="#id103" role="doc-backlink"><span class="section-number">6.4.2.3. </span>From Wind Speed to Power Output</a><a class="headerlink" href="#from-wind-speed-to-power-output" title="Permalink to this heading">¶</a></h4>
<p>Once the U and V components of the wind are converted to a non-directional wind speed
magnitude, this speed is converted to power using wind turbine power curves. Since real
wind farms are not currently mapped to a grid network farms, a capacity-weighted average
wind turbine power curve is created for each state based on the turbine types reported
in <a class="reference external" href="https://www.eia.gov/electricity/data/eia860/">EIA Form 860</a>. The wind turbine curve for each real wind farm is looked up from a
database of curves (or the <em>IEC class 2</em> power curve provided by NREL in the <a class="reference external" href="https://www.nrel.gov/docs/fy14osti/61714.pdf">WIND
documentation</a> is used for turbines without curves in the database), and scaled from
the real hub heights to 80m hub heights using an alpha of 0.15. These height-scaled,
turbine-specific curves are averaged to obtain a state curve translating wind speed to
normalized power. States without wind farms in <a class="reference external" href="https://www.eia.gov/electricity/data/eia860/">EIA Form 860</a> are represented by the
<em>IEC class 2</em> power curve.</p>
<p>Each turbine curve represents the instantaneous power from a single turbine for a given
wind speed. To account for spatio-temporal variations in wind speed (i.e. an hourly
average wind speed that varies through the hour, and a point-specific wind speed that
varies throughout the wind farm), a distribution is used: a normal distribution with
standard deviation of 40% of the average wind speed. This distribution tends to boost
the power produced at lower wind speeds (since the power curve in this region is convex)
and lower the power produced at higher wind speeds (since the power curve in this region
is concave as the turbine tops out, and shuts down at higher wind speeds). This tracks
with the wind-farm level data shown in NREL’s validation report.</p>
</section>
</section>
<section id="resources">
<h3><a class="toc-backref" href="#id104" role="doc-backlink"><span class="section-number">6.4.3. </span>Resources</a><a class="headerlink" href="#resources" title="Permalink to this heading">¶</a></h3>
</section>
<section id="command-line-interface">
<h3><a class="toc-backref" href="#id105" role="doc-backlink"><span class="section-number">6.4.4. </span>Command Line Interface</a><a class="headerlink" href="#command-line-interface" title="Permalink to this heading">¶</a></h3>
<p>Wind and solar data can be downloaded via our download manager python script. When in
the terminal at the project root directory, you can run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>prereise.cli.download.download_manager<span class="w"> </span>-h
usage:<span class="w"> </span>download_manager.py<span class="w"> </span><span class="o">[</span>-h<span class="o">]</span><span class="w"> </span><span class="o">{</span>wind_data_rap,solar_data_ga,solar_data_nsrdb<span class="o">}</span><span class="w"> </span>...

positional<span class="w"> </span>arguments:
<span class="w">  </span><span class="o">{</span>wind_data_rap,solar_data_ga,solar_data_nsrdb<span class="o">}</span>
<span class="w">    </span>wind_data_rap<span class="w">       </span>Download<span class="w"> </span>wind<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>National<span class="w"> </span>Centers<span class="w"> </span><span class="k">for</span><span class="w"> </span>Environmental<span class="w"> </span>Prediction
<span class="w">    </span>solar_data_ga<span class="w">       </span>Download<span class="w"> </span>solar<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>Gridded<span class="w"> </span>Atmospheric<span class="w"> </span>Wind<span class="w"> </span>Integration<span class="w"> </span>National<span class="w"> </span>Dataset<span class="w"> </span>Toolkit
<span class="w">    </span>solar_data_nsrdb<span class="w">    </span>Download<span class="w"> </span>solar<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>National<span class="w"> </span>Solar<span class="w"> </span>Radiation<span class="w"> </span>Database

optional<span class="w"> </span>arguments:
-h,<span class="w"> </span>--help<span class="w">            </span>show<span class="w"> </span>this<span class="w"> </span><span class="nb">help</span><span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>
</pre></div>
</div>
<p>Currently supported data sources to download from are:</p>
<ul class="simple">
<li><p>Rapid Refresh from National Centers for Environmental Prediction:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>prereise.cli.download.download_manager<span class="w"> </span>wind_data_rap<span class="w"> </span><span class="se">\</span>
--region<span class="w"> </span>REGION<span class="w"> </span><span class="se">\</span>
--start_date<span class="w"> </span>START_DATE<span class="w"> </span><span class="se">\</span>
--end_date<span class="w"> </span>END_DATE<span class="w"> </span><span class="se">\</span>
--file_path<span class="w"> </span>FILEPATH
</pre></div>
</div>
<ul class="simple">
<li><p>Gridded Atmospheric Wind Integration National Dataset Toolkit:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">prereise</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">download</span><span class="o">.</span><span class="n">download_manager</span> <span class="n">solar_data_ga</span> \
    <span class="o">--</span><span class="n">region</span> <span class="n">REGION</span> \
    <span class="o">--</span><span class="n">start_date</span> <span class="n">START_DATE</span> \
    <span class="o">--</span><span class="n">end_date</span> <span class="n">END_DATE</span> \
    <span class="o">--</span><span class="n">file_path</span> <span class="n">FILEPATH</span> \
    <span class="o">--</span><span class="n">key</span> <span class="n">API_KEY</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The National Solar Radiation Database:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">prereise</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">download</span><span class="o">.</span><span class="n">download_manager</span> <span class="n">solar_data_nsrdb</span> \
    <span class="o">--</span><span class="n">region</span> <span class="n">REGION</span> \
    <span class="o">--</span><span class="n">method</span> <span class="n">METHOD</span> \
    <span class="o">--</span><span class="n">year</span> <span class="n">YEAR</span> \
    <span class="o">--</span><span class="n">file_path</span> <span class="n">FILEPATH</span> \
    <span class="o">--</span><span class="n">email</span> <span class="n">EMAIL</span> \
    <span class="o">--</span><span class="n">key</span> <span class="n">API_KEY</span>
</pre></div>
</div>
<p>As a concrete example, if you would like to download the wind data from Rapid Refresh
from National Centers for Environmental Prediction for the Texas and Western
interconnections between the dates of June 5th, 2020 and January 2nd, 2021 into
<code class="docutils literal notranslate"><span class="pre">data.pkl</span></code>, you can run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>prereise.cli.download.download_manager<span class="w"> </span>wind_data_rap<span class="w"> </span><span class="se">\</span>
--region<span class="w"> </span>Texas<span class="w"> </span><span class="se">\</span>
--region<span class="w"> </span>Western<span class="w"> </span><span class="se">\</span>
--start_date<span class="w"> </span><span class="m">2020</span>-05-06<span class="w"> </span><span class="se">\</span>
--end_date<span class="w"> </span><span class="m">2021</span>-01-02<span class="w"> </span><span class="se">\</span>
--file_path<span class="w"> </span>./data.pkl
</pre></div>
</div>
<p>Note that missing data, if existing, will be imputed using a naive Gaussian algorithm.
This can be avoided using the <code class="docutils literal notranslate"><span class="pre">--no_impute</span></code> flag.</p>
</section>
<section id="notebooks">
<h3><a class="toc-backref" href="#id106" role="doc-backlink"><span class="section-number">6.4.5. </span>Notebooks</a><a class="headerlink" href="#notebooks" title="Permalink to this heading">¶</a></h3>
<p>The <a class="reference external" href="https://github.com/Breakthrough-Energy/PreREISE/blob/develop/prereise/gather/winddata/rap/demo/rap_demo.ipynb">RAP notebook</a> fetches the data, imputes missing data and generates a profile.</p>
<p>The <a class="reference external" href="https://github.com/Breakthrough-Energy/PreREISE/blob/develop/prereise/gather/solardata/nsrdb/demo/nsrdb_sam_demo.ipynb">NSRDB SAM notebook</a> generates a solar profile by feeding the NSRDB data to
SAM while the <a class="reference external" href="https://github.com/Breakthrough-Energy/PreREISE/blob/develop/prereise/gather/solardata/nsrdb/demo/nsrdb_naive_demo.ipynb">NSRDB naive notebook</a> uses the naive method.</p>
<p>The <a class="reference external" href="https://github.com/Breakthrough-Energy/PreREISE/blob/develop/prereise/gather/solardata/ga_wind/demo/ga_wind_demo.ipynb">GA WIND naive notebook</a> generates solar profiles by applying the naive method to
the Gridded Atmospheric Wind Integration National Dataset.</p>
</section>
<section id="bibliography">
<h3><a class="toc-backref" href="#id107" role="doc-backlink"><span class="section-number">6.4.6. </span>Bibliography</a><a class="headerlink" href="#bibliography" title="Permalink to this heading">¶</a></h3>
<div class="docutils container" id="id33">
<div class="citation" id="id36" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id10">2</a>,<a role="doc-backlink" href="#id11">3</a>)</span>
<p>US Department of Transportation. Transportation and health indicators. https://www7.transportation.gov/transportation-health-tool/indicators. Accessed Jun. 21, 2022.</p>
</div>
<div class="citation" id="id37" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id2">1</a>,<a role="doc-backlink" href="#id9">2</a>,<a role="doc-backlink" href="#id12">3</a>,<a role="doc-backlink" href="#id13">4</a>)</span>
<p>US Census Bureau. 2010 census urban and rural classification and urban area criteria. https://www.census.gov/programs-surveys/geography/guidance/geo-areas/urban-rural/2010-urban-rural.html. Accessed Jun. 21, 2022.</p>
</div>
<div class="citation" id="id40" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id3">1</a>,<a role="doc-backlink" href="#id14">2</a>)</span>
<p>US Environmental Protection Agency. Moves and other mobile source emissions models. https://www.epa.gov/moves. Accessed Jun. 21, 2022.</p>
</div>
<div class="citation" id="id38" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id4">1</a>,<a role="doc-backlink" href="#id8">2</a>,<a role="doc-backlink" href="#id16">3</a>)</span>
<p>US Census Bureau. Electric technology adoption and energy consumption | nrel data catalog. https://data.nrel.gov/submissions/92. Accessed Jun. 21, 2022.</p>
</div>
<div class="citation" id="id35" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">5</a><span class="fn-bracket">]</span></span>
<p>B. Tarroja K. Forest, M. Mac Kinnon and S. Samuelsen. Estimating the technical feasibility of fuel cell and battery electric vehicles for the medium and heavy duty sectors in california. <em>Applied Energy</em>, 276:115439, 2020. URL: <a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S030626192030951X">https://www.sciencedirect.com/science/article/pii/S030626192030951X</a>, <a class="reference external" href="https://doi.org/https://doi.org/10.1016/j.apenergy.2020.115439">doi:https://doi.org/10.1016/j.apenergy.2020.115439</a>.</p>
</div>
<div class="citation" id="id39" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id18">6</a><span class="fn-bracket">]</span></span>
<p>P. Jadun et al. <em>Electrification Futures Study: End-Use Electric Technology Cost and Performance Projections through 2050</em>. National Renewable Energy Laboratory, Golden, CO: National Renewable Energy Laboratory. NREL/TP-6A20-70485. Accessed April 2, 2018.</p>
</div>
<div class="citation" id="id34" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id19">7</a><span class="fn-bracket">]</span></span>
<p>L. Zhang. <em>Charging infrastructure optimization for plug-in electric vehicles</em>. PhD thesis, UC Irvine, 2014. Retrieved from https://escholarship.org/uc/item/0199j451, Accessed June 21, 2017.</p>
</div>
</div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/img/BE_Sciences_RGB_Horizontal_Color.svg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Modeling a clean energy future for the United States</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Breakthrough-Energy&repo=docs&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user/installation_guide.html">1. Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../communication/code_of_conduct.html">2. Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/contribution_guide.html">3. Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/git_guide.html">4. Working with Git/GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powersimdata/index.html">5. PowerSimData</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6. PreREISE</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#general-comments">6.1. General Comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#demand">6.2. Demand</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#historical">6.2.1. Historical</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transportation-electrification">6.2.2. Transportation Electrification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nrel-electrification-futures-study-demand-and-flexibility-data">6.2.3. NREL Electrification Futures Study Demand and Flexibility Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#hydro">6.3. Hydro</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id24">6.3.1. Texas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id25">6.3.2. Western</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id26">6.3.3. Eastern</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#renewables">6.4. Renewables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#solar">6.4.1. Solar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wind">6.4.2. Wind</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resources">6.4.3. Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#command-line-interface">6.4.4. Command Line Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#notebooks">6.4.5. Notebooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bibliography">6.4.6. Bibliography</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../postreise/index.html">7. PostREISE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reisejl/index.html">8. REISE.jl</a></li>
</ul>

<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../powersimdata/index.html" title="previous chapter"><span class="section-number">5. </span>PowerSimData</a></li>
      <li>Next: <a href="../postreise/index.html" title="next chapter"><span class="section-number">7. </span>PostREISE</a></li>
  </ul></li>
</ul><h3>Useful Links</h3>
<ul>
  <li><a href="https://www.breakthroughenergy.org/">Breakthrough Energy</a></li>
  <li><a href="https://science.breakthroughenergy.org/">Breakthrough Energy Sciences</a></li>
  <li><a href="https://arxiv.org/abs/2002.06155">publication</a></li>
  <li><a href="https://zenodo.org/record/3530898">data @ zenodo</a></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><ul>
<h3>Code</h3>
<a href="../py-modindex.html">Module Index</a>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Breakthrough Energy Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/prereise/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>