
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>8. REISE.jl &#8212; documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="shortcut icon" href="../_static/favicon.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="7. PostREISE" href="../postreise/index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="reise-jl">
<h1><span class="section-number">8. </span>REISE.jl<a class="headerlink" href="#reise-jl" title="Permalink to this heading">¶</a></h1>
<p>REISE.jl (Renewable Energy Integration Simulation Engine) is the simulation engine
developed by BES to run power-flow studies in the U.S. electric grid. REISE.jl is an
open-source package written in Julia that is available on <a class="reference external" href="https://github.com/Breakthrough-Energy/REISE.jl">GitHub</a>. It can be interfaced with the BES
software ecosystem (see <a class="reference external" href="https://github.com/Breakthrough-Energy/PowerSimData">PowerSimData</a>) or used in a standalone mode.
In both cases you will need an external optimization solver to solve the DCOPF problem.</p>
<p>You will find in this documentation all the information needed to install this package
and use it. We also provide the formulation of the objective function along with
its constraints.</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#system-requirements" id="id9">System Requirements</a></p></li>
<li><p><a class="reference internal" href="#installation" id="id10">Installation</a></p>
<ul>
<li><p><a class="reference internal" href="#native-installation" id="id11">Native Installation</a></p>
<ul>
<li><p><a class="reference internal" href="#julia" id="id12">Julia</a></p></li>
<li><p><a class="reference internal" href="#gurobi" id="id13">Gurobi</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id14">REISE.jl</a></p></li>
<li><p><a class="reference internal" href="#python" id="id15">Python</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#docker" id="id16">Docker</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id17">Usage</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id18">Julia</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id19">Python</a></p>
<ul>
<li><p><a class="reference internal" href="#running-a-simulation" id="id20">Running a simulation</a></p></li>
<li><p><a class="reference internal" href="#extracting-simulation-results" id="id21">Extracting Simulation Results</a></p></li>
<li><p><a class="reference internal" href="#compatibility-with-our-software-ecosystem" id="id22">Compatibility with our Software Ecosystem</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#formulation" id="id23">Formulation</a></p>
<ul>
<li><p><a class="reference internal" href="#sets" id="id24">Sets</a></p>
<ul>
<li><p><a class="reference internal" href="#subsets" id="id25">Subsets</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#variables" id="id26">Variables</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id27">Parameters</a></p></li>
<li><p><a class="reference internal" href="#constraints" id="id28">Constraints</a></p></li>
<li><p><a class="reference internal" href="#objective-function" id="id29">Objective Function</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="system-requirements">
<h2><a class="toc-backref" href="#id9" role="doc-backlink"><span class="section-number">8.1. </span>System Requirements</a><a class="headerlink" href="#system-requirements" title="Permalink to this heading">¶</a></h2>
<p>Large simulations can require significant amounts of RAM. The amount of necessary RAM
is proportional to both the size of the electric grid and the duration of the interval
considered for the simulation.</p>
<p>As a general estimate, 1-2 GB of RAM is needed per hour in the interval in a simulation
across the entire USA grid. For example, a 24-hour interval would require 24-48 GB of
RAM; if only 16 GB of RAM is available, consider using a time interval of 8 hours or
less as that would take 8-16 GB of RAM.</p>
<p>The memory necessary would also be proportional to the size of grid used. Since the
Western interconnect is roughly 8 times smaller than the entire USA grid, a simulation
ran in this interconnect with a 24-hour interval would require ~3-6 GB of RAM.</p>
</section>
<section id="installation">
<h2><a class="toc-backref" href="#id10" role="doc-backlink"><span class="section-number">8.2. </span>Installation</a><a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h2>
<p>There are two options, either install all the dependencies yourself or setup the engine
within a Docker image. Whatever option you choose, you will need an external solver to
run optimizations. We recommend <a class="reference external" href="https://www.gurobi.com">Gurobi</a>, though any other solver compatible with
<a class="reference external" href="https://jump.dev/JuMP.jl/stable/">JuMP</a> can be used. Note that <a class="reference external" href="https://www.gurobi.com">Gurobi</a> is a commercial solver and hence a license
file is required. This may be either a local license, a cloud license or a free license
for academic use. Check their <a class="reference external" href="https://www.python.org/dev/peps/pep-0257/">Software Downloads and License Center</a> page for more details.</p>
<p>Start by cloning the repository locally:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/Breakthrough-Energy/REISE.jl
</pre></div>
</div>
<p>You will also need to download some input data in order to run simulations. Sample
data are available on <a class="reference external" href="https://zenodo.org/record/3530898">Zenodo</a>. You will find there hourly time series for the
hydro/solar/wind generators and a MAT-file enclosing all the information related to the
electrical grid in accordance with the <a class="reference external" href="https://matpower.org/">MATPOWER</a> case file format.</p>
<section id="native-installation">
<h3><a class="toc-backref" href="#id11" role="doc-backlink"><span class="section-number">8.2.1. </span>Native Installation</a><a class="headerlink" href="#native-installation" title="Permalink to this heading">¶</a></h3>
<p>Installation will depend on your operating system. Some examples are provided for
Unix-like platforms.</p>
<section id="julia">
<h4><a class="toc-backref" href="#id12" role="doc-backlink"><span class="section-number">8.2.1.1. </span>Julia</a><a class="headerlink" href="#julia" title="Permalink to this heading">¶</a></h4>
<p>Download Julia 1.5 and install it following the instructions located on their
<a class="reference external" href="https://julialang.org/downloads/platform/">Platform Specific Instructions for Official Binaries</a> page. This should be straightforward:</p>
<ul>
<li><p>Choose a destination directory. For shared installation, <code class="code highlight bash docutils literal highlight-bash">/opt</code> is recommended.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /opt
</pre></div>
</div>
</li>
<li><p>Download and unzip the package in the chosen directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget -q https://julialang-s3.julialang.org/bin/linux/x64/1.5/julia-1.5.3-linux-x86_64.tar.gz
tar -xf julia-1.5.3-linux-x86_64.tar.gz
</pre></div>
</div>
</li>
<li><p>Expand the <code class="code highlight bash docutils literal highlight-bash">PATH</code> environment variable. For bash users edit the <strong>.bashrc</strong>
file in your <code class="code highlight bash docutils literal highlight-bash"><span class="nv">$HOME</span></code> folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">:/opt/julia-1.5.3/bin&quot;</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="gurobi">
<h4><a class="toc-backref" href="#id13" role="doc-backlink"><span class="section-number">8.2.1.2. </span>Gurobi</a><a class="headerlink" href="#gurobi" title="Permalink to this heading">¶</a></h4>
<p>If you plan on using <a class="reference external" href="https://www.gurobi.com">Gurobi</a> as a solver, you will need to download and install it
first so it can be accessed by <a class="reference external" href="https://jump.dev/JuMP.jl/stable/">Jump</a>. Installation of Gurobi depends on both the
operating system and the license type. Detailed instructions can be found in the
<a class="reference external" href="https://www.gurobi.com/documentation/quickstart.html">Gurobi Installation Guide</a>.
For Unix-like platforms, this will look like:</p>
<ul>
<li><p>Choose a destination directory. For shared installation, <code class="code highlight bash docutils literal highlight-bash">/opt</code> is recommended.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /opt
</pre></div>
</div>
</li>
<li><p>Download and unzip the package in the chosen directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget https://packages.gurobi.com/9.1/gurobi9.1.0_linux64.tar.gz
tar -xvfz gurobi9.1.0_linux64.tar.gz
</pre></div>
</div>
<p>This will create the <code class="code highlight bash docutils literal highlight-bash">/opt/gurobi910/linux64</code> subdirectory in which the
complete distribution is located.</p>
</li>
<li><p>Set environments variables. For bash users edit the <strong>.bashrc</strong> file in your
<code class="code highlight bash docutils literal highlight-bash"><span class="nv">$HOME</span></code> folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">GUROBI_HOME</span><span class="o">=</span><span class="s2">&quot;/opt/gurobi910/linux64&quot;</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GUROBI_HOME</span><span class="si">}</span><span class="s2">/bin&quot;</span>
<span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GUROBI_HOME</span><span class="si">}</span><span class="s2">/lib&quot;</span>
</pre></div>
</div>
</li>
<li><p>The Gurobi license needs to be download and installed. Download a copy of your Gurobi
license from the account portal, and copy it into the parent directory of
<code class="code highlight bash docutils literal highlight-bash"><span class="nv">$GUROBI_HOME</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> gurobi.lic /opt/gurobi910/gurobi.lic
</pre></div>
</div>
</li>
</ul>
<p>To verify that Gurobi is properly installed, run the <strong>gurobi.sh</strong> shell script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.<span class="nv">$GUROBI_HOME</span>/bin/gurobi.sh
</pre></div>
</div>
</section>
<section id="id1">
<h4><a class="toc-backref" href="#id14" role="doc-backlink"><span class="section-number">8.2.1.3. </span>REISE.jl</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h4>
<p>The package will need to be added to each user’s default Julia environment. This can be
done by launching Julia and typing <code class="docutils literal notranslate"><span class="pre">]</span></code> to access the <code class="docutils literal notranslate"><span class="pre">Pkg</span></code> (the built-in package
manager) REPL environment that easily allows operations such as installing, updating
and removing packages.</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="w">               </span><span class="n">_</span><span class="w"></span>
<span class="w">   </span><span class="n">_</span><span class="w">       </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="n">_</span><span class="w">     </span><span class="o">|</span><span class="w">  </span><span class="n">Documentation</span><span class="o">:</span><span class="w"> </span><span class="n">https</span><span class="o">://</span><span class="n">docs</span><span class="o">.</span><span class="n">julialang</span><span class="o">.</span><span class="n">org</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="w">   </span><span class="n">_</span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="n">_</span><span class="w">  </span><span class="n">__</span><span class="w"> </span><span class="n">_</span><span class="w">   </span><span class="o">|</span><span class="w">  </span><span class="kt">Type</span><span class="w"> </span><span class="s">&quot;?&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">help</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;]?&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Pkg</span><span class="w"> </span><span class="n">help</span><span class="o">.</span><span class="w"></span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|/</span><span class="w"> </span><span class="sa">_</span><span class="sb">` |  |</span>
<span class="sb">  | | |_| | | | (_| |  |  Version 1.5.3 (2020-11-09)</span>
<span class="sb"> _/ |\__&#39;_|_|_|\__&#39;_|  |  Official https://julialang.org/ release</span>
<span class="sb">|__/                   |</span>

<span class="sb">julia&gt; ]</span>

<span class="sb">pkg&gt;</span>
</pre></div>
</div>
<p>From here, we recommend that you create an environment and install the dependencies
in the same state specified in the manifest (<strong>Manifest.toml</strong>):</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">activate</span><span class="w"> </span><span class="o">/</span><span class="n">PATH</span><span class="o">/</span><span class="n">TO</span><span class="o">/</span><span class="n">REISE</span><span class="o">.</span><span class="n">jl</span><span class="w"></span>
<span class="n">instantiate</span><span class="w"></span>
</pre></div>
</div>
<p>Note that the Julia packages for the user’s desired solvers need to be installed
separately. For instance, if you want to use GLPK, the GNU Linear Programming Kit
library, you will need to run:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="n">Pkg</span><span class="w"></span>
<span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;GLPK&quot;</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Then, create a <code class="code highlight bash docutils literal highlight-bash">JULIA_PROJECT</code> environment variable that points to
<code class="code highlight bash docutils literal highlight-bash">PATH/TO/REISE.jl</code>.</p>
<p>To verify that the package has been successfully installed, open a new instance of
Julia and verify that the REISE package can load without any errors with the following
command:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="n">REISE</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="python">
<h4><a class="toc-backref" href="#id15" role="doc-backlink"><span class="section-number">8.2.1.4. </span>Python</a><a class="headerlink" href="#python" title="Permalink to this heading">¶</a></h4>
<p>We strongly recommend that you install Python in order to be able to use the command
line interface we developed to run simulations but most importantly to extract the data
generated by the simulation.</p>
<p>The scripts located in <code class="docutils literal notranslate"><span class="pre">pyreisejl</span></code> depend on several packages. Those are specified
in the <strong>requirements.txt</strong>, file and can be installed using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -r requirements.txt
</pre></div>
</div>
<p>To verify that the Python scripts can successfully run, open a Python interpreter and
run the following commands:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">julia.api</span> <span class="kn">import</span> <span class="n">Julia</span>
<span class="n">Julia</span><span class="p">(</span><span class="n">compiled_modules</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">julia</span> <span class="kn">import</span> <span class="n">REISE</span>
</pre></div>
</div>
<p>Note that the final import of REISE may take a couple of minutes to complete.</p>
</section>
</section>
<section id="docker">
<h3><a class="toc-backref" href="#id16" role="doc-backlink"><span class="section-number">8.2.2. </span>Docker</a><a class="headerlink" href="#docker" title="Permalink to this heading">¶</a></h3>
<p>The easiest way to setup this engine is within a Docker image.</p>
<p>There is an included <strong>Dockerfile</strong> that can be used to build the Docker image. With
the Docker daemon installed and running, do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker build . -t reisejl
</pre></div>
</div>
<p>To run the Docker image, you will need to mount two volumes; one containing the Gurobi
license file and another containing the necessary input files for the engine.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -it -v /LOCAL/PATH/TO/GUROBI.LIC:/usr/share/gurobi_license -v /LOCAL/PATH/TO/INPUT/DATA:/usr/share/data reisejl bash
</pre></div>
</div>
<p>You are ready to run simulation as demonstrated in the <a class="reference internal" href="usage.html"><span class="doc">Usage</span></a> section.</p>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id17" role="doc-backlink"><span class="section-number">8.3. </span>Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p>REISE.jl can be used within the Julia interpreter or through the Python scripts.</p>
<section id="id2">
<h3><a class="toc-backref" href="#id18" role="doc-backlink"><span class="section-number">8.3.1. </span>Julia</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<p>After the installation, the REISE package is registered and can be imported using
<code class="code highlight julia docutils literal highlight-julia"><span class="k">import</span><span class="w"> </span><span class="n">REISE</span><span class="w"></span></code> to call <code class="code highlight julia docutils literal highlight-julia"><span class="n">REISE</span><span class="o">.</span><span class="n">run_scenario</span><span class="p">()</span><span class="w"></span></code> or <code class="code highlight julia docutils literal highlight-julia"><span class="k">using</span><span class="w"> </span><span class="n">REISE</span><span class="w"></span></code> to
call <code class="code highlight julia docutils literal highlight-julia"><span class="n">run_scenario</span><span class="p">()</span><span class="w"></span></code>.</p>
<p>Running a scenario requires the following inputs:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">interval</span></code>: the length of each simulation interval (hours).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_interval</span></code>: the number of simulation intervals.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start_index</span></code>: the hour to start the simulation, representing the row of the time-
series profiles in <strong>demand.csv</strong>, <strong>hydro.csv</strong>, <strong>solar.csv</strong>, and <strong>wind.csv</strong>.
Note that unlike some other programming languages, Julia is 1-indexed, so the first
index is 1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inputfolder</span></code>: the directory from which to load input files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">optimizer_factory</span></code>: an argument that can be passed to <code class="docutils literal notranslate"><span class="pre">JuMP.Model</span></code> to create a
new model instance with an attached solver. Be sure to pass the factory itself (e.g.
<code class="docutils literal notranslate"><span class="pre">GLPK.Optimizer</span></code>) rather than an instance (e.g. <code class="docutils literal notranslate"><span class="pre">GLPK.Optimizer()</span></code>). See the
<code class="docutils literal notranslate"><span class="pre">JuMP.Model</span></code> documentation for more information.</p></li>
</ul>
<p>To illustrate, to run a scenario that starts at the 1st hour of the year, runs in 3
intervals of 24 hours each, using input data located in working directory (<code class="docutils literal notranslate"><span class="pre">pwd()</span></code>)
and using the GLPK solver, call:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="k">import</span><span class="w"> </span><span class="n">REISE</span><span class="w"></span>
<span class="w"> </span><span class="k">import</span><span class="w"> </span><span class="n">GLPK</span><span class="w"></span>

<span class="w"> </span><span class="n">REISE</span><span class="o">.</span><span class="n">run_scenario</span><span class="p">(;</span><span class="w"></span>
<span class="w">  </span><span class="n">interval</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="n">n_interval</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">start_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">inputfolder</span><span class="o">=</span><span class="n">pwd</span><span class="p">(),</span><span class="w"></span>
<span class="w">  </span><span class="n">optimizer_factory</span><span class="o">=</span><span class="n">GLPK</span><span class="o">.</span><span class="n">Optimizer</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Optional arguments include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">num_segments</span></code>: the number of piecewise linear segments to use when linearizing
polynomial cost curves (default is 1).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outputfolder</span></code>: a directory in which to store results files. The default is a
subdirectory “output” within the input directory (created if it does not already
exist).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threads</span></code>: the number of threads to be used by the solver. The default is to let
the solver decide.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">solver_kwargs</span></code>: a dictionary of String =&gt; value pairs to be passed to the solver.</p></li>
</ul>
<p>Default settings for running using Gurobi can be accessed if <strong>Gurobi.jl</strong> has already
been imported using the <code class="docutils literal notranslate"><span class="pre">REISE.run_scenario_gurobi</span></code> function:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">REISE</span><span class="w"></span>
<span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">Gurobi</span><span class="w"></span>

<span class="w"> </span><span class="n">REISE</span><span class="o">.</span><span class="n">run_scenario_gurobi</span><span class="p">(;</span><span class="w"></span>
<span class="w">  </span><span class="n">interval</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="n">n_interval</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">start_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">inputfolder</span><span class="o">=</span><span class="n">pwd</span><span class="p">(),</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Optional arguments for <code class="docutils literal notranslate"><span class="pre">REISE.run_scenario</span></code> can still be passed as desired.</p>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id19" role="doc-backlink"><span class="section-number">8.3.2. </span>Python</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<p>There are two main Python scripts included in <code class="docutils literal notranslate"><span class="pre">pyreisejl</span></code>:</p>
<ul class="simple">
<li><p><strong>pyreisejl/utility/call.py</strong></p></li>
<li><p><strong>pyreisejl/utility/extract_data.py</strong></p></li>
</ul>
<p>The first of these scripts transforms more descriptive input parameters into the ones
necessary for the Julia engine while also performing some additional input validation.
The latter, which can be set to automatically occur after the simulation has completed,
extracts key metrics from the resulting <strong>.mat</strong> files to <strong>.pkl</strong> files.</p>
<section id="running-a-simulation">
<h4><a class="toc-backref" href="#id20" role="doc-backlink"><span class="section-number">8.3.2.1. </span>Running a simulation</a><a class="headerlink" href="#running-a-simulation" title="Permalink to this heading">¶</a></h4>
<p>A simulation can be run as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyreisejl/utility/call.py -s <span class="s1">&#39;2016-01-01&#39;</span> -e <span class="s1">&#39;2016-01-07&#39;</span> -int <span class="m">24</span> -i <span class="s1">&#39;/PATH/TO/INPUT/DATA&#39;</span>
</pre></div>
</div>
<p>It will solve the DCOPF problem in our grid model by interval of 24h using hourly data
located in <code class="code highlight bash docutils literal highlight-bash">/PATH/TO/INPUT/DATA</code> from January 1st to January 7th 2016. Note that
the start and end dates need to match dates contained in the input profiles (demand,
hydro, solar, wind). By default Gurobi will be used as the solver and the output data
(<strong>.mat</strong> files) will be saved in an <code class="code highlight bash docutils literal highlight-bash">output</code> folder created in the given input
directory.</p>
<p>The full list of arguments can be accessed via <code class="code highlight bash docutils literal highlight-bash">pyreisejl/utility/call.py --help</code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>usage: call.py [-h] [-s START_DATE] [-e END_DATE] [-int INTERVAL] [-i INPUT_DIR]
[-x EXECUTE_DIR] [-t THREADS] [-d] [-o OUTPUT_DIR] [-m MATLAB_DIR] [-k]
[--solver SOLVER] [-j JULIA_ENV] [-l LINEARIZATION_SEGMENTS]
[scenario_id]

Run REISE.jl simulation.

positional arguments:
   scenario_id           Scenario ID only if using PowerSimData.

optional arguments:
   -h, --help            show this help message and exit
   -s START_DATE, --start-date START_DATE
                         The start date for the simulation in format &#39;YYYY-MM-DD&#39;,
                         &#39;YYYY-MM-DD HH&#39;, &#39;YYYY-MM-DD HH:MM&#39;, or &#39;YYYY-MM-DD
                         HH:MM:SS&#39;.
   -e END_DATE, --end-date END_DATE
                         The end date for the simulation in format &#39;YYYY-MM-DD&#39;,
                         &#39;YYYY-MM-DD HH&#39;, &#39;YYYY-MM-DD HH:MM&#39;, or &#39;YYYY-MM-DD
                         HH:MM:SS&#39;. If only the date is specified (without any
                         hours), the entire end-date will be included in the
                         simulation.
   -int INTERVAL, --interval INTERVAL
                         The length of each interval in hours.
   -i INPUT_DIR, --input-dir INPUT_DIR
                         The directory containing the input data files. Required
                         files are &#39;case.mat&#39;, &#39;demand.csv&#39;, &#39;hydro.csv&#39;,
                         &#39;solar.csv&#39;, and &#39;wind.csv&#39;.
   -x EXECUTE_DIR, --execute-dir EXECUTE_DIR
                         The directory to store the results. This is optional and
                         defaults to an execute folder that will be created in the
                         input directory if it does not exist.
   -t THREADS, --threads THREADS
                         The number of threads to run the simulation with. This is
                         optional and defaults to Auto.
   -d, --extract-data    If this flag is used, the data generated by the simulation
                         after the engine has finished running will be automatically
                         extracted into .pkl files, and the result.mat files
                         will be deleted. The extraction process can be memory
                         intensive. This is optional and defaults to False if the
                         flag is omitted.
   -o OUTPUT_DIR, --output-dir OUTPUT_DIR
                         The directory to store the extracted data. This is optional
                         and defaults to the execute directory. This flag is only
                         used if the extract-data flag is set.
   -m MATLAB_DIR, --matlab-dir MATLAB_DIR
                         The directory to store the modified case.mat used by the
                         engine. This is optional and defaults to the execute
                         directory. This flag is only used if the extract-data flag
                         is set.
   -k, --keep-matlab     The result.mat files found in the execute directory will be
                         kept instead of deleted after extraction. This flag is only
                         used if the extract-data flag is set.
   --solver SOLVER       Specify the solver to run the optimization. Will default to
                         gurobi. Current solvers available are clp, glpk and gurobi.
   -j JULIA_ENV, --julia-env JULIA_ENV
                         The path to the julia environment within which to run
                         REISE.jl. This is optional and defaults to the default
                         julia environment.
   -l LINEARIZATION_SEGMENTS, --linearization-segments LINEARIZATION_SEGMENTS
                         The number of piecewise linear segments used to linearize
                         cost curves. This is optional and defaults to one.
</pre></div>
</div>
<p>As you can see, it is possible to save the output <strong>.mat</strong> files to a different
directory through <code class="docutils literal notranslate"><span class="pre">--execute-dir</span></code>. Also, different solvers can be used (<code class="docutils literal notranslate"><span class="pre">--solver</span></code>).</p>
<p>There is another optional flag that specifies the number of threads to use for the
simulation run in Gurobi (<code class="docutils literal notranslate"><span class="pre">--threads</span></code>). If the number of threads specified is higher
than the number of logical processor count available, a warning will be generated but
the simulation will still run.</p>
<p>Finally, you can use <code class="docutils literal notranslate"><span class="pre">--extract-data</span></code> to automatically extract the data after a
simulation run without having to manually initiate it. Note that the extraction process
can be memory intensive</p>
</section>
<section id="extracting-simulation-results">
<h4><a class="toc-backref" href="#id21" role="doc-backlink"><span class="section-number">8.3.2.2. </span>Extracting Simulation Results</a><a class="headerlink" href="#extracting-simulation-results" title="Permalink to this heading">¶</a></h4>
<p>After the simulation has completed and if the <code class="docutils literal notranslate"><span class="pre">--extract-data</span></code> is set in the
<strong>call.py</strong> script, the extraction can be run using the same start and end dates as
were used to run the simulation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyreisejl/utility/extract_data.py -s <span class="s1">&#39;2016-01-01&#39;</span> -e <span class="s1">&#39;2016-01-07&#39;</span> -x <span class="s1">&#39;/PATH/TO/OUTPUT/DATA&#39;</span>
</pre></div>
</div>
<p>The full list of arguments can be accessed via
<code class="code highlight bash docutils literal highlight-bash">pyreisejl/utility/extract-data.py --help</code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>usage: extract_data.py [-h] [-s START_DATE] [-e END_DATE] [-x EXECUTE_DIR] [-o [OUTPUT_DIR]] [-m [MATLAB_DIR]] [-f [FREQUENCY]] [-k] [scenario_id]

Extract data from the results of the REISE.jl simulation.

positional arguments:
   scenario_id           Scenario ID only if using PowerSimData.

optional arguments:
   -h, --help            show this help message and exit
   -s START_DATE, --start-date START_DATE
                         The start date as provided to run the simulation. Supported
                         formats are &#39;YYYY-MM-DD&#39;, &#39;YYYY-MM-DD HH&#39;, &#39;YYYY-MM-DD
                         HH:MM&#39;, or &#39;YYYY-MM-DD HH:MM:SS&#39;.
   -e END_DATE, --end-date END_DATE
                         The end date as provided to run the simulation. Supported
                         formats are &#39;YYYY-MM-DD&#39;, &#39;YYYY-MM-DD HH&#39;, &#39;YYYY-MM-DD
                         HH:MM&#39;, or &#39;YYYY-MM-DD HH:MM:SS&#39;.
   -x EXECUTE_DIR, --execute-dir EXECUTE_DIR
                         The directory where the REISE.jl results are stored.
   -o [OUTPUT_DIR], --output-dir [OUTPUT_DIR]
                         The directory to store the results. This is optional and
                         defaults to the execute directory.
   -m [MATLAB_DIR], --matlab-dir [MATLAB_DIR]
                         The directory to store the modified case.mat used by the
                         engine. This is optional and defaults to the execute
                         directory.
   -f [FREQUENCY], --frequency [FREQUENCY]
                         The frequency of data points in the original profile csvs
                         as a Pandas frequency string. This is optional and defaults
                         to an hour.
   -k, --keep-matlab     If this flag is used, the result.mat files found in the
                         execute directory will be kept instead of deleted.
</pre></div>
</div>
<p>When manually running the extract_data process, the script assumes the frequency of the
input profiles are hourly and will construct the timestamps for the resulting data
accordingly. If a different frequency was used for the input data, it must be specified
via <code class="docutils literal notranslate"><span class="pre">--frequency</span></code>. Also, other parameters can be invoked to handle output data.</p>
<p>When the script has finished running, the following <strong>.pkl</strong> files will be available:</p>
<ul class="simple">
<li><p><strong>PF.pkl</strong> (power flow)</p></li>
<li><p><strong>PG.pkl</strong> (power generated)</p></li>
<li><p><strong>LMP.pkl</strong> (locational marginal price)</p></li>
<li><p><strong>CONGU.pkl</strong> (congestion, upper flow limit)</p></li>
<li><p><strong>CONGL.pkl</strong> (congestion, lower flow limit)</p></li>
<li><p><strong>AVERAGED_CONG.pkl</strong> (time averaged congestion)</p></li>
</ul>
<p>If the grid used in the simulation contains DC lines, energy storage devices, or
flexible demand resources, the following files will also be extracted as necessary:</p>
<ul class="simple">
<li><p><strong>PF_DCLINE.pkl</strong> (power flow on DC lines)</p></li>
<li><p><strong>STORAGE_PG.pkl</strong> (power generated by storage units)</p></li>
<li><p><strong>STORAGE_E.pkl</strong> (energy state of charge)</p></li>
<li><p><strong>LOAD_SHIFT_DN.pkl</strong> (demand that is curtailed)</p></li>
<li><p><strong>LOAD_SHIFT_UP.pkl</strong> (demand that is added)</p></li>
</ul>
<p>If one or more intervals of the simulation were found to be infeasible without shedding
load, the following file will also be extracted:</p>
<ul class="simple">
<li><p><strong>LOAD_SHED.pkl</strong> (load shed profile for each load bus)</p></li>
</ul>
</section>
<section id="compatibility-with-our-software-ecosystem">
<h4><a class="toc-backref" href="#id22" role="doc-backlink"><span class="section-number">8.3.2.3. </span>Compatibility with our Software Ecosystem</a><a class="headerlink" href="#compatibility-with-our-software-ecosystem" title="Permalink to this heading">¶</a></h4>
<p>Both <strong>pyreisejl/utility/call.py</strong> and <strong>pyreisejl/utility/extract_data.py</strong> can be
called using a positional argument that corresponds to a scenario id as generated by
<a class="reference external" href="https://github.com/Breakthrough-Energy/PowerSimData">PowerSimData</a>. Using this
invocation assumes you have installed our software ecosystem. See <a class="reference external" href="https://breakthrough-energy.github.io/docs/user/installation_guide.html">Installation Guide</a> ) if you
are interested.</p>
</section>
</section>
</section>
<section id="formulation">
<h2><a class="toc-backref" href="#id23" role="doc-backlink"><span class="section-number">8.4. </span>Formulation</a><a class="headerlink" href="#formulation" title="Permalink to this heading">¶</a></h2>
<section id="sets">
<h3><a class="toc-backref" href="#id24" role="doc-backlink"><span class="section-number">8.4.1. </span>Sets</a><a class="headerlink" href="#sets" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(B\)</span>: Set of buses indexed by <span class="math notranslate nohighlight">\(b\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(I\)</span>: Set of generators indexed by <span class="math notranslate nohighlight">\(i\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(L\)</span>: Set of transmission network branches indexed by <span class="math notranslate nohighlight">\(l\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(S\)</span>: Set of generation cost curve segments indexed by <span class="math notranslate nohighlight">\(s\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(T\)</span>: Set of time periods indexed by <span class="math notranslate nohighlight">\(t\)</span></p></li>
</ul>
<section id="subsets">
<h4><a class="toc-backref" href="#id25" role="doc-backlink"><span class="section-number">8.4.1.1. </span>Subsets</a><a class="headerlink" href="#subsets" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(I^{\rm H}\)</span>: Set of hydro generators.</p></li>
<li><p><span class="math notranslate nohighlight">\(I^{\rm S}\)</span>: Set of solar generators.</p></li>
<li><p><span class="math notranslate nohighlight">\(I^{\rm W}\)</span>: Set of wind generators.</p></li>
</ul>
</section>
</section>
<section id="variables">
<h3><a class="toc-backref" href="#id26" role="doc-backlink"><span class="section-number">8.4.2. </span>Variables</a><a class="headerlink" href="#variables" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(E_{b,\,t}\)</span>: Energy available in energy storage devices at bus <span class="math notranslate nohighlight">\(b\)</span> at time
<span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(f_{l,\,t}\)</span>: Power flowing on branch <span class="math notranslate nohighlight">\(l\)</span> at time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(g_{i,\,t}\)</span>: Power injected by each generator <span class="math notranslate nohighlight">\(i\)</span> at time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(g_{i,\,s,\,t}\)</span>: Power injected by each generator <span class="math notranslate nohighlight">\(i\)</span> from cost curve
segment <span class="math notranslate nohighlight">\(i\)</span> at time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(J^{\rm chg}_{b,\,t}\)</span>: Charging power of energy storage devices at bus
<span class="math notranslate nohighlight">\(b\)</span> at
time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(J^{\rm dis}_{b,\,t}\)</span>: Discharging power of energy storage devices at bus
<span class="math notranslate nohighlight">\(b\)</span>
at time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(s_{b,\,t}\)</span>: Load shed at bus <span class="math notranslate nohighlight">\(b\)</span> at time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(v_{l,\,t}\)</span>: Branch limit violation for branch <span class="math notranslate nohighlight">\(l\)</span> at time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(\delta^{\rm down}_{b,\,t}\)</span>: Amount of flexible demand curtailed at bus
<span class="math notranslate nohighlight">\(b\)</span> at time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(\delta^{\rm up}_{b,\,t}\)</span>: Amount of flexible demand added at bus <span class="math notranslate nohighlight">\(b\)</span> at
time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(\theta_{b,\,t}\)</span>: Voltage angle of bus <span class="math notranslate nohighlight">\(b\)</span> at time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
</ul>
</section>
<section id="parameters">
<h3><a class="toc-backref" href="#id27" role="doc-backlink"><span class="section-number">8.4.3. </span>Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(a^{\rm shed}\)</span>: Binary parameter, whether load shedding is enabled.</p></li>
<li><p><span class="math notranslate nohighlight">\(a^{\rm viol}\)</span>: Binary parameter, whether transmission limit violation is
enabled.</p></li>
<li><p><span class="math notranslate nohighlight">\(c_{i,\,s}\)</span>: Cost coefficient for segment <span class="math notranslate nohighlight">\(s\)</span> of generator <span class="math notranslate nohighlight">\(i\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(c^{\rm min}_{i}\)</span>: Cost of running generator <span class="math notranslate nohighlight">\(i\)</span> at its minimum power
level.</p></li>
<li><p><span class="math notranslate nohighlight">\(d_{b,\,t}\)</span>: Power demand at bus <span class="math notranslate nohighlight">\(b\)</span> at time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(E_{b,\,0}\)</span>: Initial energy available in energy storage devices at bus
<span class="math notranslate nohighlight">\(b\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(E^{\rm max}_{b}\)</span>: Maximum energy stored in energy storage devices at bus
<span class="math notranslate nohighlight">\(b\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(f^{\rm max}_{l}\)</span>: Maximum flow over branch <span class="math notranslate nohighlight">\(l\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(g^{\rm min}_{i}\)</span>: Minimum generation for generator <span class="math notranslate nohighlight">\(i\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(g^{\rm max}_{i,\,s}\)</span>: Width of cost curve segment <span class="math notranslate nohighlight">\(s\)</span> of generator
<span class="math notranslate nohighlight">\(i\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(J^{max}_{b}\)</span>: Maximum charging/discharging power of energy storage devices at
bus <span class="math notranslate nohighlight">\(b\)</span>.</p></li>
<li><dl class="simple">
<dt><span class="math notranslate nohighlight">\(m^{\rm line}_{l,\,b}\)</span>: Mapping of branches to buses.</dt><dd><ul>
<li><p><span class="math notranslate nohighlight">\(m^{\rm line}_{l,\,b} = 1\)</span> if branch <span class="math notranslate nohighlight">\(l\)</span> starts at bus <span class="math notranslate nohighlight">\(b\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\(m^{\rm line}_{l,\,b} = -1\)</span> if branch <span class="math notranslate nohighlight">\(l\)</span> ends at bus <span class="math notranslate nohighlight">\(b\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\(m^{\rm line}_{l,\,b} = 0\)</span> otherwise.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><span class="math notranslate nohighlight">\(m^{\rm unit}_{i,\,b}\)</span>: Mapping of generators to buses.</dt><dd><ul>
<li><p><span class="math notranslate nohighlight">\(m^{\rm unit}_{i,\,b} = 1\)</span> if generator <span class="math notranslate nohighlight">\(i\)</span> is located at bus
<span class="math notranslate nohighlight">\(b\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\(m^{\rm unit}_{i,\,b} = 0\)</span> otherwise.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><span class="math notranslate nohighlight">\(M\)</span>: An arbitrarily-large constant, used in ‘big-M’ constraints to either
constrain to <span class="math notranslate nohighlight">\(0\)</span>, or relax constraint.</p></li>
<li><p><span class="math notranslate nohighlight">\(p^{\rm e}\)</span>: Value of stored energy at beginning/end of interval (so that
optimization does not automatically drain the storage by end-of-interval).</p></li>
<li><p><span class="math notranslate nohighlight">\(p^{\rm s}\)</span>: Load shed penalty factor.</p></li>
<li><p><span class="math notranslate nohighlight">\(p^{\rm v}\)</span>: Transmission violation penalty factor.</p></li>
<li><p><span class="math notranslate nohighlight">\(r^{\rm up}_{i}\)</span>: Ramp-up limit for generator <span class="math notranslate nohighlight">\(i\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(r^{\rm down}_{i}\)</span>: Ramp-down limit for generator <span class="math notranslate nohighlight">\(i\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(w_{i,\,t}\)</span>: Power available at time <span class="math notranslate nohighlight">\(t\)</span> from time-varying generator
(hydro, wind, solar) <span class="math notranslate nohighlight">\(i\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(x_{l}\)</span>: Impedance of branch <span class="math notranslate nohighlight">\(l\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(\underline{\delta}_{b,\,t}\)</span>: Demand flexibility curtailments available (in
MW) at bus <span class="math notranslate nohighlight">\(b\)</span> at time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(\overline{\delta}_{b,\,t}\)</span>: Demand flexibility additions available (in MW) at
bus <span class="math notranslate nohighlight">\(b\)</span> at time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(\Delta^{\rm balance}\)</span>: The length of the rolling load balance window (in
hours), used to account for the duration that flexible demand is deviating from the
base demand.</p></li>
<li><p><span class="math notranslate nohighlight">\(\eta^{\rm chg}_{b}\)</span>: Charging efficiency of storage device at bus <span class="math notranslate nohighlight">\(b\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(\eta^{\rm dis}_{b}\)</span>: Discharging efficiency of storage device at bus <span class="math notranslate nohighlight">\(b\)</span>.</p></li>
</ul>
</section>
<section id="constraints">
<h3><a class="toc-backref" href="#id28" role="doc-backlink"><span class="section-number">8.4.4. </span>Constraints</a><a class="headerlink" href="#constraints" title="Permalink to this heading">¶</a></h3>
<p>All equations apply over all entries in the indexed sets unless otherwise listed.</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(0 \le g_{i,\,s,\,t} \le g^{\rm max}_{i,\,s,\,t}\)</span>: Generator segment power is
non-negative and less than the segment width.</p></li>
<li><p><span class="math notranslate nohighlight">\(0 \le s_{b,\,t} \le a^{\rm shed} \cdot
\left ( d_{b,\,t} + \delta^{\rm up}_{b,\,t} - \delta^{\rm down}_{b,\,t} \right )\)</span>:
Load shed is non-negative and less than the demand at that bus (including the impact
of demand flexibility), if load shedding is enabled. If not, load shed is fixed to
<span class="math notranslate nohighlight">\(0\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(0 \le v_{b,\,t} \le a^{\rm viol} \cdot M\)</span>: Transmission violations are non-
negative, if they are enabled (<span class="math notranslate nohighlight">\(M\)</span> is a sufficiently large constant that there
is no effective upper limit when <span class="math notranslate nohighlight">\(a^{\rm shed} = 1\)</span>). If not, they are fixed to
<span class="math notranslate nohighlight">\(0\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(0 \le J_{b,\,t}^{\rm chg} \le J_{b}^{\rm max}\)</span>: Storage charging power is
non-negative and limited by the maximum charging power at that bus.</p></li>
<li><p><span class="math notranslate nohighlight">\(0 \le J_{b,\,t}^{\rm dis} \le J_{b}^{\rm max}\)</span>: Storage discharging power is
non-negative and limited by the maximum discharging power at that bus.</p></li>
<li><p><span class="math notranslate nohighlight">\(0 \le E_{b,\,t} \le E_{b}^{\rm max}\)</span>: Storage state-of-charge is non-negative
and limited by the maximum state of charge at that bus.</p></li>
<li><p><span class="math notranslate nohighlight">\(g_{i,\,t} = w_{i,\,t} \quad \forall i \in I^{\rm H}\)</span>: Hydro generator power is
fixed to the profiles.</p></li>
<li><p><span class="math notranslate nohighlight">\(0 \le g_{i,\,t} \le w_{i,\,t} \quad \forall i \in I^{\rm S} \cup I^{\rm W}\)</span>:
Solar and wind generator power is non-negative and not greater than the availability
profiles.</p></li>
<li><p><span class="math notranslate nohighlight">\(\sum_{i \in I} m_{i,\,b}^{\rm unit} g_{i,\,t} +
\sum_{l \in L} m_{l,\,b}^{\rm line} f_{l,\,t} +
J_{b,\,t}^{\rm dis} + s_{b,\, t} + \delta_{b,\, t}^{\rm down} =
d_{b,\,t} + J_{b,\,t}^{\rm chg} + \delta_{b,\,t}^{\rm up}\)</span>: Power balance at each bus
<span class="math notranslate nohighlight">\(b\)</span> at time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(g_{i,\,t} = g_{i}^{\rm min} + \sum_{s \in \rm S} g_{i,\,s,\,t}\)</span>: Total
generator power is equal to the minimum power plus the power from each segment.</p></li>
<li><p><span class="math notranslate nohighlight">\(E_{b,\,t} = E_{b,\,t-1} + \eta_{b}^{\rm chg} J_{b,\, t}^{\rm chg} -
\frac{1}{\eta_{b}^{\rm dis}} J_{b,\,t}^{\rm dis}\)</span>: Conservation of energy for energy
storage state-of-charge.</p></li>
<li><p><span class="math notranslate nohighlight">\(g_{i,\,t} - g_{i,\,t-1} \le r_{i}^{\rm up}\)</span>: Ramp-up constraint.</p></li>
<li><p><span class="math notranslate nohighlight">\(g_{i,\,t} - g_{i,\,t-1} \ge r_{i}^{\rm down}\)</span>: Ramp-down constraint.</p></li>
<li><p><span class="math notranslate nohighlight">\(-\left ( f_{l}^{\rm max} + v_{l,\,t} \right ) \le f_{l,\,t} \le
\left ( f_{l}^{\rm max} + v_{l,\,t} \right )\)</span>: Power flow over each branch is limited
by the branch power limit, and can only exceed this value by using the ‘violation’
variable (if enabled),
which is penalized in the objective function.</p></li>
<li><p><span class="math notranslate nohighlight">\(f_{l,\,t} = \frac{1}{x_{l}} \sum_{b \in B} m_{l,\,b}^{\rm line}
\theta_{b,\,t}\)</span>: Power flow over each branch is proportional to the admittance and
the angle difference.</p></li>
<li><p><span class="math notranslate nohighlight">\(0 \le \delta_{b,\,t}^{\rm down} \le \underline{\delta}_{b,\,t}\)</span>: Bound on the
amount of demand that flexible demand resources can curtail.</p></li>
<li><p><span class="math notranslate nohighlight">\(0 \le \delta_{b,\,t}^{\rm up} \le \overline{\delta}_{b,\,t}\)</span>: Bound on the
amount of demand that flexible demand resources can add.</p></li>
<li><p><span class="math notranslate nohighlight">\(\sum_{t = k}^{k + \Delta^{\rm balance}} \delta_{b,\,t}^{\rm up} -
\delta_{b,\,t}^{\rm down} \ge 0, \quad \forall b \in B, \quad k = 1, ..., |T| -
\Delta^{\rm balance}\)</span>: Rolling load balance for flexible demand resources; used to
restrict the time that flexible demand resources can deviate from the base demand.</p></li>
<li><p><span class="math notranslate nohighlight">\(\sum_{t \in T} \delta_{b,\,t}^{\rm up} - \delta_{b,\,t}^{\rm down} \ge 0,
\quad \forall b \in B\)</span>: Interval load balance for flexible demand resources.</p></li>
</ul>
</section>
<section id="objective-function">
<h3><a class="toc-backref" href="#id29" role="doc-backlink"><span class="section-number">8.4.5. </span>Objective Function</a><a class="headerlink" href="#objective-function" title="Permalink to this heading">¶</a></h3>
<p><span class="math notranslate nohighlight">\(\min \left [ \sum_{t \in T} \sum_{i \in I} \left [ C_{i}^{\rm min} +
\sum_{s \in \rm S} c_{i,\,s} g_{i,\,s,\,t} \right ] +
p^{\rm s} \sum_{t \in T} \sum_{b \in B} s_{b,\,t} +
p^{\rm v} \sum_{t \in T} \sum_{l \in L} v_{l,\,t} +
p^{\rm e} \sum_{b \in B} \left [ E_{b,\,0} - E_{b,\,|T|} \right ] \right ]\)</span></p>
<p>There are four main components to the objective function:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\sum_{t \in T} \sum_{i \in I} [ C_{i}^{\rm min} + \sum_{s \in \rm S} c_{i,\,s}
g_{i,\,s,\,t} ]\)</span>: The cost of operating generators, fixed costs plus variable costs,
which can consist of several cost curve segments for each generator.</p></li>
<li><p><span class="math notranslate nohighlight">\(p^{\rm s} \sum_{t \in T} \sum_{b \in B} s_{b,\,t}\)</span>: Penalty for load shedding
(if load shedding is enabled).</p></li>
<li><p><span class="math notranslate nohighlight">\(p^{\rm v} \sum_{t \in T} \sum_{l \in L} v_{l,\,t}\)</span>: Penalty for transmission
line limit violations (if transmission violations are enabled).</p></li>
<li><p><span class="math notranslate nohighlight">\(p^{\rm e} \sum_{b \in B} \left [ E_{b,\,0} - E_{b,\,|T|} \right ]\)</span>: Penalty for
ending the interval with less stored energy than the start, or reward for ending with
more.</p></li>
</ul>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/img/BE_Sciences_RGB_Horizontal_Color.svg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Modeling a clean energy future for the United States</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Breakthrough-Energy&repo=docs&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user/installation_guide.html">1. Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../communication/code_of_conduct.html">2. Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/contribution_guide.html">3. Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/git_guide.html">4. Working with Git/GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powersimdata/index.html">5. PowerSimData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prereise/index.html">6. PreREISE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postreise/index.html">7. PostREISE</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">8. REISE.jl</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#system-requirements">8.1. System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">8.2. Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#native-installation">8.2.1. Native Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#docker">8.2.2. Docker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#usage">8.3. Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">8.3.1. Julia</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">8.3.2. Python</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#formulation">8.4. Formulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sets">8.4.1. Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variables">8.4.2. Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameters">8.4.3. Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constraints">8.4.4. Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#objective-function">8.4.5. Objective Function</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../postreise/index.html" title="previous chapter"><span class="section-number">7. </span>PostREISE</a></li>
  </ul></li>
</ul><h3>Useful Links</h3>
<ul>
  <li><a href="https://www.breakthroughenergy.org/">Breakthrough Energy</a></li>
  <li><a href="https://science.breakthroughenergy.org/">Breakthrough Energy Sciences</a></li>
  <li><a href="https://arxiv.org/abs/2002.06155">publication</a></li>
  <li><a href="https://zenodo.org/record/3530898">data @ zenodo</a></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><ul>
<h3>Code</h3>
<a href="../py-modindex.html">Module Index</a>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Breakthrough Energy Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/reisejl/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>