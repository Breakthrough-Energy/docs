
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Usage &#8212; documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="shortcut icon" href="../_static/favicon.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h1>
<p>REISE.jl can be used within the Julia interpreter or through the Python scripts.</p>
<section id="julia">
<h2>Julia<a class="headerlink" href="#julia" title="Permalink to this heading">¶</a></h2>
<p>After the installation, the REISE package is registered and can be imported using
<code class="code highlight julia docutils literal highlight-julia"><span class="k">import</span><span class="w"> </span><span class="n">REISE</span><span class="w"></span></code> to call <code class="code highlight julia docutils literal highlight-julia"><span class="n">REISE</span><span class="o">.</span><span class="n">run_scenario</span><span class="p">()</span><span class="w"></span></code> or <code class="code highlight julia docutils literal highlight-julia"><span class="k">using</span><span class="w"> </span><span class="n">REISE</span><span class="w"></span></code> to
call <code class="code highlight julia docutils literal highlight-julia"><span class="n">run_scenario</span><span class="p">()</span><span class="w"></span></code>.</p>
<p>Running a scenario requires the following inputs:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">interval</span></code>: the length of each simulation interval (hours).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_interval</span></code>: the number of simulation intervals.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start_index</span></code>: the hour to start the simulation, representing the row of the time-
series profiles in <strong>demand.csv</strong>, <strong>hydro.csv</strong>, <strong>solar.csv</strong>, and <strong>wind.csv</strong>.
Note that unlike some other programming languages, Julia is 1-indexed, so the first
index is 1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inputfolder</span></code>: the directory from which to load input files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">optimizer_factory</span></code>: an argument that can be passed to <code class="docutils literal notranslate"><span class="pre">JuMP.Model</span></code> to create a
new model instance with an attached solver. Be sure to pass the factory itself (e.g.
<code class="docutils literal notranslate"><span class="pre">GLPK.Optimizer</span></code>) rather than an instance (e.g. <code class="docutils literal notranslate"><span class="pre">GLPK.Optimizer()</span></code>). See the
<code class="docutils literal notranslate"><span class="pre">JuMP.Model</span></code> documentation for more information.</p></li>
</ul>
<p>To illustrate, to run a scenario that starts at the 1st hour of the year, runs in 3
intervals of 24 hours each, using input data located in working directory (<code class="docutils literal notranslate"><span class="pre">pwd()</span></code>)
and using the GLPK solver, call:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="k">import</span><span class="w"> </span><span class="n">REISE</span><span class="w"></span>
<span class="w"> </span><span class="k">import</span><span class="w"> </span><span class="n">GLPK</span><span class="w"></span>

<span class="w"> </span><span class="n">REISE</span><span class="o">.</span><span class="n">run_scenario</span><span class="p">(;</span><span class="w"></span>
<span class="w">  </span><span class="n">interval</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="n">n_interval</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">start_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">inputfolder</span><span class="o">=</span><span class="n">pwd</span><span class="p">(),</span><span class="w"></span>
<span class="w">  </span><span class="n">optimizer_factory</span><span class="o">=</span><span class="n">GLPK</span><span class="o">.</span><span class="n">Optimizer</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Optional arguments include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">num_segments</span></code>: the number of piecewise linear segments to use when linearizing
polynomial cost curves (default is 1).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outputfolder</span></code>: a directory in which to store results files. The default is a
subdirectory “output” within the input directory (created if it does not already
exist).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threads</span></code>: the number of threads to be used by the solver. The default is to let
the solver decide.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">solver_kwargs</span></code>: a dictionary of String =&gt; value pairs to be passed to the solver.</p></li>
</ul>
<p>Default settings for running using Gurobi can be accessed if <strong>Gurobi.jl</strong> has already
been imported using the <code class="docutils literal notranslate"><span class="pre">REISE.run_scenario_gurobi</span></code> function:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">REISE</span><span class="w"></span>
<span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">Gurobi</span><span class="w"></span>

<span class="w"> </span><span class="n">REISE</span><span class="o">.</span><span class="n">run_scenario_gurobi</span><span class="p">(;</span><span class="w"></span>
<span class="w">  </span><span class="n">interval</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="n">n_interval</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">start_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">inputfolder</span><span class="o">=</span><span class="n">pwd</span><span class="p">(),</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Optional arguments for <code class="docutils literal notranslate"><span class="pre">REISE.run_scenario</span></code> can still be passed as desired.</p>
</section>
<section id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this heading">¶</a></h2>
<p>There are two main Python scripts included in <code class="docutils literal notranslate"><span class="pre">pyreisejl</span></code>:</p>
<ul class="simple">
<li><p><strong>pyreisejl/utility/call.py</strong></p></li>
<li><p><strong>pyreisejl/utility/extract_data.py</strong></p></li>
</ul>
<p>The first of these scripts transforms more descriptive input parameters into the ones
necessary for the Julia engine while also performing some additional input validation.
The latter, which can be set to automatically occur after the simulation has completed,
extracts key metrics from the resulting <strong>.mat</strong> files to <strong>.pkl</strong> files.</p>
<section id="running-a-simulation">
<h3>Running a simulation<a class="headerlink" href="#running-a-simulation" title="Permalink to this heading">¶</a></h3>
<p>A simulation can be run as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyreisejl/utility/call.py -s <span class="s1">&#39;2016-01-01&#39;</span> -e <span class="s1">&#39;2016-01-07&#39;</span> -int <span class="m">24</span> -i <span class="s1">&#39;/PATH/TO/INPUT/DATA&#39;</span>
</pre></div>
</div>
<p>It will solve the DCOPF problem in our grid model by interval of 24h using hourly data
located in <code class="code highlight bash docutils literal highlight-bash">/PATH/TO/INPUT/DATA</code> from January 1st to January 7th 2016. Note that
the start and end dates need to match dates contained in the input profiles (demand,
hydro, solar, wind). By default Gurobi will be used as the solver and the output data
(<strong>.mat</strong> files) will be saved in an <code class="code highlight bash docutils literal highlight-bash">output</code> folder created in the given input
directory.</p>
<p>The full list of arguments can be accessed via <code class="code highlight bash docutils literal highlight-bash">pyreisejl/utility/call.py --help</code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>usage: call.py [-h] [-s START_DATE] [-e END_DATE] [-int INTERVAL] [-i INPUT_DIR]
[-x EXECUTE_DIR] [-t THREADS] [-d] [-o OUTPUT_DIR] [-m MATLAB_DIR] [-k]
[--solver SOLVER] [-j JULIA_ENV] [-l LINEARIZATION_SEGMENTS]
[scenario_id]

Run REISE.jl simulation.

positional arguments:
   scenario_id           Scenario ID only if using PowerSimData.

optional arguments:
   -h, --help            show this help message and exit
   -s START_DATE, --start-date START_DATE
                         The start date for the simulation in format &#39;YYYY-MM-DD&#39;,
                         &#39;YYYY-MM-DD HH&#39;, &#39;YYYY-MM-DD HH:MM&#39;, or &#39;YYYY-MM-DD
                         HH:MM:SS&#39;.
   -e END_DATE, --end-date END_DATE
                         The end date for the simulation in format &#39;YYYY-MM-DD&#39;,
                         &#39;YYYY-MM-DD HH&#39;, &#39;YYYY-MM-DD HH:MM&#39;, or &#39;YYYY-MM-DD
                         HH:MM:SS&#39;. If only the date is specified (without any
                         hours), the entire end-date will be included in the
                         simulation.
   -int INTERVAL, --interval INTERVAL
                         The length of each interval in hours.
   -i INPUT_DIR, --input-dir INPUT_DIR
                         The directory containing the input data files. Required
                         files are &#39;case.mat&#39;, &#39;demand.csv&#39;, &#39;hydro.csv&#39;,
                         &#39;solar.csv&#39;, and &#39;wind.csv&#39;.
   -x EXECUTE_DIR, --execute-dir EXECUTE_DIR
                         The directory to store the results. This is optional and
                         defaults to an execute folder that will be created in the
                         input directory if it does not exist.
   -t THREADS, --threads THREADS
                         The number of threads to run the simulation with. This is
                         optional and defaults to Auto.
   -d, --extract-data    If this flag is used, the data generated by the simulation
                         after the engine has finished running will be automatically
                         extracted into .pkl files, and the result.mat files
                         will be deleted. The extraction process can be memory
                         intensive. This is optional and defaults to False if the
                         flag is omitted.
   -o OUTPUT_DIR, --output-dir OUTPUT_DIR
                         The directory to store the extracted data. This is optional
                         and defaults to the execute directory. This flag is only
                         used if the extract-data flag is set.
   -m MATLAB_DIR, --matlab-dir MATLAB_DIR
                         The directory to store the modified case.mat used by the
                         engine. This is optional and defaults to the execute
                         directory. This flag is only used if the extract-data flag
                         is set.
   -k, --keep-matlab     The result.mat files found in the execute directory will be
                         kept instead of deleted after extraction. This flag is only
                         used if the extract-data flag is set.
   --solver SOLVER       Specify the solver to run the optimization. Will default to
                         gurobi. Current solvers available are clp, glpk and gurobi.
   -j JULIA_ENV, --julia-env JULIA_ENV
                         The path to the julia environment within which to run
                         REISE.jl. This is optional and defaults to the default
                         julia environment.
   -l LINEARIZATION_SEGMENTS, --linearization-segments LINEARIZATION_SEGMENTS
                         The number of piecewise linear segments used to linearize
                         cost curves. This is optional and defaults to one.
</pre></div>
</div>
<p>As you can see, it is possible to save the output <strong>.mat</strong> files to a different
directory through <code class="docutils literal notranslate"><span class="pre">--execute-dir</span></code>. Also, different solvers can be used (<code class="docutils literal notranslate"><span class="pre">--solver</span></code>).</p>
<p>There is another optional flag that specifies the number of threads to use for the
simulation run in Gurobi (<code class="docutils literal notranslate"><span class="pre">--threads</span></code>). If the number of threads specified is higher
than the number of logical processor count available, a warning will be generated but
the simulation will still run.</p>
<p>Finally, you can use <code class="docutils literal notranslate"><span class="pre">--extract-data</span></code> to automatically extract the data after a
simulation run without having to manually initiate it. Note that the extraction process
can be memory intensive</p>
</section>
<section id="extracting-simulation-results">
<h3>Extracting Simulation Results<a class="headerlink" href="#extracting-simulation-results" title="Permalink to this heading">¶</a></h3>
<p>After the simulation has completed and if the <code class="docutils literal notranslate"><span class="pre">--extract-data</span></code> is set in the
<strong>call.py</strong> script, the extraction can be run using the same start and end dates as
were used to run the simulation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyreisejl/utility/extract_data.py -s <span class="s1">&#39;2016-01-01&#39;</span> -e <span class="s1">&#39;2016-01-07&#39;</span> -x <span class="s1">&#39;/PATH/TO/OUTPUT/DATA&#39;</span>
</pre></div>
</div>
<p>The full list of arguments can be accessed via
<code class="code highlight bash docutils literal highlight-bash">pyreisejl/utility/extract-data.py --help</code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>usage: extract_data.py [-h] [-s START_DATE] [-e END_DATE] [-x EXECUTE_DIR] [-o [OUTPUT_DIR]] [-m [MATLAB_DIR]] [-f [FREQUENCY]] [-k] [scenario_id]

Extract data from the results of the REISE.jl simulation.

positional arguments:
   scenario_id           Scenario ID only if using PowerSimData.

optional arguments:
   -h, --help            show this help message and exit
   -s START_DATE, --start-date START_DATE
                         The start date as provided to run the simulation. Supported
                         formats are &#39;YYYY-MM-DD&#39;, &#39;YYYY-MM-DD HH&#39;, &#39;YYYY-MM-DD
                         HH:MM&#39;, or &#39;YYYY-MM-DD HH:MM:SS&#39;.
   -e END_DATE, --end-date END_DATE
                         The end date as provided to run the simulation. Supported
                         formats are &#39;YYYY-MM-DD&#39;, &#39;YYYY-MM-DD HH&#39;, &#39;YYYY-MM-DD
                         HH:MM&#39;, or &#39;YYYY-MM-DD HH:MM:SS&#39;.
   -x EXECUTE_DIR, --execute-dir EXECUTE_DIR
                         The directory where the REISE.jl results are stored.
   -o [OUTPUT_DIR], --output-dir [OUTPUT_DIR]
                         The directory to store the results. This is optional and
                         defaults to the execute directory.
   -m [MATLAB_DIR], --matlab-dir [MATLAB_DIR]
                         The directory to store the modified case.mat used by the
                         engine. This is optional and defaults to the execute
                         directory.
   -f [FREQUENCY], --frequency [FREQUENCY]
                         The frequency of data points in the original profile csvs
                         as a Pandas frequency string. This is optional and defaults
                         to an hour.
   -k, --keep-matlab     If this flag is used, the result.mat files found in the
                         execute directory will be kept instead of deleted.
</pre></div>
</div>
<p>When manually running the extract_data process, the script assumes the frequency of the
input profiles are hourly and will construct the timestamps for the resulting data
accordingly. If a different frequency was used for the input data, it must be specified
via <code class="docutils literal notranslate"><span class="pre">--frequency</span></code>. Also, other parameters can be invoked to handle output data.</p>
<p>When the script has finished running, the following <strong>.pkl</strong> files will be available:</p>
<ul class="simple">
<li><p><strong>PF.pkl</strong> (power flow)</p></li>
<li><p><strong>PG.pkl</strong> (power generated)</p></li>
<li><p><strong>LMP.pkl</strong> (locational marginal price)</p></li>
<li><p><strong>CONGU.pkl</strong> (congestion, upper flow limit)</p></li>
<li><p><strong>CONGL.pkl</strong> (congestion, lower flow limit)</p></li>
<li><p><strong>AVERAGED_CONG.pkl</strong> (time averaged congestion)</p></li>
</ul>
<p>If the grid used in the simulation contains DC lines, energy storage devices, or
flexible demand resources, the following files will also be extracted as necessary:</p>
<ul class="simple">
<li><p><strong>PF_DCLINE.pkl</strong> (power flow on DC lines)</p></li>
<li><p><strong>STORAGE_PG.pkl</strong> (power generated by storage units)</p></li>
<li><p><strong>STORAGE_E.pkl</strong> (energy state of charge)</p></li>
<li><p><strong>LOAD_SHIFT_DN.pkl</strong> (demand that is curtailed)</p></li>
<li><p><strong>LOAD_SHIFT_UP.pkl</strong> (demand that is added)</p></li>
</ul>
<p>If one or more intervals of the simulation were found to be infeasible without shedding
load, the following file will also be extracted:</p>
<ul class="simple">
<li><p><strong>LOAD_SHED.pkl</strong> (load shed profile for each load bus)</p></li>
</ul>
</section>
<section id="compatibility-with-our-software-ecosystem">
<h3>Compatibility with our Software Ecosystem<a class="headerlink" href="#compatibility-with-our-software-ecosystem" title="Permalink to this heading">¶</a></h3>
<p>Both <strong>pyreisejl/utility/call.py</strong> and <strong>pyreisejl/utility/extract_data.py</strong> can be
called using a positional argument that corresponds to a scenario id as generated by
<a class="reference external" href="https://github.com/Breakthrough-Energy/PowerSimData">PowerSimData</a>. Using this
invocation assumes you have installed our software ecosystem. See <a class="reference external" href="https://breakthrough-energy.github.io/docs/user/installation_guide.html">Installation Guide</a> ) if you
are interested.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/img/BE_Sciences_RGB_Horizontal_Color.svg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Modeling a clean energy future for the United States</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Breakthrough-Energy&repo=docs&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/installation_guide.html">1. Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../communication/code_of_conduct.html">2. Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/contribution_guide.html">3. Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/git_guide.html">4. Working with Git/GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powersimdata/index.html">5. PowerSimData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prereise/index.html">6. PreREISE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postreise/index.html">7. PostREISE</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">8. REISE.jl</a></li>
</ul>

<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul><h3>Useful Links</h3>
<ul>
  <li><a href="https://www.breakthroughenergy.org/">Breakthrough Energy</a></li>
  <li><a href="https://science.breakthroughenergy.org/">Breakthrough Energy Sciences</a></li>
  <li><a href="https://arxiv.org/abs/2002.06155">publication</a></li>
  <li><a href="https://zenodo.org/record/3530898">data @ zenodo</a></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><ul>
<h3>Code</h3>
<a href="../py-modindex.html">Module Index</a>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Breakthrough Energy Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/reisejl/usage.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>