
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>8. REISE.jl &#8212; documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="shortcut icon" href="_static/favicon.svg"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="7. PostREISE" href="postreise/index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="reise-jl">
<h1><span class="section-number">8. </span>REISE.jl<a class="headerlink" href="#reise-jl" title="Permalink to this headline">¶</a></h1>
<p>Renewable Energy Integration Simulation Engine.</p>
<p>This repository contains, in the <code class="docutils literal notranslate"><span class="pre">src</span></code> folder, the Julia scripts to run the power-flow study in the U.S. electric grid. The simulation engine relies on the use of an external optimization solver; any solver <a class="reference external" href="https://jump.dev/JuMP.jl/stable/installation/#Supported-solvers">compatible with JuMP</a> can be used, though code that makes efficient use of the capabilities of <a class="reference external" href="https://www.gurobi.com">Gurobi</a> is included in this repository.</p>
<section id="table-of-contents">
<h2><span class="section-number">8.1. </span>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p><a class="reference external" href="#dependencies">Dependencies</a></p></li>
<li><p><a class="reference external" href="#installation-local">Installation (Local)</a></p></li>
<li><p><a class="reference external" href="#usage-julia">Usage (Julia)</a></p></li>
<li><p><a class="reference external" href="#usage-python">Usage (Python)</a></p></li>
<li><p><a class="reference external" href="#docker">Docker</a></p></li>
<li><p><a class="reference external" href="#package-structure">Package Structure</a></p></li>
<li><p><a class="reference external" href="#formulation">Formulation</a></p></li>
</ol>
</section>
<section id="dependencies">
<h2><span class="section-number">8.2. </span>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>This package requires installations of the following, with recommended versions listed.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://julialang.org/">Julia</a>, version 1.5</p></li>
<li><p><a class="reference external" href="https://www.python.org/">Python</a>, version 3.8</p></li>
</ul>
<p>An external solver is required to run optimizations. We recommend <a class="reference external" href="https://www.gurobi.com">Gurobi</a> (version 9.1), though any other solver that is <a class="reference external" href="https://jump.dev/JuMP.jl/stable/installation/#Supported-solvers">compatible with JuMP</a> can be used.
Note: as Gurobi is a commercial solver, a <a class="reference external" href="https://www.gurobi.com/downloads/">Gurobi license file</a> is required. This may be either a local license or a <a class="reference external" href="https://cloud.gurobi.com/manager/licenses">Gurobi Cloud license</a>. <a class="reference external" href="https://www.gurobi.com/academia/academic-program-and-licenses/">Free licenses for academic use</a> are available.</p>
<p>This package can also be run using <a class="reference external" href="https://docs.docker.com/get-docker/">Docker</a>, which will automatically handle the installation of Julia, Python, and all dependencies. Gurobi is also installed, although as before a <a class="reference external" href="https://www.gurobi.com/downloads/">Gurobi license file</a> is still required to use Gurobi as a solver; other solvers can also be used.</p>
<p>For sample data to use with the simulation, please visit <a class="reference external" href="https://zenodo.org/record/3530898">Zenodo</a>.</p>
<section id="system-requirements">
<h3><span class="section-number">8.2.1. </span>System Requirements<a class="headerlink" href="#system-requirements" title="Permalink to this headline">¶</a></h3>
<p>Large simulations can require significant amounts of RAM. The amount of RAM necessary is proportional to both the size of the grid and the size of the interval with which to run the simulation.</p>
<p>As a general estimate, 1-2 GB of RAM is needed per hour in the interval in a simulation across the entire USA grid. For example, a 24-hour interval would require 24-48 GB of RAM; if only 16 GB of RAM is available, consider using a time interval of 8 hours or less as that would take 8-16 GB of RAM.</p>
<p>The memory necessary would also be proportional to the size of grid used, so as the Western interconnect is roughly 8 times smaller than the entire USA grid, a simulation of just the Western interconnect with a 24-hour interval would require ~3-6 GB of RAM.</p>
</section>
</section>
<section id="installation-local">
<h2><span class="section-number">8.3. </span>Installation (Local)<a class="headerlink" href="#installation-local" title="Permalink to this headline">¶</a></h2>
<p>When installing this package locally, the below dependencies will need to be installed following the provider recommendations:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://julialang.org/downloads/#current_stable_release">Download Julia</a></p></li>
<li><p><a class="reference external" href="https://www.python.org/downloads/release/python-386/">Download Python</a></p></li>
</ul>
<p>If Gurobi is to be used as the solver, this will need to be installed as well:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.gurobi.com/documentation/quickstart.html">Gurobi Installation Guide</a></p></li>
</ul>
<p>The package itself has two components that require installation:</p>
<ul class="simple">
<li><p><a class="reference external" href="#julia-package-installation">Julia package</a> to run the simulation</p></li>
<li><p>optional <a class="reference external" href="#python-requirements-installation">Python scripts</a> for some additional pre- and post-processing</p></li>
</ul>
<p>Instead of installing locally, this package can also be used with the included <a class="reference external" href="#Docker">Docker</a> image.</p>
<p>Detailed installation instructions for both the necessary applications and packages can be found below:</p>
<ol class="simple">
<li><p><a class="reference external" href="#gurobi-installation">Gurobi Installation</a></p>
<ol class="simple">
<li><p><a class="reference external" href="#gurobi-installation-example-linux-cloud-license">Gurobi Installation Example (Linux + Cloud License)</a></p></li>
<li><p><a class="reference external" href="#gurobi-verification">Gurobi Installation Verification</a></p></li>
</ol>
</li>
<li><p><a class="reference external" href="#julia-installation">Julia Installation</a></p>
<ol class="simple">
<li><p><a class="reference external" href="#julia-installation-example-linux">Julia Installation Example (Linux)</a></p></li>
<li><p><a class="reference external" href="#julia-package-installation">Julia Package Installation</a></p></li>
<li><p><a class="reference external" href="#julia-verification">Julia Installation Verification</a></p></li>
</ol>
</li>
<li><p><a class="reference external" href="#python-installation">Python Installation</a></p>
<ol class="simple">
<li><p><a class="reference external" href="#python-requirements-installation">Python Requirements Installation</a></p></li>
<li><p><a class="reference external" href="#python-installation-verification">Python Installation Verification</a></p></li>
</ol>
</li>
</ol>
<section id="gurobi-installation">
<h3><span class="section-number">8.3.1. </span>Gurobi Installation<a class="headerlink" href="#gurobi-installation" title="Permalink to this headline">¶</a></h3>
<p>Installation of <code class="docutils literal notranslate"><span class="pre">Gurobi</span></code> depends on both your operating system and license type. Detailed instructions can be found at the <a class="reference external" href="https://www.gurobi.com/documentation/quickstart.html">Gurobi Installation Guide</a>.</p>
<section id="gurobi-installation-example-linux-cloud-license">
<h4><span class="section-number">8.3.1.1. </span>Gurobi Installation Example (Linux + Cloud License)<a class="headerlink" href="#gurobi-installation-example-linux-cloud-license" title="Permalink to this headline">¶</a></h4>
<ol class="simple">
<li><p>Choose a destination directory for <code class="docutils literal notranslate"><span class="pre">Gurobi</span></code>. For a shared installation, <code class="docutils literal notranslate"><span class="pre">/opt</span></code> is recommended.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /opt
</pre></div>
</div>
<ol class="simple">
<li><p>Download and unzip the <code class="docutils literal notranslate"><span class="pre">Gurobi</span></code> package in the chosen directory.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget https://packages.gurobi.com/9.1/gurobi9.1.0_linux64.tar.gz
tar -xvfz gurobi9.1.0_linux64.tar.gz
</pre></div>
</div>
<p>This will create a subdirectory, <code class="docutils literal notranslate"><span class="pre">/opt/gurobi910/linux64</span></code> in which the complete distribution is located. This will be considered the <code class="docutils literal notranslate"><span class="pre">&lt;installdir&gt;</span></code> in the rest of this section.</p>
<ol class="simple">
<li><p>Set environmental variables for <code class="docutils literal notranslate"><span class="pre">Gurobi</span></code>:</p></li>
</ol>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GUROBI_HOME</span></code> should be set to your <code class="docutils literal notranslate"><span class="pre">&lt;installdir&gt;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PATH</span></code> should be extended to include <code class="docutils literal notranslate"><span class="pre">&lt;installdir&gt;/bin</span></code>.`</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> should be extended to include <installdir>/lib.</p></li>
</ul>
<p>For bash shell users, add the following to the <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">GUROBI_HOME</span><span class="o">=</span><span class="s2">&quot;/opt/gurobi910/linux64&quot;</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GUROBI_HOME</span><span class="si">}</span><span class="s2">/bin&quot;</span>
<span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GUROBI_HOME</span><span class="si">}</span><span class="s2">/lib&quot;</span>
</pre></div>
</div>
<ol class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">Gurobi</span></code> license needs to be download and installed. Download a copy of your Gurobi license from the account portal, and copy it to the parent directory of the <code class="docutils literal notranslate"><span class="pre">&lt;installdir&gt;</span></code>.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp gurobi.lic /opt/gurobi910/gurobi.lic
</pre></div>
</div>
</section>
<section id="gurobi-verification">
<h4><span class="section-number">8.3.1.2. </span>Gurobi Verification<a class="headerlink" href="#gurobi-verification" title="Permalink to this headline">¶</a></h4>
<p>To verify that Gurobi has installed properly, run <code class="docutils literal notranslate"><span class="pre">gurobi.sh</span></code> located in the <code class="docutils literal notranslate"><span class="pre">bin</span></code> folder of the Gurobi installation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/usr/share/gurobi910/linux64/bin/gurobi.sh
</pre></div>
</div>
<p>An example of the expected output for this program (using a cloud license):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">This</span> <span class="n">program</span> <span class="n">should</span> <span class="n">give</span> <span class="n">the</span> <span class="n">following</span> <span class="n">output</span>
<span class="n">Python</span> <span class="mf">3.7.4</span> <span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="n">Oct</span> <span class="mi">29</span> <span class="mi">2019</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">53</span><span class="p">)</span> 
<span class="p">[</span><span class="n">GCC</span> <span class="mf">4.4.7</span> <span class="mi">20120313</span> <span class="p">(</span><span class="n">Red</span> <span class="n">Hat</span> <span class="mf">4.4.7</span><span class="o">-</span><span class="mi">18</span><span class="p">)]</span> <span class="n">on</span> <span class="n">linux</span>
<span class="n">Type</span> <span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;copyright&quot;</span><span class="p">,</span> <span class="s2">&quot;credits&quot;</span> <span class="ow">or</span> <span class="s2">&quot;license&quot;</span> <span class="k">for</span> <span class="n">more</span> <span class="n">information</span><span class="o">.</span>
<span class="n">Using</span> <span class="n">license</span> <span class="n">file</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">gurobi_license</span><span class="o">/</span><span class="n">gurobi</span><span class="o">.</span><span class="n">lic</span>
<span class="n">Set</span> <span class="n">parameter</span> <span class="n">CloudAccessID</span>
<span class="n">Set</span> <span class="n">parameter</span> <span class="n">CloudSecretKey</span>
<span class="n">Set</span> <span class="n">parameter</span> <span class="n">LogFile</span> <span class="n">to</span> <span class="n">value</span> <span class="n">gurobi</span><span class="o">.</span><span class="n">log</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">cloud</span> <span class="n">server</span> <span class="n">to</span> <span class="n">start</span> <span class="p">(</span><span class="n">pool</span> <span class="n">default</span><span class="p">)</span><span class="o">...</span>
<span class="n">Starting</span><span class="o">...</span>
<span class="n">Starting</span><span class="o">...</span>
<span class="n">Starting</span><span class="o">...</span>
<span class="n">Starting</span><span class="o">...</span>
<span class="n">Compute</span> <span class="n">Server</span> <span class="n">job</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">1</span><span class="n">eacfb69</span><span class="o">-</span><span class="mi">3083</span><span class="o">-</span><span class="mf">44e2</span><span class="o">-</span><span class="mf">872e-58515</span><span class="n">b143b5d</span>
<span class="n">Capacity</span> <span class="n">available</span> <span class="n">on</span> <span class="s1">&#39;https://ip-10-0-55-163:61000&#39;</span> <span class="o">-</span> <span class="n">connecting</span><span class="o">...</span>
<span class="n">Established</span> <span class="n">HTTPS</span> <span class="n">encrypted</span> <span class="n">connection</span>

<span class="n">Gurobi</span> <span class="n">Interactive</span> <span class="n">Shell</span> <span class="p">(</span><span class="n">linux64</span><span class="p">),</span> <span class="n">Version</span> <span class="mf">9.1.0</span>
<span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">2020</span><span class="p">,</span> <span class="n">Gurobi</span> <span class="n">Optimization</span><span class="p">,</span> <span class="n">LLC</span>
<span class="n">Type</span> <span class="s2">&quot;help()&quot;</span> <span class="k">for</span> <span class="n">help</span>

<span class="n">gurobi</span><span class="o">&gt;</span> 
</pre></div>
</div>
</section>
</section>
<section id="julia-installation">
<h3><span class="section-number">8.3.2. </span>Julia Installation<a class="headerlink" href="#julia-installation" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://julialang.org/downloads/#current_stable_release">Download Julia</a> and install the version specific to your operating system.</p>
<section id="julia-installation-example-linux">
<h4><span class="section-number">8.3.2.1. </span>Julia Installation Example (Linux)<a class="headerlink" href="#julia-installation-example-linux" title="Permalink to this headline">¶</a></h4>
<ol class="simple">
<li><p>Choose a destination directory for <code class="docutils literal notranslate"><span class="pre">Julia</span></code>. Again, <code class="docutils literal notranslate"><span class="pre">/opt</span></code> is recommended.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /opt
</pre></div>
</div>
<ol class="simple">
<li><p>Download and unzip the <code class="docutils literal notranslate"><span class="pre">Julia</span></code> package in the chosen directory.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget -q https://julialang-s3.julialang.org/bin/linux/x64/1.5/julia-1.5.3-linux-x86_64.tar.gz
tar -xf julia-1.5.3-linux-x86_64.tar.gz
</pre></div>
</div>
<ol class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">Julia</span></code> to the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environmental variable.</p></li>
</ol>
<p>For bash shell users, add the following to the <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">:/opt/julia-1.5.3/bin&quot;</span>
</pre></div>
</div>
</section>
<section id="julia-package-installation">
<h4><span class="section-number">8.3.2.2. </span>Julia Package Installation<a class="headerlink" href="#julia-package-installation" title="Permalink to this headline">¶</a></h4>
<p><strong>Note</strong>: To install the <code class="docutils literal notranslate"><span class="pre">Gurobi.jl</span></code> part of this package, <code class="docutils literal notranslate"><span class="pre">Julia</span></code> will need
to find the Gurobi installation folder. This is done by specifying an environment
variable for <code class="docutils literal notranslate"><span class="pre">GUROBI_HOME</span></code> pointing to the Gurobi <code class="docutils literal notranslate"><span class="pre">&lt;installdir&gt;</span></code>.</p>
<p>For more information, see the <a class="reference external" href="https://github.com/JuliaOpt/Gurobi.jl#installation">Gurobi.jl</a> documentation.</p>
<p>As this package is unregistered with Julia, the easiest way to use this package
is to first clone the repo locally (be sure to avoid whitespace in the path):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/Breakthrough-Energy/REISE.jl
</pre></div>
</div>
<p>The package will need to be added to each user’s default <code class="docutils literal notranslate"><span class="pre">Julia</span></code> environment.
This can be done by opening up <code class="docutils literal notranslate"><span class="pre">Julia</span></code> and activiating the Pkg REPL (the
built-in package manager) with <code class="docutils literal notranslate"><span class="pre">]</span></code>. To exit the Pkg REPL, use <code class="docutils literal notranslate"><span class="pre">backspace</span></code>.</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span>   <span class="n">_</span>       <span class="n">_</span> <span class="n">_</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="n">_</span>     <span class="o">|</span>  <span class="n">Documentation</span><span class="o">:</span> <span class="n">https</span><span class="o">://</span><span class="n">docs</span><span class="o">.</span><span class="n">julialang</span><span class="o">.</span><span class="n">org</span>
  <span class="p">(</span><span class="n">_</span><span class="p">)</span>     <span class="o">|</span> <span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="p">(</span><span class="n">_</span><span class="p">)</span>    <span class="o">|</span>
   <span class="n">_</span> <span class="n">_</span>   <span class="n">_</span><span class="o">|</span> <span class="o">|</span><span class="n">_</span>  <span class="n">__</span> <span class="n">_</span>   <span class="o">|</span>  <span class="kt">Type</span> <span class="s">&quot;?&quot;</span> <span class="k">for</span> <span class="n">help</span><span class="p">,</span> <span class="s">&quot;]?&quot;</span> <span class="k">for</span> <span class="n">Pkg</span> <span class="n">help</span><span class="o">.</span>
  <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|/</span> <span class="sa">_</span><span class="sb">` |  |</span>
<span class="sb">  | | |_| | | | (_| |  |  Version 1.5.2 (2020-09-23)</span>
<span class="sb"> _/ |\__&#39;_|_|_|\__&#39;_|  |  Official https://julialang.org/ release</span>
<span class="sb">|__/                   |</span>

<span class="sb">julia&gt; ]</span>

<span class="sb">pkg&gt;</span>
</pre></div>
</div>
<p>From here, there are many ways to add this package to <code class="docutils literal notranslate"><span class="pre">Julia</span></code>. Listed below are
three different options:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">add</span></code>ing a package allows a specific branch to be specified from the git
repository. It will use the most recent allowed version of the dependencies
specified in the <code class="docutils literal notranslate"><span class="pre">Project.toml</span></code> file. Currently, this package is known to be
compatible with JuMP v0.21.3; this is specified in the <code class="docutils literal notranslate"><span class="pre">Project.toml</span></code> file,
but there may be other packages for which the latest version does not maintain
backward-compatibility.</p></li>
</ol>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">pkg</span><span class="o">&gt;</span> <span class="n">add</span> <span class="o">/</span><span class="n">PATH</span><span class="o">/</span><span class="n">TO</span><span class="o">/</span><span class="n">REISE</span><span class="o">.</span><span class="n">jl</span><span class="c">#develop</span>
</pre></div>
</div>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dev</span></code>ing a package will always reflect the latest version of the code specified
at the repository. If a branch other than <code class="docutils literal notranslate"><span class="pre">develop</span></code> is checked out, the code in
that branch will be run. Like the above option, this method will also use the
most recent allowed version of the dependencies for which backward-compatibility
is not guaranteed.</p></li>
</ol>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">pkg</span><span class="o">&gt;</span> <span class="n">dev</span> <span class="o">/</span><span class="n">PATH</span><span class="o">/</span><span class="n">TO</span><span class="o">/</span><span class="n">REISE</span><span class="o">.</span><span class="n">jl</span>
</pre></div>
</div>
<ol class="simple">
<li><p>Using the specific environment specified in the project will use the exact
dependency versions specified in the package. This will first have to be
activated and instantiated to download and install all dependencies in <code class="docutils literal notranslate"><span class="pre">Julia</span></code>:</p></li>
</ol>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">pkg</span><span class="o">&gt;</span> <span class="n">activate</span> <span class="o">/</span><span class="n">PATH</span><span class="o">/</span><span class="n">TO</span><span class="o">/</span><span class="n">REISE</span><span class="o">.</span><span class="n">jl</span>
 <span class="n">Activating</span> <span class="n">environment</span> <span class="n">at</span> <span class="sb">`~/REISE.jl/Project.toml`</span>

<span class="p">(</span><span class="n">REISE</span><span class="p">)</span> <span class="n">pkg</span><span class="o">&gt;</span> <span class="n">instantiate</span>
</pre></div>
</div>
<p>In order for the below Python scripts to use this environment, set a
<code class="docutils literal notranslate"><span class="pre">JULIA_PROJECT</span></code> environment variable to the path to <code class="docutils literal notranslate"><span class="pre">/PATH/TO/REISE.jl</span></code>.</p>
<p>For more information about the different installation options, please see the
documentation for the <a class="reference external" href="https://julialang.github.io/Pkg.jl/v1/managing-packages/">Julia Package Manager</a>.</p>
</section>
<section id="verification-and-troubleshooting">
<h4><span class="section-number">8.3.2.3. </span>Verification and Troubleshooting<a class="headerlink" href="#verification-and-troubleshooting" title="Permalink to this headline">¶</a></h4>
<p>To verify that the package has been successfully installed, open a new instance of <code class="docutils literal notranslate"><span class="pre">Julia</span></code> and verify that the <code class="docutils literal notranslate"><span class="pre">REISE</span></code> package can load without any errors with the following command:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="n">REISE</span>
</pre></div>
</div>
</section>
</section>
<section id="python-packages">
<h3><span class="section-number">8.3.3. </span>Python Packages<a class="headerlink" href="#python-packages" title="Permalink to this headline">¶</a></h3>
<section id="python-requirements-installation">
<h4><span class="section-number">8.3.3.1. </span>Python Requirements Installation<a class="headerlink" href="#python-requirements-installation" title="Permalink to this headline">¶</a></h4>
<p>The dependencies of the Python scripts contained in <code class="docutils literal notranslate"><span class="pre">pyreisejl</span></code> are not
automatically installed. See <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> for details. These requirements
can be installed using pip:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -r requirements.txt
</pre></div>
</div>
</section>
<section id="python-installation-verification">
<h4><span class="section-number">8.3.3.2. </span>Python Installation Verification<a class="headerlink" href="#python-installation-verification" title="Permalink to this headline">¶</a></h4>
<p>To verify that the included Python scripts can successfully run <code class="docutils literal notranslate"><span class="pre">REISE</span></code>, open a Python interpreter and run the following commands. They should return with no errors.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">julia.api</span> <span class="kn">import</span> <span class="n">Julia</span>
<span class="n">Julia</span><span class="p">(</span><span class="n">compiled_modules</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">julia</span> <span class="kn">import</span> <span class="n">REISE</span>
</pre></div>
</div>
<p>Note that the final import of <code class="docutils literal notranslate"><span class="pre">REISE</span></code> may take a couple of minutes to complete.</p>
</section>
</section>
</section>
<section id="usage-julia">
<h2><span class="section-number">8.4. </span>Usage (Julia)<a class="headerlink" href="#usage-julia" title="Permalink to this headline">¶</a></h2>
<p>Installation registers a package named <code class="docutils literal notranslate"><span class="pre">REISE</span></code>. Following Julia naming conventions, the <code class="docutils literal notranslate"><span class="pre">.jl</span></code> is dropped. The package can be imported using: <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">REISE</span></code> to call <code class="docutils literal notranslate"><span class="pre">REISE.run_scenario()</span></code>, or <code class="docutils literal notranslate"><span class="pre">using</span> <span class="pre">REISE</span></code> to call <code class="docutils literal notranslate"><span class="pre">run_scenario()</span></code>.</p>
<p>Running a scenario requires the following inputs:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">interval</span></code>: the length of each simulation interval (hours).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_interval</span></code>: the number of simulation intervals.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start_index</span></code>: the hour to start the simulation, representing the row of the time-series profiles in <code class="docutils literal notranslate"><span class="pre">demand.csv</span></code>, <code class="docutils literal notranslate"><span class="pre">hydro.csv</span></code>, <code class="docutils literal notranslate"><span class="pre">solar.csv</span></code>, and <code class="docutils literal notranslate"><span class="pre">wind.csv</span></code>.
Note that unlike some other programming languages, Julia is 1-indexed, so the first index is <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inputfolder</span></code>: the directory from which to load input files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">optimizer_factory</span></code>: an argument which can be passed to <code class="docutils literal notranslate"><span class="pre">JuMP.Model</span></code> to create a new model instance with an attached solver.
Be sure to pass the factory itself (e.g. <code class="docutils literal notranslate"><span class="pre">GLPK.Optimizer</span></code>) rather than an instance (e.g. <code class="docutils literal notranslate"><span class="pre">GLPK.Optimizer()</span></code>). See the <a class="reference external" href="https://jump.dev/JuMP.jl/v0.21.1/solvers/#JuMP.Model-Tuple%7BAny%7D">JuMP.Model documentation</a> for more information.</p></li>
</ul>
<p>As an example, to run a scenario which starts at the <code class="docutils literal notranslate"><span class="pre">1</span></code>st hour of the year, runs in <code class="docutils literal notranslate"><span class="pre">3</span></code> intervals of <code class="docutils literal notranslate"><span class="pre">24</span></code> hours each, loading input data from your present working directory (<code class="docutils literal notranslate"><span class="pre">pwd()</span></code>), using the <code class="docutils literal notranslate"><span class="pre">GLPK</span></code> solver, call:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="n">REISE</span>
<span class="k">import</span> <span class="n">GLPK</span>
<span class="n">REISE</span><span class="o">.</span><span class="n">run_scenario</span><span class="p">(;</span>
    <span class="n">interval</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span> <span class="n">n_interval</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">start_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inputfolder</span><span class="o">=</span><span class="n">pwd</span><span class="p">(),</span> <span class="n">optimizer_factory</span><span class="o">=</span><span class="n">GLPK</span><span class="o">.</span><span class="n">Optimizer</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Optional arguments include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">num_segments</span></code>: the number of piecewise linear segments to use when linearizing polynomial cost curves (default is 1).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outputfolder</span></code>: a directory in which to store results files. The default is a subdirectory <code class="docutils literal notranslate"><span class="pre">&quot;output&quot;</span></code> within the input directory (created if it does not already exist).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threads</span></code>: the number of threads to be used by the solver. The default is to let the solver decide.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">solver_kwargs</span></code>: a dictionary of <code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">=&gt;</span> <span class="pre">value</span></code> pairs to be passed to the solver.</p></li>
</ul>
<p>Default settings for running using Gurobi can be accessed if <code class="docutils literal notranslate"><span class="pre">Gurobi.jl</span></code> has already been imported using the <code class="docutils literal notranslate"><span class="pre">REISE.run_scenario_gurobi</span></code> function:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="n">REISE</span>
<span class="k">import</span> <span class="n">Gurobi</span>
<span class="n">REISE</span><span class="o">.</span><span class="n">run_scenario_gurobi</span><span class="p">(;</span>
    <span class="n">interval</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span> <span class="n">n_interval</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">start_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inputfolder</span><span class="o">=</span><span class="n">pwd</span><span class="p">(),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Optional arguments for <code class="docutils literal notranslate"><span class="pre">REISE.run_scenario</span></code> can still be passed as desired.</p>
</section>
<section id="usage-python">
<h2><span class="section-number">8.5. </span>Usage (Python)<a class="headerlink" href="#usage-python" title="Permalink to this headline">¶</a></h2>
<p>The Python scripts included in <code class="docutils literal notranslate"><span class="pre">pyreisejl</span></code> perform some additional input validation for the Julia engine before running the simulation and extract data from  the resulting <code class="docutils literal notranslate"><span class="pre">.mat</span></code> files to <code class="docutils literal notranslate"><span class="pre">.pkl</span></code> files.</p>
<p>There are two main Python scripts included in <code class="docutils literal notranslate"><span class="pre">pyreisejl</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pyreisejl/utility/call.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pyreisejl/utility/extract_data.py</span></code></p></li>
</ul>
<p>The first of these scripts transforms more descriptive input parameters into the
ones necessary for the Julia engine while also performing some additional input
validation. The latter, which can be set to automatically occur after the
simulation has completed, extracts key metrics from the resulting <code class="docutils literal notranslate"><span class="pre">.mat</span></code> files
to <code class="docutils literal notranslate"><span class="pre">.pkl</span></code> files.</p>
<p>For example, a simulation can be run as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyreisejl/utility/call.py -s <span class="s1">&#39;2016-01-01&#39;</span> -e <span class="s1">&#39;2016-01-07&#39;</span> -int <span class="m">24</span> -i <span class="s1">&#39;/PATH/TO/INPUT/FILES&#39;</span>
</pre></div>
</div>
<p>After the simulation has completed, the extraction can be run using the same start and end date as were used to run the simulation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyreisejl/utility/extract_data.py -s <span class="s1">&#39;2016-01-01&#39;</span> -e <span class="s1">&#39;2016-01-07&#39;</span> -x <span class="s1">&#39;/PATH/TO/OUTPUT/FILES&#39;</span>
</pre></div>
</div>
<section id="running-a-simulation">
<h3><span class="section-number">8.5.1. </span>Running a Simulation<a class="headerlink" href="#running-a-simulation" title="Permalink to this headline">¶</a></h3>
<p><strong>Note</strong> To see the available options for the <code class="docutils literal notranslate"><span class="pre">call.py</span></code> or <code class="docutils literal notranslate"><span class="pre">extract_data.py</span></code> script, use the <code class="docutils literal notranslate"><span class="pre">-h,</span> <span class="pre">--help</span></code> flag when calling the script.</p>
<p>To run the <code class="docutils literal notranslate"><span class="pre">REISE.jl</span></code> simulation from Python, using Gurobi as the solver, run <code class="docutils literal notranslate"><span class="pre">call.py</span></code> with the following required options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">s</span><span class="p">,</span> <span class="o">--</span><span class="n">start</span><span class="o">-</span><span class="n">date</span> <span class="n">START_DATE</span>
                        <span class="n">The</span> <span class="n">start</span> <span class="n">date</span> <span class="k">for</span> <span class="n">the</span> <span class="n">simulation</span> <span class="ow">in</span> <span class="nb">format</span>
			<span class="s1">&#39;YYYY-MM-DD&#39;</span><span class="o">.</span> <span class="s1">&#39;YYYY-MM-DD HH&#39;</span><span class="o">.</span> <span class="s1">&#39;YYYY-MM-DD HH:MM&#39;</span><span class="p">,</span>
			<span class="ow">or</span> <span class="s1">&#39;YYYY-MM-DD HH:MM:SS&#39;</span><span class="o">.</span>
  <span class="o">-</span><span class="n">e</span><span class="p">,</span> <span class="o">--</span><span class="n">end</span><span class="o">-</span><span class="n">date</span> <span class="n">END_DATE</span>
                        <span class="n">The</span> <span class="n">end</span> <span class="n">date</span> <span class="k">for</span> <span class="n">the</span> <span class="n">simulation</span> <span class="ow">in</span> <span class="nb">format</span>
			<span class="s1">&#39;YYYY-MM-DD&#39;</span><span class="o">.</span> <span class="s1">&#39;YYYY-MM-DD HH&#39;</span><span class="o">.</span> <span class="s1">&#39;YYYY-MM-DD HH:MM&#39;</span><span class="p">,</span>
			<span class="ow">or</span> <span class="s1">&#39;YYYY-MM-DD HH:MM:SS&#39;</span><span class="o">.</span> <span class="n">If</span> <span class="n">only</span> <span class="n">the</span> <span class="n">date</span> <span class="ow">is</span> <span class="n">specified</span>
			<span class="p">(</span><span class="n">without</span> <span class="nb">any</span> <span class="n">hours</span><span class="p">),</span> <span class="n">the</span> <span class="n">entire</span> <span class="n">end</span><span class="o">-</span><span class="n">date</span> <span class="n">will</span> <span class="n">be</span>
			<span class="n">included</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">simulation</span><span class="o">.</span>
  <span class="o">-</span><span class="nb">int</span><span class="p">,</span> <span class="o">--</span><span class="n">interval</span> <span class="n">INTERVAL</span>
                        <span class="n">The</span> <span class="n">length</span> <span class="n">of</span> <span class="n">each</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">hours</span><span class="o">.</span>
  <span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="o">--</span><span class="nb">input</span><span class="o">-</span><span class="nb">dir</span> <span class="n">INPUT_DIR</span>
                        <span class="n">The</span> <span class="n">directory</span> <span class="n">containing</span> <span class="n">the</span> <span class="nb">input</span> <span class="n">data</span> <span class="n">files</span><span class="o">.</span> <span class="n">Required</span>
			<span class="n">files</span> <span class="n">are</span> <span class="s1">&#39;case.mat&#39;</span><span class="p">,</span> <span class="s1">&#39;demand.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;hydro.csv&#39;</span><span class="p">,</span>
			<span class="s1">&#39;solar.csv&#39;</span><span class="p">,</span> <span class="ow">and</span> <span class="s1">&#39;wind.csv&#39;</span><span class="o">.</span>
</pre></div>
</div>
<p>Note that the start and end dates need to match dates contained in the input
profiles (demand, hydro, solar, wind).</p>
<p>This Python script will validate some of the inputs and translate them into the
required Julia inputs listed below. By default, the Julia engine creates
<code class="docutils literal notranslate"><span class="pre">result_*.mat</span></code> files in an <code class="docutils literal notranslate"><span class="pre">output</span></code> folder created in the given input directory.
To save the matlab files to a different directory, there is an optional flag to
specify the execute directory. If this directory already exists, any existing
computations will be overwritten.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">x</span> <span class="n">EXECUTE_DIR</span><span class="p">,</span> <span class="o">--</span><span class="n">execute</span><span class="o">-</span><span class="nb">dir</span> <span class="n">EXECUTE_DIR</span>
                        <span class="n">The</span> <span class="n">directory</span> <span class="n">to</span> <span class="n">store</span> <span class="n">the</span> <span class="n">results</span><span class="o">.</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">optional</span>
			<span class="ow">and</span> <span class="n">defaults</span> <span class="n">to</span> <span class="n">an</span> <span class="n">execute</span> <span class="n">folder</span> <span class="n">that</span> <span class="n">will</span> <span class="n">be</span> <span class="n">created</span>
			<span class="ow">in</span> <span class="n">the</span> <span class="nb">input</span> <span class="n">directory</span> <span class="k">if</span> <span class="n">it</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">exist</span><span class="o">.</span>
</pre></div>
</div>
<p>There is another optional flag to specify the number of threads to use for the
simulation run in <code class="docutils literal notranslate"><span class="pre">Gurobi</span></code>. If the number of threads specified is higher than
the number of logical processor count available, the simulation will still run
with a warning. Specifying zero threads defaults to Auto.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">t</span> <span class="n">THREADS</span><span class="p">,</span> <span class="o">--</span><span class="n">threads</span> <span class="n">THREADS</span>
                        <span class="n">The</span> <span class="n">number</span> <span class="n">of</span> <span class="n">threads</span> <span class="k">with</span> <span class="n">which</span> <span class="n">to</span> <span class="n">run</span> <span class="n">the</span> <span class="n">simulation</span><span class="o">.</span>
			<span class="n">This</span> <span class="ow">is</span> <span class="n">optional</span> <span class="ow">and</span> <span class="n">defaults</span> <span class="n">to</span> <span class="n">Auto</span><span class="o">.</span>
</pre></div>
</div>
<p>The documentation for these options can also been accessed by using the
help flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
</pre></div>
</div>
</section>
<section id="extracting-simulation-results">
<h3><span class="section-number">8.5.2. </span>Extracting Simulation Results<a class="headerlink" href="#extracting-simulation-results" title="Permalink to this headline">¶</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">extract_data.py</span></code> extracts the following Pandas DataFrames from the
matlab files generated by the Julia engine:</p>
<ul class="simple">
<li><p>PF.pkl (power flow)</p></li>
<li><p>PG.pkl (power generated)</p></li>
<li><p>LMP.pkl (locational marginal price)</p></li>
<li><p>CONGU.pkl (congestion, upper flow limit)</p></li>
<li><p>CONGL.pkl (congestion, lower flow limit)</p></li>
<li><p>AVERAGED_CONG.pkl (time averaged congestion)</p></li>
</ul>
<p>If the grid used in the simulation contains DC lines, energy storage devices, or flexible demand resources, the following files will also be extracted as necessary:</p>
<ul class="simple">
<li><p>PF_DCLINE.pkl (power flow on DC lines)</p></li>
<li><p>STORAGE_PG.pkl (power generated by storage units)</p></li>
<li><p>STORAGE_E.pkl (energy state of charge)</p></li>
<li><p>LOAD_SHIFT_DN.pkl (demand that is curtailed)</p></li>
<li><p>LOAD_SHIFT_UP.pkl (demand that is added)</p></li>
</ul>
<p>If one or more intervals of the simulation were found to be infeasible without shedding load, the following file will also be extracted:</p>
<ul class="simple">
<li><p>LOAD_SHED.pkl (load shed profile for each load bus)</p></li>
</ul>
<p>The extraction process can be memory intensive, so it does not automatically
happen after a simulation run by default. If resource constraints are not a
concern, however, the below flag can be used with <code class="docutils literal notranslate"><span class="pre">call.py</span></code> to automatically
extract the data after a simulation run without having to manually initiate it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">d</span><span class="p">,</span> <span class="o">--</span><span class="n">extract</span><span class="o">-</span><span class="n">data</span>    <span class="n">If</span> <span class="n">this</span> <span class="n">flag</span> <span class="ow">is</span> <span class="n">used</span><span class="p">,</span> <span class="n">the</span> <span class="n">data</span> <span class="n">generated</span> <span class="n">by</span> <span class="n">the</span>
      			<span class="n">simulation</span> <span class="n">after</span> <span class="n">the</span> <span class="n">engine</span> <span class="n">has</span> <span class="n">finished</span> <span class="n">running</span> <span class="n">will</span> <span class="n">be</span>
			<span class="n">automatically</span> <span class="n">extracted</span> <span class="n">into</span> <span class="o">.</span><span class="n">pkl</span> <span class="n">files</span><span class="p">,</span> <span class="ow">and</span> <span class="n">the</span>
			<span class="n">result</span><span class="o">.</span><span class="n">mat</span> <span class="n">files</span> <span class="n">will</span> <span class="n">be</span> <span class="n">deleted</span><span class="o">.</span> <span class="n">The</span> <span class="n">extraction</span> <span class="n">process</span>
			<span class="n">can</span> <span class="n">be</span> <span class="n">memory</span> <span class="n">intensive</span><span class="o">.</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">optional</span> <span class="ow">and</span> <span class="n">defaults</span>
			<span class="n">to</span> <span class="kc">False</span> <span class="k">if</span> <span class="n">the</span> <span class="n">flag</span> <span class="ow">is</span> <span class="n">omitted</span><span class="o">.</span>
</pre></div>
</div>
<p>To manually extract the data, run <code class="docutils literal notranslate"><span class="pre">extract_data.py</span></code> with the following options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">s</span> <span class="n">START_DATE</span><span class="p">,</span> <span class="o">--</span><span class="n">start</span><span class="o">-</span><span class="n">date</span> <span class="n">START_DATE</span>
                        <span class="n">The</span> <span class="n">start</span> <span class="n">date</span> <span class="k">as</span> <span class="n">provided</span> <span class="n">to</span> <span class="n">run</span> <span class="n">the</span> <span class="n">simulation</span><span class="o">.</span>
			<span class="n">Supported</span> <span class="n">formats</span> <span class="n">are</span> <span class="s1">&#39;YYYY-MM-DD&#39;</span><span class="o">.</span> <span class="s1">&#39;YYYY-MM-DD HH&#39;</span><span class="o">.</span>
			<span class="s1">&#39;YYYY-MM-DD HH:MM&#39;</span><span class="p">,</span> <span class="ow">or</span> <span class="s1">&#39;YYYY-MM-DD HH:MM:SS&#39;</span><span class="o">.</span>
  <span class="o">-</span><span class="n">e</span> <span class="n">END_DATE</span><span class="p">,</span> <span class="o">--</span><span class="n">end</span><span class="o">-</span><span class="n">date</span> <span class="n">END_DATE</span>
                        <span class="n">The</span> <span class="n">end</span> <span class="n">date</span> <span class="k">as</span> <span class="n">provided</span> <span class="n">to</span> <span class="n">run</span> <span class="n">the</span> <span class="n">simulation</span><span class="o">.</span>
			<span class="n">Supported</span> <span class="n">formats</span> <span class="n">are</span> <span class="s1">&#39;YYYY-MM-DD&#39;</span><span class="o">.</span> <span class="s1">&#39;YYYY-MM-DD HH&#39;</span><span class="o">.</span>
			<span class="s1">&#39;YYYY-MM-DD HH:MM&#39;</span><span class="p">,</span> <span class="ow">or</span> <span class="s1">&#39;YYYY-MM-DD HH:MM:SS&#39;</span><span class="o">.</span>
  <span class="o">-</span><span class="n">x</span> <span class="n">EXECUTE_DIR</span><span class="p">,</span> <span class="o">--</span><span class="n">execute</span><span class="o">-</span><span class="nb">dir</span> <span class="n">EXECUTE_DIR</span>
                        <span class="n">The</span> <span class="n">directory</span> <span class="n">where</span> <span class="n">the</span> <span class="n">REISE</span><span class="o">.</span><span class="n">jl</span> <span class="n">results</span> <span class="n">are</span> <span class="n">stored</span><span class="o">.</span>
</pre></div>
</div>
<p>When manually running the <code class="docutils literal notranslate"><span class="pre">extract_data</span></code> process, the script assumes the
frequency of the input profile csv’s are hourly and will construct the
timestamps for the resulting data accordingly. If a different frequency was
used for the input data, it can be specified with the following option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">f</span> <span class="p">[</span><span class="n">FREQUENCY</span><span class="p">],</span> <span class="o">--</span><span class="n">frequency</span> <span class="p">[</span><span class="n">FREQUENCY</span><span class="p">]</span>
                        <span class="n">The</span> <span class="n">frequency</span> <span class="n">of</span> <span class="n">data</span> <span class="n">points</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">original</span> <span class="n">profile</span>
			<span class="n">csvs</span> <span class="k">as</span> <span class="n">a</span> <span class="n">Pandas</span> <span class="n">frequency</span> <span class="n">string</span><span class="o">.</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">optional</span>
			<span class="ow">and</span> <span class="n">defaults</span> <span class="n">to</span> <span class="n">an</span> <span class="n">hour</span><span class="o">.</span>
</pre></div>
</div>
<p>The following optional options are available to both <code class="docutils literal notranslate"><span class="pre">call.py</span></code> when using the
automatic extraction flag and to <code class="docutils literal notranslate"><span class="pre">extract_data.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">-</span><span class="n">o</span> <span class="n">OUTPUT_DIR</span><span class="p">,</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="nb">dir</span> <span class="n">OUTPUT_DIR</span>
                        <span class="n">The</span> <span class="n">directory</span> <span class="n">to</span> <span class="n">store</span> <span class="n">the</span> <span class="n">extracted</span> <span class="n">data</span><span class="o">.</span> <span class="n">This</span> <span class="ow">is</span>
			<span class="n">optional</span> <span class="ow">and</span> <span class="n">defaults</span> <span class="n">to</span> <span class="n">the</span> <span class="n">execute</span> <span class="n">directory</span><span class="o">.</span>
			<span class="n">This</span> <span class="n">flag</span> <span class="ow">is</span> <span class="n">only</span> <span class="n">used</span> <span class="k">if</span> <span class="n">the</span> <span class="n">extract</span><span class="o">-</span><span class="n">data</span> <span class="n">flag</span> <span class="ow">is</span> <span class="nb">set</span><span class="o">.</span>
  <span class="o">-</span><span class="n">m</span> <span class="n">MATLAB_DIR</span><span class="p">,</span> <span class="o">--</span><span class="n">matlab</span><span class="o">-</span><span class="nb">dir</span> <span class="n">MATLAB_DIR</span>
                        <span class="n">The</span> <span class="n">directory</span> <span class="n">to</span> <span class="n">store</span> <span class="n">the</span> <span class="n">modified</span> <span class="n">case</span><span class="o">.</span><span class="n">mat</span> <span class="n">used</span> <span class="n">by</span>
			<span class="n">the</span> <span class="n">engine</span><span class="o">.</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">optional</span> <span class="ow">and</span> <span class="n">defaults</span> <span class="n">to</span> <span class="n">the</span> <span class="n">execute</span>
			<span class="n">directory</span><span class="o">.</span> <span class="n">This</span> <span class="n">flag</span> <span class="ow">is</span> <span class="n">only</span> <span class="n">used</span> <span class="k">if</span> <span class="n">the</span> <span class="n">extract</span><span class="o">-</span><span class="n">data</span>
			<span class="n">flag</span> <span class="ow">is</span> <span class="nb">set</span><span class="o">.</span>
  <span class="o">-</span><span class="n">k</span><span class="p">,</span> <span class="o">--</span><span class="n">keep</span><span class="o">-</span><span class="n">matlab</span>     <span class="n">The</span> <span class="n">result</span><span class="o">.</span><span class="n">mat</span> <span class="n">files</span> <span class="n">found</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">execute</span> <span class="n">directory</span> <span class="n">will</span>
      			<span class="n">be</span> <span class="n">kept</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">deleted</span> <span class="n">after</span> <span class="n">extraction</span><span class="o">.</span> <span class="n">This</span> <span class="n">flag</span>
			<span class="ow">is</span> <span class="n">only</span> <span class="n">used</span> <span class="k">if</span> <span class="n">the</span> <span class="n">extract</span><span class="o">-</span><span class="n">data</span> <span class="n">flag</span> <span class="ow">is</span> <span class="nb">set</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="compatibility-with-powersimdata">
<h3><span class="section-number">8.5.3. </span>Compatibility with PowerSimData<a class="headerlink" href="#compatibility-with-powersimdata" title="Permalink to this headline">¶</a></h3>
<p>Within the Python code in this repo, there is some code to maintain
compatibility with the <code class="docutils literal notranslate"><span class="pre">PowerSimData</span></code> framework.</p>
<p>Both <code class="docutils literal notranslate"><span class="pre">call.py</span></code> and <code class="docutils literal notranslate"><span class="pre">extract_data.py</span></code> can be called using a positional
argument that corresponds to a scenario id as generated by the
<code class="docutils literal notranslate"><span class="pre">PowerSimData</span></code> framework. Using this invocation assumes the presence
of the <code class="docutils literal notranslate"><span class="pre">PowerSimData</span></code> infrastructure including both a Scenario List
Manager and Execute List Manager. This option is not intended for manual
simulation runs.</p>
<p>Note also the different naming convention for various directories by
<code class="docutils literal notranslate"><span class="pre">PowerSimData</span></code> as compared to the options for the Python scripts within
this repository.</p>
</section>
</section>
<section id="docker">
<h2><span class="section-number">8.6. </span>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h2>
<p>The easiest way to setup this engine is within a Docker image.</p>
<p>There is an included <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> that can be used to build the Docker image. With the Docker daemon installed and running, navigate to the <code class="docutils literal notranslate"><span class="pre">REISE.jl</span></code> folder containing the <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> and build the image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker build . -t reisejl
</pre></div>
</div>
<p>To run the Docker image, you will need to mount two volumes; one containing the
<code class="docutils literal notranslate"><span class="pre">Gurobi</span></code> license file and another containing the necessary input files for the
engine.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -it -v /LOCAL/PATH/TO/GUROBI.LIC:/usr/share/gurobi_license -v /LOCAL/PATH/TO/DATA:/usr/share/data reisejl bash
</pre></div>
</div>
<p>The following command will start a bash shell session within the container,
using the Python commands described above.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python pyreisejl/utility/call.py -s <span class="s1">&#39;2016-01-01&#39;</span> -e <span class="s1">&#39;2016-01-07&#39;</span> -int <span class="m">24</span> -i <span class="s1">&#39;/usr/share/data&#39;</span>
</pre></div>
</div>
<p>Note that loading the <code class="docutils literal notranslate"><span class="pre">REISE.jl</span></code> package can take up to a couple of minutes,
so there may not be any output in this time.</p>
</section>
<section id="package-structure">
<h2><span class="section-number">8.7. </span>Package Structure<a class="headerlink" href="#package-structure" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">REISE.jl</span></code> contains only imports and includes. Individual type and function definitions are all in the other files in the <code class="docutils literal notranslate"><span class="pre">src</span></code> folder.</p>
</section>
<section id="formulation">
<h2><span class="section-number">8.8. </span>Formulation<a class="headerlink" href="#formulation" title="Permalink to this headline">¶</a></h2>
<section id="sets">
<h3><span class="section-number">8.8.1. </span>Sets<a class="headerlink" href="#sets" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><img alt="B" src="https://render.githubusercontent.com/render/math?math=B" />:
Set of buses, indexed by
<img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />.</p></li>
<li><p><img alt="I" src="https://render.githubusercontent.com/render/math?math=I" />:
Set of generators, indexed by
<img alt="i" src="https://render.githubusercontent.com/render/math?math=i" />.</p></li>
<li><p><img alt="L" src="https://render.githubusercontent.com/render/math?math=L" />:
Set of transmission network branches, indexed by
<img alt="l" src="https://render.githubusercontent.com/render/math?math=l" />.</p></li>
<li><p><img alt="S" src="https://render.githubusercontent.com/render/math?math=S" />:
Set of generation cost curve segments, indexed by
<img alt="s" src="https://render.githubusercontent.com/render/math?math=s" />.</p></li>
<li><p><img alt="T" src="https://render.githubusercontent.com/render/math?math=T" />:
Set of time periods, indexed by
<img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
</ul>
<section id="subsets">
<h4><span class="section-number">8.8.1.1. </span>Subsets<a class="headerlink" href="#subsets" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><img alt="I^{\text{H}}" src="https://render.githubusercontent.com/render/math?math=I%5E%7B%5Ctext%7BH%7D%7D" />:
Set of hydro generators.</p></li>
<li><p><img alt="I^{\text{S}}" src="https://render.githubusercontent.com/render/math?math=I%5E%7B%5Ctext%7BS%7D%7D" />:
Set of solar generators.</p></li>
<li><p><img alt="I^{\text{W}}" src="https://render.githubusercontent.com/render/math?math=I%5E%7B%5Ctext%7BW%7D%7D" />:
Set of wind generators.</p></li>
</ul>
</section>
</section>
<section id="variables">
<h3><span class="section-number">8.8.2. </span>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><img alt="E_{b,t}" src="https://render.githubusercontent.com/render/math?math=E_%7Bb%2Ct%7D" />:
Energy available in energy storage devices at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="f_{l,t}" src="https://render.githubusercontent.com/render/math?math=f_%7Bl%2Ct%7D" />:
Power flowing on branch <img alt="l" src="https://render.githubusercontent.com/render/math?math=l" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="g_{i,t}" src="https://render.githubusercontent.com/render/math?math=g_%7Bi%2Ct%7D" />:
Power injected by each generator <img alt="i" src="https://render.githubusercontent.com/render/math?math=i" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="g_{i,s,t}" src="https://render.githubusercontent.com/render/math?math=g_%7Bi%2Cs%2Ct%7D" />:
Power injected by each generator <img alt="i" src="https://render.githubusercontent.com/render/math?math=i" />
from cost curve segment <img alt="s" src="https://render.githubusercontent.com/render/math?math=s" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="J_{b,t}^{\text{chg}}" src="https://render.githubusercontent.com/render/math?math=J_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bchg%7D%7D" />:
Charging power of energy storage devices at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="J_{b,t}^{\text{dis}}" src="https://render.githubusercontent.com/render/math?math=J_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bdis%7D%7D" />:
Discharging power of energy storage devices at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="s_{b,t}" src="https://render.githubusercontent.com/render/math?math=s_%7Bb%2Ct%7D" />:
Load shed at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="v_{l,t}" src="https://render.githubusercontent.com/render/math?math=v_%7Bl%2Ct%7D" />:
Branch limit violation for branch <img alt="l" src="https://render.githubusercontent.com/render/math?math=l" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="\delta_{b,t}^{\text{down}}" src="https://render.githubusercontent.com/render/math?math=%5Cdelta_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bdown%7D%7D" />:
Amount of flexible demand curtailed at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="\delta_{b,t}^{\text{up}}" src="https://render.githubusercontent.com/render/math?math=%5Cdelta_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bup%7D%7D" />:
Amount of flexible demand added at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="{\theta}_{b,t}" src="https://render.githubusercontent.com/render/math?math=%7B%5Ctheta%7D_%7Bb%2Ct%7D" />:
Voltage angle of bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
</ul>
</section>
<section id="parameters">
<h3><span class="section-number">8.8.3. </span>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><img alt="a^{\text{shed}}" src="https://render.githubusercontent.com/render/math?math=a%5E%7B%5Ctext%7Bshed%7D%7D" />:
Binary parameter, whether load shedding is enabled.</p></li>
<li><p><img alt="a^{\text{viol}}" src="https://render.githubusercontent.com/render/math?math=a%5E%7B%5Ctext%7Bviol%7D%7D" />:
Binary parameter, whether transmission limit violation is enabled.</p></li>
<li><p><img alt="c_{i,s}" src="https://render.githubusercontent.com/render/math?math=c_%7Bi%2Cs%7D" />:
Cost coefficient for segment <img alt="s" src="https://render.githubusercontent.com/render/math?math=s" />
of generator <img alt="i" src="https://render.githubusercontent.com/render/math?math=i" />.</p></li>
<li><p><img alt="C_{i}^{\text{min}}" src="https://render.githubusercontent.com/render/math?math=C_%7Bi%7D%5E%7B%5Ctext%7Bmin%7D%7D" />:
Cost of running generator <img alt="i" src="https://render.githubusercontent.com/render/math?math=i" />
at its minimum power level.</p></li>
<li><p><img alt="d_{b,t}" src="https://render.githubusercontent.com/render/math?math=d_%7Bb%2Ct%7D" />:
Power demand at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />
at time at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="E_{b,0}" src="https://render.githubusercontent.com/render/math?math=E_%7Bb%2C0%7D" />:
Initial energy available in energy storage devices at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />.</p></li>
<li><p><img alt="E_{b}^{\text{max}}" src="https://render.githubusercontent.com/render/math?math=E_%7Bb%7D%5E%7B%5Ctext%7Bmax%7D%7D" />:
Maximum energy stored in energy storage devices at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />.</p></li>
<li><p><img alt="f_{l}^{\text{max}}" src="https://render.githubusercontent.com/render/math?math=f_%7Bl%7D%5E%7B%5Ctext%7Bmax%7D%7D" />:
Maximum flow over line <img alt="l" src="https://render.githubusercontent.com/render/math?math=l" />.</p></li>
<li><p><img alt="g_{i}^{\text{min}}" src="https://render.githubusercontent.com/render/math?math=g_%7Bi%7D%5E%7B%5Ctext%7Bmin%7D%7D" />:
Minimum generation for generator <img alt="i" src="https://render.githubusercontent.com/render/math?math=i" />.</p></li>
<li><p><img alt="g_{i,s}^{\text{max}}" src="https://render.githubusercontent.com/render/math?math=g_%7Bi%2Cs%7D%5E%7B%5Ctext%7Bmax%7D%7D" />:
Generator cost curve segment width.</p></li>
<li><p><img alt="J_{b}^{\text{max}}" src="https://render.githubusercontent.com/render/math?math=J_%7Bb%7D%5E%7B%5Ctext%7Bmax%7D%7D" />:
Maximum charging/discharging power of energy storage devices at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />.</p></li>
<li><p><img alt="m_{l,b}^{\text{line}}" src="https://render.githubusercontent.com/render/math?math=m_%7Bl%2Cb%7D%5E%7B%5Ctext%7Bline%7D%7D" />:
Mapping of branches to buses.
<img alt="m_{l,b}^{\text{line}} = 1" src="https://render.githubusercontent.com/render/math?math=m_%7Bl%2Cb%7D%5E%7B%5Ctext%7Bline%7D%7D%20%3D%201" />
if branch <img alt="l" src="https://render.githubusercontent.com/render/math?math=l" /> ‘starts’
at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />,
<img alt="m_{l,b}^{\text{line}} = -1" src="https://render.githubusercontent.com/render/math?math=m_%7Bl%2Cb%7D%5E%7B%5Ctext%7Bline%7D%7D%20%3D%20-1" />
if branch <img alt="l" src="https://render.githubusercontent.com/render/math?math=l" /> ‘ends’
at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />,
otherwise <img alt="m_{l,b}^{\text{line}} = 0" src="https://render.githubusercontent.com/render/math?math=m_%7Bl%2Cb%7D%5E%7B%5Ctext%7Bline%7D%7D%20%3D%200" />.</p></li>
<li><p><img alt="m_{i,b}^{\text{unit}}" src="https://render.githubusercontent.com/render/math?math=m_%7Bi%2Cb%7D%5E%7B%5Ctext%7Bunit%7D%7D" />:
Mapping of generators to buses.
<img alt="m_{i,b}^{\text{unit}} = 1" src="https://render.githubusercontent.com/render/math?math=m_%7Bi%2Cb%7D%5E%7B%5Ctext%7Bunit%7D%7D%20%3D%201" />
if generator <img alt="i" src="https://render.githubusercontent.com/render/math?math=i" />
is located at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />,
otherwise <img alt="m_{i,b}^{\text{unit}} = 0" src="https://render.githubusercontent.com/render/math?math=m_%7Bi%2Cb%7D%5E%7B%5Ctext%7Bunit%7D%7D%20%3D%200" />.</p></li>
<li><p><img alt="M" src="https://render.githubusercontent.com/render/math?math=M" />:
An arbitrarily-large constant, used in ‘big-M’ constraints to either constrain to 0, or relax constraint.</p></li>
<li><p><img alt="p^{\text{e}}" src="https://render.githubusercontent.com/render/math?math=p%5E%7B%5Ctext%7Be%7D%7D" />:
Value of stored energy at beginning/end of interval (so that optimization does not automatically drain the storage by end-of-interval).</p></li>
<li><p><img alt="p^{\text{s}}" src="https://render.githubusercontent.com/render/math?math=p%5E%7B%5Ctext%7Bs%7D%7D" />:
Load shed penalty factor.</p></li>
<li><p><img alt="p^{\text{v}}" src="https://render.githubusercontent.com/render/math?math=p%5E%7B%5Ctext%7Bv%7D%7D" />:
Transmission violation penalty factor.</p></li>
<li><p><img alt="r_{i}^{\text{up}}" src="https://render.githubusercontent.com/render/math?math=r_%7Bi%7D%5E%7B%5Ctext%7Bup%7D%7D" />:
Ramp-up limit for generator <img alt="i" src="https://render.githubusercontent.com/render/math?math=i" />.</p></li>
<li><p><img alt="r_{i}^{\text{down}}" src="https://render.githubusercontent.com/render/math?math=r_%7Bi%7D%5E%7B%5Ctext%7Bdown%7D%7D" />:
Ramp-down limit for generator <img alt="i" src="https://render.githubusercontent.com/render/math?math=i" />.</p></li>
<li><p><img alt="w_{i,t}" src="https://render.githubusercontent.com/render/math?math=w_%7Bi%2Ct%7D" />:
Power available from time-varying generator (hydro, wind, solar) <img alt="i" src="https://render.githubusercontent.com/render/math?math=i" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="x_{l}" src="https://render.githubusercontent.com/render/math?math=x_%7Bl%7D" />:
Impedance of branch <img alt="l" src="https://render.githubusercontent.com/render/math?math=l" />.</p></li>
<li><p><img alt="\underline{\delta}_{b, t}" src="https://render.githubusercontent.com/render/math?math=%5Cunderline%7B%5Cdelta%7D_%7Bb%2Ct%7D" />:
Demand flexibility curtailments available (in MW) at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="\overline{\delta}_{b, t}" src="https://render.githubusercontent.com/render/math?math=%5Coverline%7B%5Cdelta%7D_%7Bb%2Ct%7D" />:
Demand flexibility additions available (in MW) at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="\Delta^{\text{balance}}" src="https://render.githubusercontent.com/render/math?math=%5CDelta%5E%7B%5Ctext%7Bbalance%7D%7D" />:
The length of the rolling load balance window (in hours), used to account for the duration that flexible demand is deviating from the base demand.</p></li>
<li><p><img alt="\eta_{b}^{\text{chg}}" src="https://render.githubusercontent.com/render/math?math=%5Ceta_%7Bb%7D%5E%7B%5Ctext%7Bchg%7D%7D" />:
Charging efficiency of storage device at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />.</p></li>
<li><p><img alt="\eta_{b}^{\text{dis}}" src="https://render.githubusercontent.com/render/math?math=%5Ceta_%7Bb%7D%5E%7B%5Ctext%7Bdis%7D%7D" />:
Discharging efficiency of storage device at bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />.</p></li>
</ul>
</section>
<section id="constraints">
<h3><span class="section-number">8.8.4. </span>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h3>
<p>All equations apply over all entries in the indexed sets unless otherwise listed.</p>
<ul class="simple">
<li><p><img alt="0 \le g_{i,s,t} \le g_{i,s,t}^{\text{max}}" src="https://render.githubusercontent.com/render/math?math=0%5Cle%20g_%7Bi%2Cs%2Ct%7D%5Cle%20g%5E%7B%5Ctext%7Bmax%7D%7D_%7Bi%2Cs%2Ct%7D" />:
Generator segment power is non-negative and less than the segment width.</p></li>
<li><p><img alt="0 \le s_{b,t} \le a^{\text{shed}} \cdot ( d_{b,t} + \delta_{b,t}^{\text{up}} - \delta_{b,t}^{\text{down}} )" src="https://render.githubusercontent.com/render/math?math=0%20%5Cle%20s_%7Bb%2Ct%7D%20%5Cle%20a%5E%7B%5Ctext%7Bshed%7D%7D%20%5Ccdot%20%28%20d_%7Bb%2Ct%7D%20%2B%20%5Cdelta_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bup%7D%7D%20-%20%5Cdelta_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bdown%7D%7D%20%29" />:
Load shed is non-negative and less than the demand at that bus (including the impact of demand flexibility), if load shedding is enabled.
If not, load shed is fixed to 0.</p></li>
<li><p><img alt="0 \le v_{b,t} \le a^{\text{viol}} \cdot M" src="https://render.githubusercontent.com/render/math?math=0%20%5Cle%20v_%7Bb%2Ct%7D%20%5Cle%20a%5E%7B%5Ctext%7Bshed%7D%7D%20%5Ccdot%20M" />:
Transmission violations are non-negative, if they are enabled
(<img alt="M" src="https://render.githubusercontent.com/render/math?math=M" /> is a sufficiently large constant that there is no effective upper limit when <img alt="a^{\text{shed}} = 1" src="https://render.githubusercontent.com/render/math?math=a%5E%7B%5Ctext%7Bshed%7D%7D%20%3D%201" />).
If not, they are fixed to zero.</p></li>
<li><p><img alt="0 \le J_{b,t}^{\text{chg}} \le J_{b}^{\text{max}}" src="https://render.githubusercontent.com/render/math?math=0%20%5Cle%20J_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bchg%7D%7D%20%5Cle%20J_%7Bb%7D%5E%7B%5Ctext%7Bmax%7D%7D" />:
Storage charging power is non-negative and limited by the maximum charging power at that bus.</p></li>
<li><p><img alt="0 \le J_{b,t}^{\text{dis}} \le J_{b}^{\text{max}}" src="https://render.githubusercontent.com/render/math?math=0%20%5Cle%20J_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bdis%7D%7D%20%5Cle%20J_%7Bb%7D%5E%7B%5Ctext%7Bmax%7D%7D" />:
Storage discharging power is non-negative and limited by the maximum discharging power at that bus.</p></li>
<li><p><img alt="0 \le E_{b,t} \le E_{b}^{\text{max}}" src="https://render.githubusercontent.com/render/math?math=0%20%5Cle%20E_%7Bb%2Ct%7D%20%5Cle%20E_%7Bb%7D%5E%7B%5Ctext%7Bmax%7D%7D" />:
Storage state-of-charge is non-negative and limited by the maximum state of charge at that bus.</p></li>
<li><p><img alt="g_{i,t} = w_{i,t} \forall i \in I^{\text{H}}" src="https://render.githubusercontent.com/render/math?math=g_%7Bi%2Cs%7D%20%3D%20w_%7Bi%2Ct%7D%20%5Cforall%20i%20%5Cin%20I%5E%7B%5Ctext%7BH%7D%7D" />:
Hydro generator power is fixed to the profiles.</p></li>
<li><p><img alt="0 \le g_{i,t} \le w_{i,t} \forall i \in I^{\text{S}} \cup I^{\text{W}}" src="https://render.githubusercontent.com/render/math?math=0%20%5Cle%20g_%7Bi%2Cs%7D%20%5Cle%20w_%7Bi%2Ct%7D%20%5Cforall%20i%20%5Cin%20I%5E%7B%5Ctext%7BS%7D%7D%20%5Ccup%20I%5E%7B%5Ctext%7BW%7D%7D" />:
Solar and wind generator power is non-negative and not greater than the availability profiles.</p></li>
<li><p><img alt="\sum_{i \in I} m_{i,b}^{\text{unit}} g_{i,t} + \sum_{l \in L} m_{l,b}^{\text{line}} f_{l,t} + J_{b,t}^{\text{dis}} + s_{b,t} + \delta_{b,t}^{\text{down}} = d_{b,t} + J_{b,t}^{\text{chg}} + \delta_{b,t}^{\text{up}}" src="https://render.githubusercontent.com/render/math?math=%5Csum_%7Bi%20%5Cin%20I%7D%20m_%7Bi%2Cb%7D%5E%7B%5Ctext%7Bunit%7D%7D%20g_%7Bi%2Ct%7D%20%2B%20%5Csum_%7Bl%20%5Cin%20L%7D%20m_%7Bl%2Cb%7D%5E%7B%5Ctext%7Bline%7D%7D%20f_%7Bl%2Ct%7D%20%2B%20J_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bdis%7D%7D%20%2B%20s_%7Bb%2Ct%7D%20%2B%20%5Cdelta_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bdown%7D%7D%20%3D%20d_%7Bb%2Ct%7D%20%2B%20J_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bchg%7D%7D%20%2B%20%5Cdelta_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bup%7D%7D%20" />:
Power balance at each bus <img alt="b" src="https://render.githubusercontent.com/render/math?math=b" />
at time <img alt="t" src="https://render.githubusercontent.com/render/math?math=t" />.</p></li>
<li><p><img alt="g_{i,t} = g_{i}^{\text{min}} + \sum_{s \in S} g_{i,s,t}" src="https://render.githubusercontent.com/render/math?math=g_%7Bi%2Ct%7D%20%3D%20g_%7Bi%7D%5E%7B%5Ctext%7Bmin%7D%7D%20%2B%20%5Csum_%7Bs%20%5Cin%20S%7D%20g_%7Bi%2Cs%2Ct%7D" />:
Total generator power is equal to the minimum power plus the power from each segment.</p></li>
<li><p><img alt="E_{b,t} = E_{b,t-1} + \eta_{b}^{\text{chg}} J_{b,t}^{\text{chg}} - \frac{1}{\eta_{b}^{\text{dis}}} J_{b,t}^{\text{dis}}" src="https://render.githubusercontent.com/render/math?math=E_%7Bb%2Ct%7D%20%3D%20E_%7Bb%2Ct-1%7D%20%2B%20%5Ceta_%7Bb%7D%5E%7B%5Ctext%7Bchg%7D%7D%20J_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bchg%7D%7D%20-%20%5Cfrac%7B1%7D%7B%5Ceta_%7Bb%7D%5E%7B%5Ctext%7Bdis%7D%7D%7D%20J_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bdis%7D%7D" />:
Conservation of energy for energy storage state-of-charge.</p></li>
<li><p><img alt="g_{i,t} - g_{i,t-1} \le r_{i}^{\text{up}}" src="https://render.githubusercontent.com/render/math?math=g_%7Bi%2Ct%7D%20-%20g_%7Bi%2Ct-1%7D%20%5Cle%20r_%7Bi%7D%5E%7B%5Ctext%7Bup%7D%7D" />:
Ramp-up constraint.</p></li>
<li><p><img alt="g_{i,t} - g_{i,t-1} \ge r_{i}^{\text{down}}" src="https://render.githubusercontent.com/render/math?math=g_%7Bi%2Ct%7D%20-%20g_%7Bi%2Ct-1%7D%20%5Cge%20r_%7Bi%7D%5E%7B%5Ctext%7Bdown%7D%7D" />:
Ramp-down constraint.</p></li>
<li><p><img alt="- ( f_{l}^{\text{max}} + v_{l,t} ) \le f_{l,t} \le ( f_{l}^{\text{max}} + v_{l,t} )" src="https://render.githubusercontent.com/render/math?math=-%20%28%20f_%7Bl%7D%5E%7B%5Ctext%7Bmax%7D%7D%20%2B%20v_%7Bl%2Ct%7D%20%29%20%5Cle%20f_%7Bl%2Ct%7D%20%5Cle%20%28%20f_%7Bl%7D%5E%7B%5Ctext%7Bmax%7D%7D%20%2B%20v_%7Bl%2Ct%7D%20%29" />:
Power flow over each branch is limited by the branch power limit, and can only exceed this value by using the ‘violation’ variable (if enabled), which is penalized in the objective function.</p></li>
<li><p><img alt="f_{l,t} = \frac{1}{x_{l}} \sum_{b \in B} m_{l,b}^{\text{line}} \theta_{b,t}" src="https://render.githubusercontent.com/render/math?math=f_%7Bl%2Ct%7D%20%3D%20%5Cfrac%7B1%7D%7Bx_%7Bl%7D%7D%20%5Csum_%7Bb%20%5Cin%20B%7D%20m_%7Bl%2Cb%7D%5E%7B%5Ctext%7Bline%7D%7D%20%5Ctheta_%7Bb%2Ct%7D" />:
Power flow over each branch is proportional to the admittance and the angle difference.</p></li>
<li><p><img alt="0 \le \delta_{b,t}^{\text{down}} \le \underline{\delta_{b,t}}" src="https://render.githubusercontent.com/render/math?math=0%20%5Cle%20%5Cdelta_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bdown%7D%7D%20%5Cle%20%5Cunderline%7B%5Cdelta%7D_%7Bb%2Ct%7D" />:
Bound on the amount of demand that flexible demand resources can curtail.</p></li>
<li><p><img alt="0 \le \delta_{b,t}^{\text{up}} \le \overline{\delta_{b,t}}" src="https://render.githubusercontent.com/render/math?math=0%20%5Cle%20%5Cdelta_%7Bb%2Ct%7D%5E%7B%5Ctext%7Bup%7D%7D%20%5Cle%20%5Coverline%7B%5Cdelta%7D_%7Bb%2Ct%7D" />:
Bound on the amount of demand that flexible demand resources can add.</p></li>
<li><p><img alt="\sum_{t = k}^{k + \Delta^{\text{balance}}} \delta_{b,t}^{\text{up}} - \delta_{b,t}^{\text{down}} \ge 0, \quad \forall b \in B, \quad k = 1, ..., |T| - \Delta^{\text{balance}}" src="https://render.githubusercontent.com/render/math?math=%5Csum_%7Bt%20=%20k%7D%5E%7Bk%20%2B%20%5CDelta%5E%7B%5Ctext%7Bbalance%7D%7D%7D%20%5Cdelta_%7Bb,t%7D%5E%7B%5Ctext%7Bup%7D%7D%20-%20%5Cdelta_%7Bb,t%7D%5E%7B%5Ctext%7Bdown%7D%7D%20%5Cge%200,%20%5Cquad%20%5Cforall%20b%20%5Cin%20B,%20%5Cquad%20k%20=%201,%20...,%20%7CT%7C%20-%20%5CDelta%5E%7B%5Ctext%7Bbalance%7D%7D" />:
Rolling load balance for flexible demand resources; used to restrict the time that flexible demand resources can deviate from the base demand.</p></li>
<li><p><img alt="\sum_{t \in T} \delta_{b,t}^{\text{up}} - \delta_{b,t}^{\text{down}} \ge 0, \quad \forall b \in B" src="https://render.githubusercontent.com/render/math?math=%5Csum_%7Bt%20%5Cin%20T%7D%20%5Cdelta_%7Bb,t%7D%5E%7B%5Ctext%7Bup%7D%7D%20-%20%5Cdelta_%7Bb,t%7D%5E%7B%5Ctext%7Bdown%7D%7D%20%5Cge%200,%20%5Cquad%20%5Cforall%20b%20%5Cin%20B" />:
Interval load balance for flexible demand resources.</p></li>
</ul>
</section>
<section id="objective-function">
<h3><span class="section-number">8.8.5. </span>Objective function<a class="headerlink" href="#objective-function" title="Permalink to this headline">¶</a></h3>
<p><img alt="\min \left [ \sum_{t \in T} \sum_{i \in I} [ C_{i}^{\text{min}} + \sum_{s \in S} c_{i,s} g_{i,s,t} ] + p^{\text{s}} \sum_{t \in T} \sum_{b \in B} s_{b,t} + p^{\text{v}} \sum_{t \in T} \sum_{l \in L} v_{l,t} + p^{\text{e}} \sum_{\b \in B} [E_{b,0} - E_{b,|T|}] \right ]" src="https://render.githubusercontent.com/render/math?math=%5Cmin%20%5Cleft%20%5B%20%5Csum_%7Bt%20%5Cin%20T%7D%20%5Csum_%7Bi%20%5Cin%20I%7D%20%5B%20C_%7Bi%7D%5E%7B%5Ctext%7Bmin%7D%7D%20%2B%20%5Csum_%7Bs%20%5Cin%20S%7D%20c_%7Bi%2Cs%7D%20g_%7Bi%2Cs%2Ct%7D%20%5D%20%2B%20p%5E%7B%5Ctext%7Bs%7D%7D%20%5Csum_%7Bt%20%5Cin%20T%7D%20%5Csum_%7Bb%20%5Cin%20B%7D%20s_%7Bb%2Ct%7D%20%2B%20p%5E%7B%5Ctext%7Bv%7D%7D%20%5Csum_%7Bt%20%5Cin%20T%7D%20%5Csum_%7Bl%20%5Cin%20L%7D%20v_%7Bl%2Ct%7D%20%2B%20p%5E%7B%5Ctext%7Be%7D%7D%20%5Csum_%7B%5Cb%20%5Cin%20B%7D%20%5BE_%7Bb%2C0%7D%20-%20E_%7Bb%2C%7CT%7C%7D%5D%20%5Cright%20%5D" />
There are four main components of the objective function:</p>
<ul class="simple">
<li><p><img alt="\sum_{t \in T} \sum_{i \in I} [ C_{i}^{\text{min}} + \sum_{s \in S} c_{i,s} g_{i,s,t} ]" src="https://render.githubusercontent.com/render/math?math=%5Csum_%7Bt%20%5Cin%20T%7D%20%5Csum_%7Bi%20%5Cin%20I%7D%20%5B%20C_%7Bi%7D%5E%7B%5Ctext%7Bmin%7D%7D%20%2B%20%5Csum_%7Bs%20%5Cin%20S%7D%20c_%7Bi%2Cs%7D%20g_%7Bi%2Cs%2Ct%7D%20%5D" />:
The cost of operating generators, fixed costs plus variable costs, which can consist of several cost curve segments for each generator.</p></li>
<li><p><img alt="p^{\text{s}} \sum_{t \in T} \sum_{b \in B} s_{b,t}" src="https://render.githubusercontent.com/render/math?math=p%5E%7B%5Ctext%7Bs%7D%7D%20%5Csum_%7Bt%20%5Cin%20T%7D%20%5Csum_%7Bb%20%5Cin%20B%7D%20s_%7Bb%2Ct%7D" />:
Penalty for load shedding (if load shedding is enabled).</p></li>
<li><p><img alt="p^{\text{v}} \sum_{t \in T} \sum_{l \in L} v_{l,t}" src="https://render.githubusercontent.com/render/math?math=p%5E%7B%5Ctext%7Bv%7D%7D%20%5Csum_%7Bt%20%5Cin%20T%7D%20%5Csum_%7Bl%20%5Cin%20L%7D%20v_%7Bl%2Ct%7D" />:
Penalty for transmission line limit violations (if transmission violations are enabled).</p></li>
<li><p><img alt="p^{\text{e}} \sum_{\b \in B} [E_{b,0} - E_{b,|T|}]" src="https://render.githubusercontent.com/render/math?math=p%5E%7B%5Ctext%7Be%7D%7D%20%5Csum_%7B%5Cb%20%5Cin%20B%7D%20%5BE_%7Bb%2C0%7D%20-%20E_%7Bb%2C%7CT%7C%7D%5D" />:
Penalty for ending the interval with less stored energy than the start, or reward for ending with more.</p></li>
</ul>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/img/BE_Sciences_RGB_Horizontal_Color.svg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Modeling a clean energy future for the United States</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Breakthrough-Energy&repo=docs&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="user/installation_guide.html">1. Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="communication/code_of_conduct.html">2. Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/contribution_guide.html">3. Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/git_guide.html">4. Working with Git/GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="powersimdata/index.html">5. PowerSimData</a></li>
<li class="toctree-l1"><a class="reference internal" href="prereise/index.html">6. PreREISE</a></li>
<li class="toctree-l1"><a class="reference internal" href="postreise/index.html">7. PostREISE</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">8. REISE.jl</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#table-of-contents">8.1. Table of Contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">8.2. Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#system-requirements">8.2.1. System Requirements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation-local">8.3. Installation (Local)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gurobi-installation">8.3.1. Gurobi Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#julia-installation">8.3.2. Julia Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-packages">8.3.3. Python Packages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#usage-julia">8.4. Usage (Julia)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage-python">8.5. Usage (Python)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-a-simulation">8.5.1. Running a Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extracting-simulation-results">8.5.2. Extracting Simulation Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compatibility-with-powersimdata">8.5.3. Compatibility with PowerSimData</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#docker">8.6. Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#package-structure">8.7. Package Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#formulation">8.8. Formulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sets">8.8.1. Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variables">8.8.2. Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameters">8.8.3. Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constraints">8.8.4. Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#objective-function">8.8.5. Objective function</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="postreise/index.html" title="previous chapter"><span class="section-number">7. </span>PostREISE</a></li>
  </ul></li>
</ul><h3>Useful Links</h3>
<ul>
  <li><a href="https://www.breakthroughenergy.org/">Breakthrough Energy</a></li>
  <li><a href="https://science.breakthroughenergy.org/">Breakthrough Energy Sciences</a></li>
  <li><a href="https://arxiv.org/abs/2002.06155">publication</a></li>
  <li><a href="https://zenodo.org/record/3530898">data @ zenodo</a></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script><ul>
<h3>Code</h3>
<a href="py-modindex.html">Module Index</a>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Breakthrough Energy Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/reisejl_package.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>